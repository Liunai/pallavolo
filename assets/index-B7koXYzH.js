(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();function GS(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Yd={exports:{}},zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function QS(){if(ev)return zl;ev=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:s,type:r,key:d,ref:l!==void 0?l:null,props:c}}return zl.Fragment=t,zl.jsx=i,zl.jsxs=i,zl}var nv;function YS(){return nv||(nv=1,Yd.exports=QS()),Yd.exports}var D=YS(),Kd={exports:{}},Mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function KS(){if(iv)return Mt;iv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),I=Symbol.iterator;function G(M){return M===null||typeof M!="object"?null:(M=I&&M[I]||M["@@iterator"],typeof M=="function"?M:null)}var et={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ot=Object.assign,it={};function wt(M,J,lt){this.props=M,this.context=J,this.refs=it,this.updater=lt||et}wt.prototype.isReactComponent={},wt.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},wt.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Vt(){}Vt.prototype=wt.prototype;function It(M,J,lt){this.props=M,this.context=J,this.refs=it,this.updater=lt||et}var se=It.prototype=new Vt;se.constructor=It,ot(se,wt.prototype),se.isPureReactComponent=!0;var oe=Array.isArray;function Kt(){}var N={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function C(M,J,lt){var st=lt.ref;return{$$typeof:s,type:M,key:J,ref:st!==void 0?st:null,props:lt}}function V(M,J){return C(M.type,J,M.props)}function O(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function P(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(lt){return J[lt]})}var w=/\/+/g;function ve(M,J){return typeof M=="object"&&M!==null&&M.key!=null?P(""+M.key):J.toString(36)}function Ue(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Kt,Kt):(M.status="pending",M.then(function(J){M.status==="pending"&&(M.status="fulfilled",M.value=J)},function(J){M.status==="pending"&&(M.status="rejected",M.reason=J)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Q(M,J,lt,st,At){var nt=typeof M;(nt==="undefined"||nt==="boolean")&&(M=null);var Bt=!1;if(M===null)Bt=!0;else switch(nt){case"bigint":case"string":case"number":Bt=!0;break;case"object":switch(M.$$typeof){case s:case t:Bt=!0;break;case A:return Bt=M._init,Q(Bt(M._payload),J,lt,st,At)}}if(Bt)return At=At(M),Bt=st===""?"."+ve(M,0):st,oe(At)?(lt="",Bt!=null&&(lt=Bt.replace(w,"$&/")+"/"),Q(At,J,lt,"",function(Ci){return Ci})):At!=null&&(O(At)&&(At=V(At,lt+(At.key==null||M&&M.key===At.key?"":(""+At.key).replace(w,"$&/")+"/")+Bt)),J.push(At)),1;Bt=0;var De=st===""?".":st+":";if(oe(M))for(var ye=0;ye<M.length;ye++)st=M[ye],nt=De+ve(st,ye),Bt+=Q(st,J,lt,nt,At);else if(ye=G(M),typeof ye=="function")for(M=ye.call(M),ye=0;!(st=M.next()).done;)st=st.value,nt=De+ve(st,ye++),Bt+=Q(st,J,lt,nt,At);else if(nt==="object"){if(typeof M.then=="function")return Q(Ue(M),J,lt,st,At);throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Bt}function at(M,J,lt){if(M==null)return M;var st=[],At=0;return Q(M,st,"","",function(nt){return J.call(lt,nt,At++)}),st}function Et(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(lt){(M._status===0||M._status===-1)&&(M._status=1,M._result=lt)},function(lt){(M._status===0||M._status===-1)&&(M._status=2,M._result=lt)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var Xt=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},re={map:at,forEach:function(M,J,lt){at(M,function(){J.apply(this,arguments)},lt)},count:function(M){var J=0;return at(M,function(){J++}),J},toArray:function(M){return at(M,function(J){return J})||[]},only:function(M){if(!O(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Mt.Activity=S,Mt.Children=re,Mt.Component=wt,Mt.Fragment=i,Mt.Profiler=l,Mt.PureComponent=It,Mt.StrictMode=r,Mt.Suspense=_,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},Mt.cache=function(M){return function(){return M.apply(null,arguments)}},Mt.cacheSignal=function(){return null},Mt.cloneElement=function(M,J,lt){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var st=ot({},M.props),At=M.key;if(J!=null)for(nt in J.key!==void 0&&(At=""+J.key),J)!b.call(J,nt)||nt==="key"||nt==="__self"||nt==="__source"||nt==="ref"&&J.ref===void 0||(st[nt]=J[nt]);var nt=arguments.length-2;if(nt===1)st.children=lt;else if(1<nt){for(var Bt=Array(nt),De=0;De<nt;De++)Bt[De]=arguments[De+2];st.children=Bt}return C(M.type,At,st)},Mt.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},Mt.createElement=function(M,J,lt){var st,At={},nt=null;if(J!=null)for(st in J.key!==void 0&&(nt=""+J.key),J)b.call(J,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(At[st]=J[st]);var Bt=arguments.length-2;if(Bt===1)At.children=lt;else if(1<Bt){for(var De=Array(Bt),ye=0;ye<Bt;ye++)De[ye]=arguments[ye+2];At.children=De}if(M&&M.defaultProps)for(st in Bt=M.defaultProps,Bt)At[st]===void 0&&(At[st]=Bt[st]);return C(M,nt,At)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(M){return{$$typeof:p,render:M}},Mt.isValidElement=O,Mt.lazy=function(M){return{$$typeof:A,_payload:{_status:-1,_result:M},_init:Et}},Mt.memo=function(M,J){return{$$typeof:y,type:M,compare:J===void 0?null:J}},Mt.startTransition=function(M){var J=N.T,lt={};N.T=lt;try{var st=M(),At=N.S;At!==null&&At(lt,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(Kt,Xt)}catch(nt){Xt(nt)}finally{J!==null&&lt.types!==null&&(J.types=lt.types),N.T=J}},Mt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Mt.use=function(M){return N.H.use(M)},Mt.useActionState=function(M,J,lt){return N.H.useActionState(M,J,lt)},Mt.useCallback=function(M,J){return N.H.useCallback(M,J)},Mt.useContext=function(M){return N.H.useContext(M)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(M,J){return N.H.useDeferredValue(M,J)},Mt.useEffect=function(M,J){return N.H.useEffect(M,J)},Mt.useEffectEvent=function(M){return N.H.useEffectEvent(M)},Mt.useId=function(){return N.H.useId()},Mt.useImperativeHandle=function(M,J,lt){return N.H.useImperativeHandle(M,J,lt)},Mt.useInsertionEffect=function(M,J){return N.H.useInsertionEffect(M,J)},Mt.useLayoutEffect=function(M,J){return N.H.useLayoutEffect(M,J)},Mt.useMemo=function(M,J){return N.H.useMemo(M,J)},Mt.useOptimistic=function(M,J){return N.H.useOptimistic(M,J)},Mt.useReducer=function(M,J,lt){return N.H.useReducer(M,J,lt)},Mt.useRef=function(M){return N.H.useRef(M)},Mt.useState=function(M){return N.H.useState(M)},Mt.useSyncExternalStore=function(M,J,lt){return N.H.useSyncExternalStore(M,J,lt)},Mt.useTransition=function(){return N.H.useTransition()},Mt.version="19.2.0",Mt}var sv;function Um(){return sv||(sv=1,Kd.exports=KS()),Kd.exports}var Nt=Um();const XS=GS(Nt);var Xd={exports:{}},jl={},$d={exports:{}},Zd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function $S(){return rv||(rv=1,(function(s){function t(Q,at){var Et=Q.length;Q.push(at);t:for(;0<Et;){var Xt=Et-1>>>1,re=Q[Xt];if(0<l(re,at))Q[Xt]=at,Q[Et]=re,Et=Xt;else break t}}function i(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var at=Q[0],Et=Q.pop();if(Et!==at){Q[0]=Et;t:for(var Xt=0,re=Q.length,M=re>>>1;Xt<M;){var J=2*(Xt+1)-1,lt=Q[J],st=J+1,At=Q[st];if(0>l(lt,Et))st<re&&0>l(At,lt)?(Q[Xt]=At,Q[st]=Et,Xt=st):(Q[Xt]=lt,Q[J]=Et,Xt=J);else if(st<re&&0>l(At,Et))Q[Xt]=At,Q[st]=Et,Xt=st;else break t}}return at}function l(Q,at){var Et=Q.sortIndex-at.sortIndex;return Et!==0?Et:Q.id-at.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var _=[],y=[],A=1,S=null,I=3,G=!1,et=!1,ot=!1,it=!1,wt=typeof setTimeout=="function"?setTimeout:null,Vt=typeof clearTimeout=="function"?clearTimeout:null,It=typeof setImmediate<"u"?setImmediate:null;function se(Q){for(var at=i(y);at!==null;){if(at.callback===null)r(y);else if(at.startTime<=Q)r(y),at.sortIndex=at.expirationTime,t(_,at);else break;at=i(y)}}function oe(Q){if(ot=!1,se(Q),!et)if(i(_)!==null)et=!0,Kt||(Kt=!0,P());else{var at=i(y);at!==null&&Ue(oe,at.startTime-Q)}}var Kt=!1,N=-1,b=5,C=-1;function V(){return it?!0:!(s.unstable_now()-C<b)}function O(){if(it=!1,Kt){var Q=s.unstable_now();C=Q;var at=!0;try{t:{et=!1,ot&&(ot=!1,Vt(N),N=-1),G=!0;var Et=I;try{e:{for(se(Q),S=i(_);S!==null&&!(S.expirationTime>Q&&V());){var Xt=S.callback;if(typeof Xt=="function"){S.callback=null,I=S.priorityLevel;var re=Xt(S.expirationTime<=Q);if(Q=s.unstable_now(),typeof re=="function"){S.callback=re,se(Q),at=!0;break e}S===i(_)&&r(_),se(Q)}else r(_);S=i(_)}if(S!==null)at=!0;else{var M=i(y);M!==null&&Ue(oe,M.startTime-Q),at=!1}}break t}finally{S=null,I=Et,G=!1}at=void 0}}finally{at?P():Kt=!1}}}var P;if(typeof It=="function")P=function(){It(O)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,ve=w.port2;w.port1.onmessage=O,P=function(){ve.postMessage(null)}}else P=function(){wt(O,0)};function Ue(Q,at){N=wt(function(){Q(s.unstable_now())},at)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return I},s.unstable_next=function(Q){switch(I){case 1:case 2:case 3:var at=3;break;default:at=I}var Et=I;I=at;try{return Q()}finally{I=Et}},s.unstable_requestPaint=function(){it=!0},s.unstable_runWithPriority=function(Q,at){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Et=I;I=Q;try{return at()}finally{I=Et}},s.unstable_scheduleCallback=function(Q,at,Et){var Xt=s.unstable_now();switch(typeof Et=="object"&&Et!==null?(Et=Et.delay,Et=typeof Et=="number"&&0<Et?Xt+Et:Xt):Et=Xt,Q){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Et+re,Q={id:A++,callback:at,priorityLevel:Q,startTime:Et,expirationTime:re,sortIndex:-1},Et>Xt?(Q.sortIndex=Et,t(y,Q),i(_)===null&&Q===i(y)&&(ot?(Vt(N),N=-1):ot=!0,Ue(oe,Et-Xt))):(Q.sortIndex=re,t(_,Q),et||G||(et=!0,Kt||(Kt=!0,P()))),Q},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(Q){var at=I;return function(){var Et=I;I=at;try{return Q.apply(this,arguments)}finally{I=Et}}}})(Zd)),Zd}var av;function ZS(){return av||(av=1,$d.exports=$S()),$d.exports}var Jd={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov;function JS(){if(ov)return _n;ov=1;var s=Um();function t(_){var y="https://react.dev/errors/"+_;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)y+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+_+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(_,y,A){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:S==null?null:""+S,children:_,containerInfo:y,implementation:A}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(_,y){if(_==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_n.createPortal=function(_,y){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(_,y,null,A)},_n.flushSync=function(_){var y=d.T,A=r.p;try{if(d.T=null,r.p=2,_)return _()}finally{d.T=y,r.p=A,r.d.f()}},_n.preconnect=function(_,y){typeof _=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(_,y))},_n.prefetchDNS=function(_){typeof _=="string"&&r.d.D(_)},_n.preinit=function(_,y){if(typeof _=="string"&&y&&typeof y.as=="string"){var A=y.as,S=p(A,y.crossOrigin),I=typeof y.integrity=="string"?y.integrity:void 0,G=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;A==="style"?r.d.S(_,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:I,fetchPriority:G}):A==="script"&&r.d.X(_,{crossOrigin:S,integrity:I,fetchPriority:G,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},_n.preinitModule=function(_,y){if(typeof _=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var A=p(y.as,y.crossOrigin);r.d.M(_,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(_)},_n.preload=function(_,y){if(typeof _=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var A=y.as,S=p(A,y.crossOrigin);r.d.L(_,A,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},_n.preloadModule=function(_,y){if(typeof _=="string")if(y){var A=p(y.as,y.crossOrigin);r.d.m(_,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(_)},_n.requestFormReset=function(_){r.d.r(_)},_n.unstable_batchedUpdates=function(_,y){return _(y)},_n.useFormState=function(_,y,A){return d.H.useFormState(_,y,A)},_n.useFormStatus=function(){return d.H.useHostTransitionStatus()},_n.version="19.2.0",_n}var lv;function WS(){if(lv)return Jd.exports;lv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Jd.exports=JS(),Jd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function t1(){if(uv)return jl;uv=1;var s=ZS(),t=Um(),i=WS();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(c(e)!==e)throw Error(r(188))}function y(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,o=n;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return _(h),e;if(f===o)return _(h),n;f=f.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=f;else{for(var g=!1,E=h.child;E;){if(E===a){g=!0,a=h,o=f;break}if(E===o){g=!0,o=h,a=f;break}E=E.sibling}if(!g){for(E=f.child;E;){if(E===a){g=!0,a=f,o=h;break}if(E===o){g=!0,o=f,a=h;break}E=E.sibling}if(!g)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function A(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=A(e),n!==null)return n;e=e.sibling}return null}var S=Object.assign,I=Symbol.for("react.element"),G=Symbol.for("react.transitional.element"),et=Symbol.for("react.portal"),ot=Symbol.for("react.fragment"),it=Symbol.for("react.strict_mode"),wt=Symbol.for("react.profiler"),Vt=Symbol.for("react.consumer"),It=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),Kt=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var w=Symbol.for("react.client.reference");function ve(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===w?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ot:return"Fragment";case wt:return"Profiler";case it:return"StrictMode";case oe:return"Suspense";case Kt:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case et:return"Portal";case It:return e.displayName||"Context";case Vt:return(e._context.displayName||"Context")+".Consumer";case se:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N:return n=e.displayName||null,n!==null?n:ve(e.type)||"Memo";case b:n=e._payload,e=e._init;try{return ve(e(n))}catch{}}return null}var Ue=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Et={pending:!1,data:null,method:null,action:null},Xt=[],re=-1;function M(e){return{current:e}}function J(e){0>re||(e.current=Xt[re],Xt[re]=null,re--)}function lt(e,n){re++,Xt[re]=e.current,e.current=n}var st=M(null),At=M(null),nt=M(null),Bt=M(null);function De(e,n){switch(lt(nt,n),lt(At,e),lt(st,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?b_(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=b_(n),e=w_(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(st),lt(st,e)}function ye(){J(st),J(At),J(nt)}function Ci(e){e.memoizedState!==null&&lt(Bt,e);var n=st.current,a=w_(n,e.type);n!==a&&(lt(At,e),lt(st,a))}function Zi(e){At.current===e&&(J(st),J(At)),Bt.current===e&&(J(Bt),Ul._currentValue=Et)}var Ji,Ms;function mi(e){if(Ji===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Ji=n&&n[1]||"",Ms=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ji+e+Ms}var Ur=!1;function Vs(e,n){if(!e||Ur)return"";Ur=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(F){var B=F}Reflect.construct(e,[],W)}else{try{W.call()}catch(F){B=F}e.call(W.prototype)}}else{try{throw Error()}catch(F){B=F}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(F){if(F&&B&&typeof F.stack=="string")return[F.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),g=f[0],E=f[1];if(g&&E){var R=g.split(`
`),j=E.split(`
`);for(h=o=0;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(o===R.length||h===j.length)for(o=R.length-1,h=j.length-1;1<=o&&0<=h&&R[o]!==j[h];)h--;for(;1<=o&&0<=h;o--,h--)if(R[o]!==j[h]){if(o!==1||h!==1)do if(o--,h--,0>h||R[o]!==j[h]){var Y=`
`+R[o].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=o&&0<=h);break}}}finally{Ur=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?mi(a):""}function Us(e,n){switch(e.tag){case 26:case 27:case 5:return mi(e.type);case 16:return mi("Lazy");case 13:return e.child!==n&&n!==null?mi("Suspense Fallback"):mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return Vs(e.type,!1);case 11:return Vs(e.type.render,!1);case 1:return Vs(e.type,!0);case 31:return mi("Activity");default:return""}}function wa(e){try{var n="",a=null;do n+=Us(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Le=Object.prototype.hasOwnProperty,He=s.unstable_scheduleCallback,Ni=s.unstable_cancelCallback,Lr=s.unstable_shouldYield,Ra=s.unstable_requestPaint,pn=s.unstable_now,Wi=s.unstable_getCurrentPriorityLevel,Ia=s.unstable_ImmediatePriority,Pr=s.unstable_UserBlockingPriority,An=s.unstable_NormalPriority,Ca=s.unstable_LowPriority,ts=s.unstable_IdlePriority,es=s.log,Na=s.unstable_setDisableYieldValue,$t=null,Ze=null;function yn(e){if(typeof es=="function"&&Na(e),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode($t,e)}catch{}}var we=Math.clz32?Math.clz32:kr,Da=Math.log,ns=Math.LN2;function kr(e){return e>>>=0,e===0?32:31-(Da(e)/ns|0)|0}var zn=256,is=262144,xe=4194304;function Wn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ti(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=Wn(o):(g&=E,g!==0?h=Wn(g):a||(a=E&~e,a!==0&&(h=Wn(a))))):(E=o&~f,E!==0?h=Wn(E):g!==0?h=Wn(g):a||(a=o&~e,a!==0&&(h=Wn(a)))),h===0?0:n!==0&&n!==h&&(n&f)===0&&(f=h&-h,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:h}function jn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Go(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sn(){var e=xe;return xe<<=1,(xe&62914560)===0&&(xe=4194304),e}function Nn(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function ss(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function xa(e,n,a,o,h,f){var g=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,R=e.expirationTimes,j=e.hiddenUpdates;for(a=g&~a;0<a;){var Y=31-we(a),W=1<<Y;E[Y]=0,R[Y]=-1;var B=j[Y];if(B!==null)for(j[Y]=null,Y=0;Y<B.length;Y++){var F=B[Y];F!==null&&(F.lane&=-536870913)}a&=~W}o!==0&&rs(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(g&~n))}function rs(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-we(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function zr(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-we(a),h=1<<o;h&n|e[o]&n&&(e[o]|=n),a&=~h}}function jr(e,n){var a=n&-n;return a=(a&42)!==0?1:Dn(a),(a&(e.suspendedLanes|n))!==0?0:a}function Dn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ei(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Oa(){var e=at.p;return e!==0?e:(e=window.event,e===void 0?32:K_(e.type))}function bn(e,n){var a=at.p;try{return at.p=e,n()}finally{at.p=a}}var Bn=Math.random().toString(36).slice(2),Re="__reactFiber$"+Bn,Pe="__reactProps$"+Bn,ni="__reactContainer$"+Bn,Ls="__reactEvents$"+Bn,Qo="__reactListeners$"+Bn,Ma="__reactHandles$"+Bn,Va="__reactResources$"+Bn,L="__reactMarker$"+Bn;function q(e){delete e[Re],delete e[Pe],delete e[Ls],delete e[Qo],delete e[Ma]}function $(e){var n=e[Re];if(n)return n;for(var a=e.parentNode;a;){if(n=a[ni]||a[Re]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=O_(e);e!==null;){if(a=e[Re])return a;e=O_(e)}return n}e=a,a=e.parentNode}return null}function K(e){if(e=e[Re]||e[ni]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function ut(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function _t(e){var n=e[Va];return n||(n=e[Va]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ht(e){e[L]=!0}var yt=new Set,Ut={};function dt(e,n){gt(e,n),gt(e+"Capture",n)}function gt(e,n){for(Ut[e]=n,e=0;e<n.length;e++)yt.add(n[e])}var St=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),he={},Dt={};function ke(e){return Le.call(Dt,e)?!0:Le.call(he,e)?!1:St.test(e)?Dt[e]=!0:(he[e]=!0,!1)}function gi(e,n,a){if(ke(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function en(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Ie(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function ae(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ps(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Yo(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,f=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(g){a=""+g,f.call(this,g)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function le(e){if(!e._valueTracker){var n=Ps(e)?"checked":"value";e._valueTracker=Yo(e,n,""+e[n])}}function Br(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=Ps(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function Di(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var qr=/[\n"\\]/g;function xn(e){return e.replace(qr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ua(e,n,a,o,h,f,g,E){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),n!=null?g==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+ae(n)):e.value!==""+ae(n)&&(e.value=""+ae(n)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),n!=null?Ko(e,g,ae(n)):a!=null?Ko(e,g,ae(a)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+ae(E):e.removeAttribute("name")}function Cu(e,n,a,o,h,f,g,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){le(e);return}a=a!=null?""+ae(a):"",n=n!=null?""+ae(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),le(e)}function Ko(e,n,a){n==="number"&&Di(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ks(e,n,a,o){if(e=e.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=n.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+ae(a),n=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function Nu(e,n,a){if(n!=null&&(n=""+ae(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+ae(a):""}function zs(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(r(92));if(Ue(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=ae(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),le(e)}function On(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Du=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xo(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||Du.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function $o(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&Xo(e,h,o)}else for(var f in n)n.hasOwnProperty(f)&&Xo(e,f,n[f])}function La(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),js=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pa(e){return js.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function pi(){}var Zo=null;function ii(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bs=null,xi=null;function Hr(e){var n=K(e);if(n&&(e=n.stateNode)){var a=e[Pe]||null;t:switch(e=n.stateNode,n.type){case"input":if(Ua(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+xn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var h=o[Pe]||null;if(!h)throw Error(r(90));Ua(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&Br(o)}break t;case"textarea":Nu(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&ks(e,!!a.multiple,n,!1)}}}var ka=!1;function qs(e,n,a){if(ka)return e(n,a);ka=!0;try{var o=e(n);return o}finally{if(ka=!1,(Bs!==null||xi!==null)&&(bc(),Bs&&(n=Bs,e=xi,xi=Bs=null,Hr(n),e)))for(n=0;n<e.length;n++)Hr(e[n])}}function yi(e,n){var a=e.stateNode;if(a===null)return null;var o=a[Pe]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fr=!1;if(si)try{var fe={};Object.defineProperty(fe,"passive",{get:function(){Fr=!0}}),window.addEventListener("test",fe,fe),window.removeEventListener("test",fe,fe)}catch{Fr=!1}var Oi=null,Jo=null,Gr=null;function Wo(){if(Gr)return Gr;var e,n=Jo,a=n.length,o,h="value"in Oi?Oi.value:Oi.textContent,f=h.length;for(e=0;e<a&&n[e]===h[e];e++);var g=a-e;for(o=1;o<=g&&n[a-o]===h[f-o];o++);return Gr=h.slice(e,1<o?1-o:void 0)}function Qr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function as(){return!0}function _i(){return!1}function an(e){function n(a,o,h,f,g){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?as:_i,this.isPropagationStopped=_i,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),n}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=an(os),Hs=S({},os,{view:0,detail:0}),tl=an(Hs),Fs,za,Vi,ja=S({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vi&&(Vi&&e.type==="mousemove"?(Fs=e.screenX-Vi.screenX,za=e.screenY-Vi.screenY):za=Fs=0,Vi=e),Fs)},movementY:function(e){return"movementY"in e?e.movementY:za}}),el=an(ja),Yr=S({},ja,{dataTransfer:0}),Ou=an(Yr),Mu=S({},Hs,{relatedTarget:0}),Kr=an(Mu),nl=S({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),Vu=an(nl),Ba=S({},os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Uu=an(Ba),Lu=S({},os,{data:0}),Ui=an(Lu),Pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ku={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ju(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=zu[e])?!!n[e]:!1}function Gs(){return ju}var wn=S({},Hs,{key:function(e){if(e.key){var n=Pu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Qr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ku[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gs,charCode:function(e){return e.type==="keypress"?Qr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Bu=an(wn),qu=S({},ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ls=an(qu),u=S({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gs}),m=an(u),v=S({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=an(v),k=S({},ja,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),H=an(k),rt=S({},os,{newState:0,oldState:0}),Lt=an(rt),ze=[9,13,27,32],ne=si&&"CompositionEvent"in window,Se=null;si&&"documentMode"in document&&(Se=document.documentMode);var ri=si&&"TextEvent"in window&&!Se,Li=si&&(!ne||Se&&8<Se&&11>=Se),vi=" ",Ei=!1;function Xr(e,n){switch(e){case"keyup":return ze.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ha=!1;function gA(e,n){switch(e){case"compositionend":return qa(n);case"keypress":return n.which!==32?null:(Ei=!0,vi);case"textInput":return e=n.data,e===vi&&Ei?null:e;default:return null}}function pA(e,n){if(Ha)return e==="compositionend"||!ne&&Xr(e,n)?(e=Wo(),Gr=Jo=Oi=null,Ha=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Li&&n.locale!=="ko"?null:n.data;default:return null}}var yA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!yA[e.type]:n==="textarea"}function Lg(e,n,a,o){Bs?xi?xi.push(o):xi=[o]:Bs=o,n=xc(n,"onChange"),0<n.length&&(a=new Mi("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var il=null,sl=null;function _A(e){__(e,0)}function Hu(e){var n=ut(e);if(Br(n))return e}function Pg(e,n){if(e==="change")return n}var kg=!1;if(si){var Wh;if(si){var tf="oninput"in document;if(!tf){var zg=document.createElement("div");zg.setAttribute("oninput","return;"),tf=typeof zg.oninput=="function"}Wh=tf}else Wh=!1;kg=Wh&&(!document.documentMode||9<document.documentMode)}function jg(){il&&(il.detachEvent("onpropertychange",Bg),sl=il=null)}function Bg(e){if(e.propertyName==="value"&&Hu(sl)){var n=[];Lg(n,sl,e,ii(e)),qs(_A,n)}}function vA(e,n,a){e==="focusin"?(jg(),il=n,sl=a,il.attachEvent("onpropertychange",Bg)):e==="focusout"&&jg()}function EA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hu(sl)}function TA(e,n){if(e==="click")return Hu(n)}function AA(e,n){if(e==="input"||e==="change")return Hu(n)}function SA(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var qn=typeof Object.is=="function"?Object.is:SA;function rl(e,n){if(qn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Le.call(n,h)||!qn(e[h],n[h]))return!1}return!0}function qg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hg(e,n){var a=qg(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=qg(a)}}function Fg(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Fg(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Gg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Di(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Di(e.document)}return n}function ef(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var bA=si&&"documentMode"in document&&11>=document.documentMode,Fa=null,nf=null,al=null,sf=!1;function Qg(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sf||Fa==null||Fa!==Di(o)||(o=Fa,"selectionStart"in o&&ef(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),al&&rl(al,o)||(al=o,o=xc(nf,"onSelect"),0<o.length&&(n=new Mi("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=Fa)))}function $r(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Ga={animationend:$r("Animation","AnimationEnd"),animationiteration:$r("Animation","AnimationIteration"),animationstart:$r("Animation","AnimationStart"),transitionrun:$r("Transition","TransitionRun"),transitionstart:$r("Transition","TransitionStart"),transitioncancel:$r("Transition","TransitionCancel"),transitionend:$r("Transition","TransitionEnd")},rf={},Yg={};si&&(Yg=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function Zr(e){if(rf[e])return rf[e];if(!Ga[e])return e;var n=Ga[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Yg)return rf[e]=n[a];return e}var Kg=Zr("animationend"),Xg=Zr("animationiteration"),$g=Zr("animationstart"),wA=Zr("transitionrun"),RA=Zr("transitionstart"),IA=Zr("transitioncancel"),Zg=Zr("transitionend"),Jg=new Map,af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");af.push("scrollEnd");function Ti(e,n){Jg.set(e,n),dt(n,[e])}var Fu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ai=[],Qa=0,of=0;function Gu(){for(var e=Qa,n=of=Qa=0;n<e;){var a=ai[n];ai[n++]=null;var o=ai[n];ai[n++]=null;var h=ai[n];ai[n++]=null;var f=ai[n];if(ai[n++]=null,o!==null&&h!==null){var g=o.pending;g===null?h.next=h:(h.next=g.next,g.next=h),o.pending=h}f!==0&&Wg(a,h,f)}}function Qu(e,n,a,o){ai[Qa++]=e,ai[Qa++]=n,ai[Qa++]=a,ai[Qa++]=o,of|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function lf(e,n,a,o){return Qu(e,n,a,o),Yu(e)}function Jr(e,n){return Qu(e,null,null,n),Yu(e)}function Wg(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&n!==null&&(h=31-we(a),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=a|536870912),f):null}function Yu(e){if(50<Cl)throw Cl=0,yd=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ya={};function CA(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(e,n,a,o){return new CA(e,n,a,o)}function uf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function us(e,n){var a=e.alternate;return a===null?(a=Hn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function tp(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Ku(e,n,a,o,h,f){var g=0;if(o=e,typeof e=="function")uf(e)&&(g=1);else if(typeof e=="string")g=MS(e,a,st.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=Hn(31,a,n,h),e.elementType=C,e.lanes=f,e;case ot:return Wr(a.children,h,f,n);case it:g=8,h|=24;break;case wt:return e=Hn(12,a,n,h|2),e.elementType=wt,e.lanes=f,e;case oe:return e=Hn(13,a,n,h),e.elementType=oe,e.lanes=f,e;case Kt:return e=Hn(19,a,n,h),e.elementType=Kt,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case It:g=10;break t;case Vt:g=9;break t;case se:g=11;break t;case N:g=14;break t;case b:g=16,o=null;break t}g=29,a=Error(r(130,e===null?"null":typeof e,"")),o=null}return n=Hn(g,a,n,h),n.elementType=e,n.type=o,n.lanes=f,n}function Wr(e,n,a,o){return e=Hn(7,e,o,n),e.lanes=a,e}function cf(e,n,a){return e=Hn(6,e,null,n),e.lanes=a,e}function ep(e){var n=Hn(18,null,null,0);return n.stateNode=e,n}function hf(e,n,a){return n=Hn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var np=new WeakMap;function oi(e,n){if(typeof e=="object"&&e!==null){var a=np.get(e);return a!==void 0?a:(n={value:e,source:n,stack:wa(n)},np.set(e,n),n)}return{value:e,source:n,stack:wa(n)}}var Ka=[],Xa=0,Xu=null,ol=0,li=[],ui=0,Qs=null,Pi=1,ki="";function cs(e,n){Ka[Xa++]=ol,Ka[Xa++]=Xu,Xu=e,ol=n}function ip(e,n,a){li[ui++]=Pi,li[ui++]=ki,li[ui++]=Qs,Qs=e;var o=Pi;e=ki;var h=32-we(o)-1;o&=~(1<<h),a+=1;var f=32-we(n)+h;if(30<f){var g=h-h%5;f=(o&(1<<g)-1).toString(32),o>>=g,h-=g,Pi=1<<32-we(n)+h|a<<h|o,ki=f+e}else Pi=1<<f|a<<h|o,ki=e}function ff(e){e.return!==null&&(cs(e,1),ip(e,1,0))}function df(e){for(;e===Xu;)Xu=Ka[--Xa],Ka[Xa]=null,ol=Ka[--Xa],Ka[Xa]=null;for(;e===Qs;)Qs=li[--ui],li[ui]=null,ki=li[--ui],li[ui]=null,Pi=li[--ui],li[ui]=null}function sp(e,n){li[ui++]=Pi,li[ui++]=ki,li[ui++]=Qs,Pi=n.id,ki=n.overflow,Qs=e}var on=null,Ee=null,Yt=!1,Ys=null,ci=!1,mf=Error(r(519));function Ks(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ll(oi(n,e)),mf}function rp(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Re]=e,n[Pe]=o,a){case"dialog":jt("cancel",n),jt("close",n);break;case"iframe":case"object":case"embed":jt("load",n);break;case"video":case"audio":for(a=0;a<Dl.length;a++)jt(Dl[a],n);break;case"source":jt("error",n);break;case"img":case"image":case"link":jt("error",n),jt("load",n);break;case"details":jt("toggle",n);break;case"input":jt("invalid",n),Cu(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":jt("invalid",n);break;case"textarea":jt("invalid",n),zs(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||A_(n.textContent,a)?(o.popover!=null&&(jt("beforetoggle",n),jt("toggle",n)),o.onScroll!=null&&jt("scroll",n),o.onScrollEnd!=null&&jt("scrollend",n),o.onClick!=null&&(n.onclick=pi),n=!0):n=!1,n||Ks(e,!0)}function ap(e){for(on=e.return;on;)switch(on.tag){case 5:case 31:case 13:ci=!1;return;case 27:case 3:ci=!0;return;default:on=on.return}}function $a(e){if(e!==on)return!1;if(!Yt)return ap(e),Yt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Od(e.type,e.memoizedProps)),a=!a),a&&Ee&&Ks(e),ap(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Ee=x_(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Ee=x_(e)}else n===27?(n=Ee,lr(e.type)?(e=Pd,Pd=null,Ee=e):Ee=n):Ee=on?fi(e.stateNode.nextSibling):null;return!0}function ta(){Ee=on=null,Yt=!1}function gf(){var e=Ys;return e!==null&&(Ln===null?Ln=e:Ln.push.apply(Ln,e),Ys=null),e}function ll(e){Ys===null?Ys=[e]:Ys.push(e)}var pf=M(null),ea=null,hs=null;function Xs(e,n,a){lt(pf,n._currentValue),n._currentValue=a}function fs(e){e._currentValue=pf.current,J(pf)}function yf(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function _f(e,n,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var g=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var R=0;R<n.length;R++)if(E.context===n[R]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),yf(f.return,a,e),o||(g=null);break t}f=E.next}}else if(h.tag===18){if(g=h.return,g===null)throw Error(r(341));g.lanes|=a,f=g.alternate,f!==null&&(f.lanes|=a),yf(g,a,e),g=null}else g=h.child;if(g!==null)g.return=h;else for(g=h;g!==null;){if(g===e){g=null;break}if(h=g.sibling,h!==null){h.return=g.return,g=h;break}g=g.return}h=g}}function Za(e,n,a,o){e=null;for(var h=n,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var g=h.alternate;if(g===null)throw Error(r(387));if(g=g.memoizedProps,g!==null){var E=h.type;qn(h.pendingProps.value,g.value)||(e!==null?e.push(E):e=[E])}}else if(h===Bt.current){if(g=h.alternate,g===null)throw Error(r(387));g.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Ul):e=[Ul])}h=h.return}e!==null&&_f(n,e,a,o),n.flags|=262144}function $u(e){for(e=e.firstContext;e!==null;){if(!qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function na(e){ea=e,hs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ln(e){return op(ea,e)}function Zu(e,n){return ea===null&&na(e),op(e,n)}function op(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},hs===null){if(e===null)throw Error(r(308));hs=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else hs=hs.next=n;return a}var NA=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},DA=s.unstable_scheduleCallback,xA=s.unstable_NormalPriority,Fe={$$typeof:It,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vf(){return{controller:new NA,data:new Map,refCount:0}}function ul(e){e.refCount--,e.refCount===0&&DA(xA,function(){e.controller.abort()})}var cl=null,Ef=0,Ja=0,Wa=null;function OA(e,n){if(cl===null){var a=cl=[];Ef=0,Ja=Sd(),Wa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Ef++,n.then(lp,lp),n}function lp(){if(--Ef===0&&cl!==null){Wa!==null&&(Wa.status="fulfilled");var e=cl;cl=null,Ja=0,Wa=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function MA(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var up=Q.S;Q.S=function(e,n){Qy=pn(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&OA(e,n),up!==null&&up(e,n)};var ia=M(null);function Tf(){var e=ia.current;return e!==null?e:_e.pooledCache}function Ju(e,n){n===null?lt(ia,ia.current):lt(ia,n.pool)}function cp(){var e=Tf();return e===null?null:{parent:Fe._currentValue,pool:e}}var to=Error(r(460)),Af=Error(r(474)),Wu=Error(r(542)),tc={then:function(){}};function hp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function fp(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(pi,pi),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,mp(e),e;default:if(typeof n.status=="string")n.then(pi,pi);else{if(e=_e,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,mp(e),e}throw ra=n,to}}function sa(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ra=a,to):a}}var ra=null;function dp(){if(ra===null)throw Error(r(459));var e=ra;return ra=null,e}function mp(e){if(e===to||e===Wu)throw Error(r(483))}var eo=null,hl=0;function ec(e){var n=hl;return hl+=1,eo===null&&(eo=[]),fp(eo,e,n)}function fl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function nc(e,n){throw n.$$typeof===I?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function gp(e){function n(U,x){if(e){var z=U.deletions;z===null?(U.deletions=[x],U.flags|=16):z.push(x)}}function a(U,x){if(!e)return null;for(;x!==null;)n(U,x),x=x.sibling;return null}function o(U){for(var x=new Map;U!==null;)U.key!==null?x.set(U.key,U):x.set(U.index,U),U=U.sibling;return x}function h(U,x){return U=us(U,x),U.index=0,U.sibling=null,U}function f(U,x,z){return U.index=z,e?(z=U.alternate,z!==null?(z=z.index,z<x?(U.flags|=67108866,x):z):(U.flags|=67108866,x)):(U.flags|=1048576,x)}function g(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function E(U,x,z,Z){return x===null||x.tag!==6?(x=cf(z,U.mode,Z),x.return=U,x):(x=h(x,z),x.return=U,x)}function R(U,x,z,Z){var Tt=z.type;return Tt===ot?Y(U,x,z.props.children,Z,z.key):x!==null&&(x.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===b&&sa(Tt)===x.type)?(x=h(x,z.props),fl(x,z),x.return=U,x):(x=Ku(z.type,z.key,z.props,null,U.mode,Z),fl(x,z),x.return=U,x)}function j(U,x,z,Z){return x===null||x.tag!==4||x.stateNode.containerInfo!==z.containerInfo||x.stateNode.implementation!==z.implementation?(x=hf(z,U.mode,Z),x.return=U,x):(x=h(x,z.children||[]),x.return=U,x)}function Y(U,x,z,Z,Tt){return x===null||x.tag!==7?(x=Wr(z,U.mode,Z,Tt),x.return=U,x):(x=h(x,z),x.return=U,x)}function W(U,x,z){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=cf(""+x,U.mode,z),x.return=U,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case G:return z=Ku(x.type,x.key,x.props,null,U.mode,z),fl(z,x),z.return=U,z;case et:return x=hf(x,U.mode,z),x.return=U,x;case b:return x=sa(x),W(U,x,z)}if(Ue(x)||P(x))return x=Wr(x,U.mode,z,null),x.return=U,x;if(typeof x.then=="function")return W(U,ec(x),z);if(x.$$typeof===It)return W(U,Zu(U,x),z);nc(U,x)}return null}function B(U,x,z,Z){var Tt=x!==null?x.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Tt!==null?null:E(U,x,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case G:return z.key===Tt?R(U,x,z,Z):null;case et:return z.key===Tt?j(U,x,z,Z):null;case b:return z=sa(z),B(U,x,z,Z)}if(Ue(z)||P(z))return Tt!==null?null:Y(U,x,z,Z,null);if(typeof z.then=="function")return B(U,x,ec(z),Z);if(z.$$typeof===It)return B(U,x,Zu(U,z),Z);nc(U,z)}return null}function F(U,x,z,Z,Tt){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return U=U.get(z)||null,E(x,U,""+Z,Tt);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case G:return U=U.get(Z.key===null?z:Z.key)||null,R(x,U,Z,Tt);case et:return U=U.get(Z.key===null?z:Z.key)||null,j(x,U,Z,Tt);case b:return Z=sa(Z),F(U,x,z,Z,Tt)}if(Ue(Z)||P(Z))return U=U.get(z)||null,Y(x,U,Z,Tt,null);if(typeof Z.then=="function")return F(U,x,z,ec(Z),Tt);if(Z.$$typeof===It)return F(U,x,z,Zu(x,Z),Tt);nc(x,Z)}return null}function mt(U,x,z,Z){for(var Tt=null,Wt=null,pt=x,kt=x=0,Ht=null;pt!==null&&kt<z.length;kt++){pt.index>kt?(Ht=pt,pt=null):Ht=pt.sibling;var te=B(U,pt,z[kt],Z);if(te===null){pt===null&&(pt=Ht);break}e&&pt&&te.alternate===null&&n(U,pt),x=f(te,x,kt),Wt===null?Tt=te:Wt.sibling=te,Wt=te,pt=Ht}if(kt===z.length)return a(U,pt),Yt&&cs(U,kt),Tt;if(pt===null){for(;kt<z.length;kt++)pt=W(U,z[kt],Z),pt!==null&&(x=f(pt,x,kt),Wt===null?Tt=pt:Wt.sibling=pt,Wt=pt);return Yt&&cs(U,kt),Tt}for(pt=o(pt);kt<z.length;kt++)Ht=F(pt,U,kt,z[kt],Z),Ht!==null&&(e&&Ht.alternate!==null&&pt.delete(Ht.key===null?kt:Ht.key),x=f(Ht,x,kt),Wt===null?Tt=Ht:Wt.sibling=Ht,Wt=Ht);return e&&pt.forEach(function(dr){return n(U,dr)}),Yt&&cs(U,kt),Tt}function Rt(U,x,z,Z){if(z==null)throw Error(r(151));for(var Tt=null,Wt=null,pt=x,kt=x=0,Ht=null,te=z.next();pt!==null&&!te.done;kt++,te=z.next()){pt.index>kt?(Ht=pt,pt=null):Ht=pt.sibling;var dr=B(U,pt,te.value,Z);if(dr===null){pt===null&&(pt=Ht);break}e&&pt&&dr.alternate===null&&n(U,pt),x=f(dr,x,kt),Wt===null?Tt=dr:Wt.sibling=dr,Wt=dr,pt=Ht}if(te.done)return a(U,pt),Yt&&cs(U,kt),Tt;if(pt===null){for(;!te.done;kt++,te=z.next())te=W(U,te.value,Z),te!==null&&(x=f(te,x,kt),Wt===null?Tt=te:Wt.sibling=te,Wt=te);return Yt&&cs(U,kt),Tt}for(pt=o(pt);!te.done;kt++,te=z.next())te=F(pt,U,kt,te.value,Z),te!==null&&(e&&te.alternate!==null&&pt.delete(te.key===null?kt:te.key),x=f(te,x,kt),Wt===null?Tt=te:Wt.sibling=te,Wt=te);return e&&pt.forEach(function(FS){return n(U,FS)}),Yt&&cs(U,kt),Tt}function ge(U,x,z,Z){if(typeof z=="object"&&z!==null&&z.type===ot&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case G:t:{for(var Tt=z.key;x!==null;){if(x.key===Tt){if(Tt=z.type,Tt===ot){if(x.tag===7){a(U,x.sibling),Z=h(x,z.props.children),Z.return=U,U=Z;break t}}else if(x.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===b&&sa(Tt)===x.type){a(U,x.sibling),Z=h(x,z.props),fl(Z,z),Z.return=U,U=Z;break t}a(U,x);break}else n(U,x);x=x.sibling}z.type===ot?(Z=Wr(z.props.children,U.mode,Z,z.key),Z.return=U,U=Z):(Z=Ku(z.type,z.key,z.props,null,U.mode,Z),fl(Z,z),Z.return=U,U=Z)}return g(U);case et:t:{for(Tt=z.key;x!==null;){if(x.key===Tt)if(x.tag===4&&x.stateNode.containerInfo===z.containerInfo&&x.stateNode.implementation===z.implementation){a(U,x.sibling),Z=h(x,z.children||[]),Z.return=U,U=Z;break t}else{a(U,x);break}else n(U,x);x=x.sibling}Z=hf(z,U.mode,Z),Z.return=U,U=Z}return g(U);case b:return z=sa(z),ge(U,x,z,Z)}if(Ue(z))return mt(U,x,z,Z);if(P(z)){if(Tt=P(z),typeof Tt!="function")throw Error(r(150));return z=Tt.call(z),Rt(U,x,z,Z)}if(typeof z.then=="function")return ge(U,x,ec(z),Z);if(z.$$typeof===It)return ge(U,x,Zu(U,z),Z);nc(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,x!==null&&x.tag===6?(a(U,x.sibling),Z=h(x,z),Z.return=U,U=Z):(a(U,x),Z=cf(z,U.mode,Z),Z.return=U,U=Z),g(U)):a(U,x)}return function(U,x,z,Z){try{hl=0;var Tt=ge(U,x,z,Z);return eo=null,Tt}catch(pt){if(pt===to||pt===Wu)throw pt;var Wt=Hn(29,pt,null,U.mode);return Wt.lanes=Z,Wt.return=U,Wt}finally{}}}var aa=gp(!0),pp=gp(!1),$s=!1;function Sf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Zs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Js(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(ie&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Yu(e),Wg(e,null,a),n}return Qu(e,o,n,a),Yu(e)}function dl(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,zr(e,a)}}function wf(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=g:f=f.next=g,a=a.next}while(a!==null);f===null?h=f=n:f=f.next=n}else h=f=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Rf=!1;function ml(){if(Rf){var e=Wa;if(e!==null)throw e}}function gl(e,n,a,o){Rf=!1;var h=e.updateQueue;$s=!1;var f=h.firstBaseUpdate,g=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var R=E,j=R.next;R.next=null,g===null?f=j:g.next=j,g=R;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,E=Y.lastBaseUpdate,E!==g&&(E===null?Y.firstBaseUpdate=j:E.next=j,Y.lastBaseUpdate=R))}if(f!==null){var W=h.baseState;g=0,Y=j=R=null,E=f;do{var B=E.lane&-536870913,F=B!==E.lane;if(F?(qt&B)===B:(o&B)===B){B!==0&&B===Ja&&(Rf=!0),Y!==null&&(Y=Y.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var mt=e,Rt=E;B=n;var ge=a;switch(Rt.tag){case 1:if(mt=Rt.payload,typeof mt=="function"){W=mt.call(ge,W,B);break t}W=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=Rt.payload,B=typeof mt=="function"?mt.call(ge,W,B):mt,B==null)break t;W=S({},W,B);break t;case 2:$s=!0}}B=E.callback,B!==null&&(e.flags|=64,F&&(e.flags|=8192),F=h.callbacks,F===null?h.callbacks=[B]:F.push(B))}else F={lane:B,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Y===null?(j=Y=F,R=W):Y=Y.next=F,g|=B;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;F=E,E=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);Y===null&&(R=W),h.baseState=R,h.firstBaseUpdate=j,h.lastBaseUpdate=Y,f===null&&(h.shared.lanes=0),ir|=g,e.lanes=g,e.memoizedState=W}}function yp(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function _p(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)yp(a[e],n)}var no=M(null),ic=M(0);function vp(e,n){e=Ts,lt(ic,e),lt(no,n),Ts=e|n.baseLanes}function If(){lt(ic,Ts),lt(no,no.current)}function Cf(){Ts=ic.current,J(no),J(ic)}var Fn=M(null),hi=null;function Ws(e){var n=e.alternate;lt(je,je.current&1),lt(Fn,e),hi===null&&(n===null||no.current!==null||n.memoizedState!==null)&&(hi=e)}function Nf(e){lt(je,je.current),lt(Fn,e),hi===null&&(hi=e)}function Ep(e){e.tag===22?(lt(je,je.current),lt(Fn,e),hi===null&&(hi=e)):tr()}function tr(){lt(je,je.current),lt(Fn,Fn.current)}function Gn(e){J(Fn),hi===e&&(hi=null),J(je)}var je=M(0);function sc(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ud(a)||Ld(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ds=0,Pt=null,de=null,Ge=null,rc=!1,io=!1,oa=!1,ac=0,pl=0,so=null,VA=0;function Oe(){throw Error(r(321))}function Df(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!qn(e[a],n[a]))return!1;return!0}function xf(e,n,a,o,h,f){return ds=f,Pt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Q.H=e===null||e.memoizedState===null?iy:Qf,oa=!1,f=a(o,h),oa=!1,io&&(f=Ap(n,a,o,h)),Tp(e),f}function Tp(e){Q.H=vl;var n=de!==null&&de.next!==null;if(ds=0,Ge=de=Pt=null,rc=!1,pl=0,so=null,n)throw Error(r(300));e===null||Qe||(e=e.dependencies,e!==null&&$u(e)&&(Qe=!0))}function Ap(e,n,a,o){Pt=e;var h=0;do{if(io&&(so=null),pl=0,io=!1,25<=h)throw Error(r(301));if(h+=1,Ge=de=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=sy,f=n(a,o)}while(io);return f}function UA(){var e=Q.H,n=e.useState()[0];return n=typeof n.then=="function"?yl(n):n,e=e.useState()[0],(de!==null?de.memoizedState:null)!==e&&(Pt.flags|=1024),n}function Of(){var e=ac!==0;return ac=0,e}function Mf(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Vf(e){if(rc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}rc=!1}ds=0,Ge=de=Pt=null,io=!1,pl=ac=0,so=null}function Rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Pt.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function Be(){if(de===null){var e=Pt.alternate;e=e!==null?e.memoizedState:null}else e=de.next;var n=Ge===null?Pt.memoizedState:Ge.next;if(n!==null)Ge=n,de=e;else{if(e===null)throw Pt.alternate===null?Error(r(467)):Error(r(310));de=e,e={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},Ge===null?Pt.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yl(e){var n=pl;return pl+=1,so===null&&(so=[]),e=fp(so,e,n),n=Pt,(Ge===null?n.memoizedState:Ge.next)===null&&(n=n.alternate,Q.H=n===null||n.memoizedState===null?iy:Qf),e}function lc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return yl(e);if(e.$$typeof===It)return ln(e)}throw Error(r(438,String(e)))}function Uf(e){var n=null,a=Pt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Pt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=oc(),Pt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=V;return n.index++,a}function ms(e,n){return typeof n=="function"?n(e):n}function uc(e){var n=Be();return Lf(n,de,e)}function Lf(e,n,a){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var g=h.next;h.next=f.next,f.next=g}n.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{n=h.next;var E=g=null,R=null,j=n,Y=!1;do{var W=j.lane&-536870913;if(W!==j.lane?(qt&W)===W:(ds&W)===W){var B=j.revertLane;if(B===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),W===Ja&&(Y=!0);else if((ds&B)===B){j=j.next,B===Ja&&(Y=!0);continue}else W={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(E=R=W,g=f):R=R.next=W,Pt.lanes|=B,ir|=B;W=j.action,oa&&a(f,W),f=j.hasEagerState?j.eagerState:a(f,W)}else B={lane:W,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(E=R=B,g=f):R=R.next=B,Pt.lanes|=W,ir|=W;j=j.next}while(j!==null&&j!==n);if(R===null?g=f:R.next=E,!qn(f,e.memoizedState)&&(Qe=!0,Y&&(a=Wa,a!==null)))throw a;e.memoizedState=f,e.baseState=g,e.baseQueue=R,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Pf(e){var n=Be(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,f=n.memoizedState;if(h!==null){a.pending=null;var g=h=h.next;do f=e(f,g.action),g=g.next;while(g!==h);qn(f,n.memoizedState)||(Qe=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,o]}function Sp(e,n,a){var o=Pt,h=Be(),f=Yt;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=n();var g=!qn((de||h).memoizedState,a);if(g&&(h.memoizedState=a,Qe=!0),h=h.queue,jf(Rp.bind(null,o,h,e),[e]),h.getSnapshot!==n||g||Ge!==null&&Ge.memoizedState.tag&1){if(o.flags|=2048,ro(9,{destroy:void 0},wp.bind(null,o,h,a,n),null),_e===null)throw Error(r(349));f||(ds&127)!==0||bp(o,n,a)}return a}function bp(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Pt.updateQueue,n===null?(n=oc(),Pt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function wp(e,n,a,o){n.value=a,n.getSnapshot=o,Ip(n)&&Cp(e)}function Rp(e,n,a){return a(function(){Ip(n)&&Cp(e)})}function Ip(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!qn(e,a)}catch{return!0}}function Cp(e){var n=Jr(e,2);n!==null&&Pn(n,e,2)}function kf(e){var n=Rn();if(typeof e=="function"){var a=e;if(e=a(),oa){yn(!0);try{a()}finally{yn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:e},n}function Np(e,n,a,o){return e.baseState=a,Lf(e,de,typeof o=="function"?o:ms)}function LA(e,n,a,o,h){if(fc(e))throw Error(r(485));if(e=n.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){f.listeners.push(g)}};Q.T!==null?a(!0):f.isTransition=!1,o(f),a=n.pending,a===null?(f.next=n.pending=f,Dp(n,f)):(f.next=a.next,n.pending=a.next=f)}}function Dp(e,n){var a=n.action,o=n.payload,h=e.state;if(n.isTransition){var f=Q.T,g={};Q.T=g;try{var E=a(h,o),R=Q.S;R!==null&&R(g,E),xp(e,n,E)}catch(j){zf(e,n,j)}finally{f!==null&&g.types!==null&&(f.types=g.types),Q.T=f}}else try{f=a(h,o),xp(e,n,f)}catch(j){zf(e,n,j)}}function xp(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Op(e,n,o)},function(o){return zf(e,n,o)}):Op(e,n,a)}function Op(e,n,a){n.status="fulfilled",n.value=a,Mp(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Dp(e,a)))}function zf(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Mp(n),n=n.next;while(n!==o)}e.action=null}function Mp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Vp(e,n){return n}function Up(e,n){if(Yt){var a=_e.formState;if(a!==null){t:{var o=Pt;if(Yt){if(Ee){e:{for(var h=Ee,f=ci;h.nodeType!==8;){if(!f){h=null;break e}if(h=fi(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){Ee=fi(h.nextSibling),o=h.data==="F!";break t}}Ks(o)}o=!1}o&&(n=a[0])}}return a=Rn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vp,lastRenderedState:n},a.queue=o,a=ty.bind(null,Pt,o),o.dispatch=a,o=kf(!1),f=Gf.bind(null,Pt,!1,o.queue),o=Rn(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,a=LA.bind(null,Pt,h,f,a),h.dispatch=a,o.memoizedState=e,[n,a,!1]}function Lp(e){var n=Be();return Pp(n,de,e)}function Pp(e,n,a){if(n=Lf(e,n,Vp)[0],e=uc(ms)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=yl(n)}catch(g){throw g===to?Wu:g}else o=n;n=Be();var h=n.queue,f=h.dispatch;return a!==n.memoizedState&&(Pt.flags|=2048,ro(9,{destroy:void 0},PA.bind(null,h,a),null)),[o,f,e]}function PA(e,n){e.action=n}function kp(e){var n=Be(),a=de;if(a!==null)return Pp(n,a,e);Be(),n=n.memoizedState,a=Be();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function ro(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=Pt.updateQueue,n===null&&(n=oc(),Pt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function zp(){return Be().memoizedState}function cc(e,n,a,o){var h=Rn();Pt.flags|=e,h.memoizedState=ro(1|n,{destroy:void 0},a,o===void 0?null:o)}function hc(e,n,a,o){var h=Be();o=o===void 0?null:o;var f=h.memoizedState.inst;de!==null&&o!==null&&Df(o,de.memoizedState.deps)?h.memoizedState=ro(n,f,a,o):(Pt.flags|=e,h.memoizedState=ro(1|n,f,a,o))}function jp(e,n){cc(8390656,8,e,n)}function jf(e,n){hc(2048,8,e,n)}function kA(e){Pt.flags|=4;var n=Pt.updateQueue;if(n===null)n=oc(),Pt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Bp(e){var n=Be().memoizedState;return kA({ref:n,nextImpl:e}),function(){if((ie&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function qp(e,n){return hc(4,2,e,n)}function Hp(e,n){return hc(4,4,e,n)}function Fp(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Gp(e,n,a){a=a!=null?a.concat([e]):null,hc(4,4,Fp.bind(null,n,e),a)}function Bf(){}function Qp(e,n){var a=Be();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&Df(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Yp(e,n){var a=Be();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&Df(n,o[1]))return o[0];if(o=e(),oa){yn(!0);try{e()}finally{yn(!1)}}return a.memoizedState=[o,n],o}function qf(e,n,a){return a===void 0||(ds&1073741824)!==0&&(qt&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Ky(),Pt.lanes|=e,ir|=e,a)}function Kp(e,n,a,o){return qn(a,n)?a:no.current!==null?(e=qf(e,a,o),qn(e,n)||(Qe=!0),e):(ds&42)===0||(ds&1073741824)!==0&&(qt&261930)===0?(Qe=!0,e.memoizedState=a):(e=Ky(),Pt.lanes|=e,ir|=e,n)}function Xp(e,n,a,o,h){var f=at.p;at.p=f!==0&&8>f?f:8;var g=Q.T,E={};Q.T=E,Gf(e,!1,n,a);try{var R=h(),j=Q.S;if(j!==null&&j(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var Y=MA(R,o);_l(e,n,Y,Kn(e))}else _l(e,n,o,Kn(e))}catch(W){_l(e,n,{then:function(){},status:"rejected",reason:W},Kn())}finally{at.p=f,g!==null&&E.types!==null&&(g.types=E.types),Q.T=g}}function zA(){}function Hf(e,n,a,o){if(e.tag!==5)throw Error(r(476));var h=$p(e).queue;Xp(e,h,n,Et,a===null?zA:function(){return Zp(e),a(o)})}function $p(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Et,baseState:Et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:Et},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Zp(e){var n=$p(e);n.next===null&&(n=e.alternate.memoizedState),_l(e,n.next.queue,{},Kn())}function Ff(){return ln(Ul)}function Jp(){return Be().memoizedState}function Wp(){return Be().memoizedState}function jA(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Kn();e=Zs(a);var o=Js(n,e,a);o!==null&&(Pn(o,n,a),dl(o,n,a)),n={cache:vf()},e.payload=n;return}n=n.return}}function BA(e,n,a){var o=Kn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},fc(e)?ey(n,a):(a=lf(e,n,a,o),a!==null&&(Pn(a,e,o),ny(a,n,o)))}function ty(e,n,a){var o=Kn();_l(e,n,a,o)}function _l(e,n,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(fc(e))ey(n,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var g=n.lastRenderedState,E=f(g,a);if(h.hasEagerState=!0,h.eagerState=E,qn(E,g))return Qu(e,n,h,0),_e===null&&Gu(),!1}catch{}finally{}if(a=lf(e,n,h,o),a!==null)return Pn(a,e,o),ny(a,n,o),!0}return!1}function Gf(e,n,a,o){if(o={lane:2,revertLane:Sd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},fc(e)){if(n)throw Error(r(479))}else n=lf(e,a,o,2),n!==null&&Pn(n,e,2)}function fc(e){var n=e.alternate;return e===Pt||n!==null&&n===Pt}function ey(e,n){io=rc=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function ny(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,zr(e,a)}}var vl={readContext:ln,use:lc,useCallback:Oe,useContext:Oe,useEffect:Oe,useImperativeHandle:Oe,useLayoutEffect:Oe,useInsertionEffect:Oe,useMemo:Oe,useReducer:Oe,useRef:Oe,useState:Oe,useDebugValue:Oe,useDeferredValue:Oe,useTransition:Oe,useSyncExternalStore:Oe,useId:Oe,useHostTransitionStatus:Oe,useFormState:Oe,useActionState:Oe,useOptimistic:Oe,useMemoCache:Oe,useCacheRefresh:Oe};vl.useEffectEvent=Oe;var iy={readContext:ln,use:lc,useCallback:function(e,n){return Rn().memoizedState=[e,n===void 0?null:n],e},useContext:ln,useEffect:jp,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,cc(4194308,4,Fp.bind(null,n,e),a)},useLayoutEffect:function(e,n){return cc(4194308,4,e,n)},useInsertionEffect:function(e,n){cc(4,2,e,n)},useMemo:function(e,n){var a=Rn();n=n===void 0?null:n;var o=e();if(oa){yn(!0);try{e()}finally{yn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=Rn();if(a!==void 0){var h=a(n);if(oa){yn(!0);try{a(n)}finally{yn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=BA.bind(null,Pt,e),[o.memoizedState,e]},useRef:function(e){var n=Rn();return e={current:e},n.memoizedState=e},useState:function(e){e=kf(e);var n=e.queue,a=ty.bind(null,Pt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Bf,useDeferredValue:function(e,n){var a=Rn();return qf(a,e,n)},useTransition:function(){var e=kf(!1);return e=Xp.bind(null,Pt,e.queue,!0,!1),Rn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=Pt,h=Rn();if(Yt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),_e===null)throw Error(r(349));(qt&127)!==0||bp(o,n,a)}h.memoizedState=a;var f={value:a,getSnapshot:n};return h.queue=f,jp(Rp.bind(null,o,f,e),[e]),o.flags|=2048,ro(9,{destroy:void 0},wp.bind(null,o,f,a,n),null),a},useId:function(){var e=Rn(),n=_e.identifierPrefix;if(Yt){var a=ki,o=Pi;a=(o&~(1<<32-we(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=ac++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=VA++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Ff,useFormState:Up,useActionState:Up,useOptimistic:function(e){var n=Rn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Gf.bind(null,Pt,!0,a),a.dispatch=n,[e,n]},useMemoCache:Uf,useCacheRefresh:function(){return Rn().memoizedState=jA.bind(null,Pt)},useEffectEvent:function(e){var n=Rn(),a={impl:e};return n.memoizedState=a,function(){if((ie&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Qf={readContext:ln,use:lc,useCallback:Qp,useContext:ln,useEffect:jf,useImperativeHandle:Gp,useInsertionEffect:qp,useLayoutEffect:Hp,useMemo:Yp,useReducer:uc,useRef:zp,useState:function(){return uc(ms)},useDebugValue:Bf,useDeferredValue:function(e,n){var a=Be();return Kp(a,de.memoizedState,e,n)},useTransition:function(){var e=uc(ms)[0],n=Be().memoizedState;return[typeof e=="boolean"?e:yl(e),n]},useSyncExternalStore:Sp,useId:Jp,useHostTransitionStatus:Ff,useFormState:Lp,useActionState:Lp,useOptimistic:function(e,n){var a=Be();return Np(a,de,e,n)},useMemoCache:Uf,useCacheRefresh:Wp};Qf.useEffectEvent=Bp;var sy={readContext:ln,use:lc,useCallback:Qp,useContext:ln,useEffect:jf,useImperativeHandle:Gp,useInsertionEffect:qp,useLayoutEffect:Hp,useMemo:Yp,useReducer:Pf,useRef:zp,useState:function(){return Pf(ms)},useDebugValue:Bf,useDeferredValue:function(e,n){var a=Be();return de===null?qf(a,e,n):Kp(a,de.memoizedState,e,n)},useTransition:function(){var e=Pf(ms)[0],n=Be().memoizedState;return[typeof e=="boolean"?e:yl(e),n]},useSyncExternalStore:Sp,useId:Jp,useHostTransitionStatus:Ff,useFormState:kp,useActionState:kp,useOptimistic:function(e,n){var a=Be();return de!==null?Np(a,de,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Uf,useCacheRefresh:Wp};sy.useEffectEvent=Bp;function Yf(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:S({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Kf={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=Kn(),h=Zs(o);h.payload=n,a!=null&&(h.callback=a),n=Js(e,h,o),n!==null&&(Pn(n,e,o),dl(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=Kn(),h=Zs(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Js(e,h,o),n!==null&&(Pn(n,e,o),dl(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Kn(),o=Zs(a);o.tag=2,n!=null&&(o.callback=n),n=Js(e,o,a),n!==null&&(Pn(n,e,a),dl(n,e,a))}};function ry(e,n,a,o,h,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,g):n.prototype&&n.prototype.isPureReactComponent?!rl(a,o)||!rl(h,f):!0}function ay(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&Kf.enqueueReplaceState(n,n.state,null)}function la(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=S({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function oy(e){Fu(e)}function ly(e){console.error(e)}function uy(e){Fu(e)}function dc(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function cy(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Xf(e,n,a){return a=Zs(a),a.tag=3,a.payload={element:null},a.callback=function(){dc(e,n)},a}function hy(e){return e=Zs(e),e.tag=3,e}function fy(e,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){cy(n,a,o)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){cy(n,a,o),typeof h!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function qA(e,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Za(n,a,h,!0),a=Fn.current,a!==null){switch(a.tag){case 31:case 13:return hi===null?wc():a.alternate===null&&Me===0&&(Me=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===tc?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Ed(e,o,h)),!1;case 22:return a.flags|=65536,o===tc?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Ed(e,o,h)),!1}throw Error(r(435,a.tag))}return Ed(e,o,h),wc(),!1}if(Yt)return n=Fn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==mf&&(e=Error(r(422),{cause:o}),ll(oi(e,a)))):(o!==mf&&(n=Error(r(423),{cause:o}),ll(oi(n,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=oi(o,a),h=Xf(e.stateNode,o,h),wf(e,h),Me!==4&&(Me=2)),!1;var f=Error(r(520),{cause:o});if(f=oi(f,a),Il===null?Il=[f]:Il.push(f),Me!==4&&(Me=2),n===null)return!0;o=oi(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Xf(a.stateNode,o,e),wf(a,e),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(sr===null||!sr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=hy(h),fy(h,e,a,o),wf(a,h),!1}a=a.return}while(a!==null);return!1}var $f=Error(r(461)),Qe=!1;function un(e,n,a,o){n.child=e===null?pp(n,null,a,o):aa(n,e.child,a,o)}function dy(e,n,a,o,h){a=a.render;var f=n.ref;if("ref"in o){var g={};for(var E in o)E!=="ref"&&(g[E]=o[E])}else g=o;return na(n),o=xf(e,n,a,g,f,h),E=Of(),e!==null&&!Qe?(Mf(e,n,h),gs(e,n,h)):(Yt&&E&&ff(n),n.flags|=1,un(e,n,o,h),n.child)}function my(e,n,a,o,h){if(e===null){var f=a.type;return typeof f=="function"&&!uf(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,gy(e,n,f,o,h)):(e=Ku(a.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!sd(e,h)){var g=f.memoizedProps;if(a=a.compare,a=a!==null?a:rl,a(g,o)&&e.ref===n.ref)return gs(e,n,h)}return n.flags|=1,e=us(f,o),e.ref=n.ref,e.return=n,n.child=e}function gy(e,n,a,o,h){if(e!==null){var f=e.memoizedProps;if(rl(f,o)&&e.ref===n.ref)if(Qe=!1,n.pendingProps=o=f,sd(e,h))(e.flags&131072)!==0&&(Qe=!0);else return n.lanes=e.lanes,gs(e,n,h)}return Zf(e,n,a,o,h)}function py(e,n,a,o){var h=o.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,e!==null){for(o=n.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~f}else o=0,n.child=null;return yy(e,n,f,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ju(n,f!==null?f.cachePool:null),f!==null?vp(n,f):If(),Ep(n);else return o=n.lanes=536870912,yy(e,n,f!==null?f.baseLanes|a:a,a,o)}else f!==null?(Ju(n,f.cachePool),vp(n,f),tr(),n.memoizedState=null):(e!==null&&Ju(n,null),If(),tr());return un(e,n,h,a),n.child}function El(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function yy(e,n,a,o,h){var f=Tf();return f=f===null?null:{parent:Fe._currentValue,pool:f},n.memoizedState={baseLanes:a,cachePool:f},e!==null&&Ju(n,null),If(),Ep(n),e!==null&&Za(e,n,o,!0),n.childLanes=h,null}function mc(e,n){return n=pc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function _y(e,n,a){return aa(n,e.child,null,a),e=mc(n,n.pendingProps),e.flags|=2,Gn(n),n.memoizedState=null,e}function HA(e,n,a){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Yt){if(o.mode==="hidden")return e=mc(n,o),n.lanes=536870912,El(null,e);if(Nf(n),(e=Ee)?(e=D_(e,ci),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Qs!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},a=ep(e),a.return=n,n.child=a,on=n,Ee=null)):e=null,e===null)throw Ks(n);return n.lanes=536870912,null}return mc(n,o)}var f=e.memoizedState;if(f!==null){var g=f.dehydrated;if(Nf(n),h)if(n.flags&256)n.flags&=-257,n=_y(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(Qe||Za(e,n,a,!1),h=(a&e.childLanes)!==0,Qe||h){if(o=_e,o!==null&&(g=jr(o,a),g!==0&&g!==f.retryLane))throw f.retryLane=g,Jr(e,g),Pn(o,e,g),$f;wc(),n=_y(e,n,a)}else e=f.treeContext,Ee=fi(g.nextSibling),on=n,Yt=!0,Ys=null,ci=!1,e!==null&&sp(n,e),n=mc(n,o),n.flags|=4096;return n}return e=us(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function gc(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Zf(e,n,a,o,h){return na(n),a=xf(e,n,a,o,void 0,h),o=Of(),e!==null&&!Qe?(Mf(e,n,h),gs(e,n,h)):(Yt&&o&&ff(n),n.flags|=1,un(e,n,a,h),n.child)}function vy(e,n,a,o,h,f){return na(n),n.updateQueue=null,a=Ap(n,o,a,h),Tp(e),o=Of(),e!==null&&!Qe?(Mf(e,n,f),gs(e,n,f)):(Yt&&o&&ff(n),n.flags|=1,un(e,n,a,f),n.child)}function Ey(e,n,a,o,h){if(na(n),n.stateNode===null){var f=Ya,g=a.contextType;typeof g=="object"&&g!==null&&(f=ln(g)),f=new a(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Kf,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},Sf(n),g=a.contextType,f.context=typeof g=="object"&&g!==null?ln(g):Ya,f.state=n.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(Yf(n,a,g,o),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(g=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),g!==f.state&&Kf.enqueueReplaceState(f,f.state,null),gl(n,o,f,h),ml(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var E=n.memoizedProps,R=la(a,E);f.props=R;var j=f.context,Y=a.contextType;g=Ya,typeof Y=="object"&&Y!==null&&(g=ln(Y));var W=a.getDerivedStateFromProps;Y=typeof W=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,Y||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||j!==g)&&ay(n,f,o,g),$s=!1;var B=n.memoizedState;f.state=B,gl(n,o,f,h),ml(),j=n.memoizedState,E||B!==j||$s?(typeof W=="function"&&(Yf(n,a,W,o),j=n.memoizedState),(R=$s||ry(n,a,R,o,B,j,g))?(Y||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=j),f.props=o,f.state=j,f.context=g,o=R):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,bf(e,n),g=n.memoizedProps,Y=la(a,g),f.props=Y,W=n.pendingProps,B=f.context,j=a.contextType,R=Ya,typeof j=="object"&&j!==null&&(R=ln(j)),E=a.getDerivedStateFromProps,(j=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==W||B!==R)&&ay(n,f,o,R),$s=!1,B=n.memoizedState,f.state=B,gl(n,o,f,h),ml();var F=n.memoizedState;g!==W||B!==F||$s||e!==null&&e.dependencies!==null&&$u(e.dependencies)?(typeof E=="function"&&(Yf(n,a,E,o),F=n.memoizedState),(Y=$s||ry(n,a,Y,o,B,F,R)||e!==null&&e.dependencies!==null&&$u(e.dependencies))?(j||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,F,R),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,F,R)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&B===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&B===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=F),f.props=o,f.state=F,f.context=R,o=Y):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&B===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&B===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,gc(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=aa(n,e.child,null,h),n.child=aa(n,null,a,h)):un(e,n,a,h),n.memoizedState=f.state,e=n.child):e=gs(e,n,h),e}function Ty(e,n,a,o){return ta(),n.flags|=256,un(e,n,a,o),n.child}var Jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wf(e){return{baseLanes:e,cachePool:cp()}}function td(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Yn),e}function Ay(e,n,a){var o=n.pendingProps,h=!1,f=(n.flags&128)!==0,g;if((g=f)||(g=e!==null&&e.memoizedState===null?!1:(je.current&2)!==0),g&&(h=!0,n.flags&=-129),g=(n.flags&32)!==0,n.flags&=-33,e===null){if(Yt){if(h?Ws(n):tr(),(e=Ee)?(e=D_(e,ci),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Qs!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},a=ep(e),a.return=n,n.child=a,on=n,Ee=null)):e=null,e===null)throw Ks(n);return Ld(e)?n.lanes=32:n.lanes=536870912,null}var E=o.children;return o=o.fallback,h?(tr(),h=n.mode,E=pc({mode:"hidden",children:E},h),o=Wr(o,h,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,o=n.child,o.memoizedState=Wf(a),o.childLanes=td(e,g,a),n.memoizedState=Jf,El(null,o)):(Ws(n),ed(n,E))}var R=e.memoizedState;if(R!==null&&(E=R.dehydrated,E!==null)){if(f)n.flags&256?(Ws(n),n.flags&=-257,n=nd(e,n,a)):n.memoizedState!==null?(tr(),n.child=e.child,n.flags|=128,n=null):(tr(),E=o.fallback,h=n.mode,o=pc({mode:"visible",children:o.children},h),E=Wr(E,h,a,null),E.flags|=2,o.return=n,E.return=n,o.sibling=E,n.child=o,aa(n,e.child,null,a),o=n.child,o.memoizedState=Wf(a),o.childLanes=td(e,g,a),n.memoizedState=Jf,n=El(null,o));else if(Ws(n),Ld(E)){if(g=E.nextSibling&&E.nextSibling.dataset,g)var j=g.dgst;g=j,o=Error(r(419)),o.stack="",o.digest=g,ll({value:o,source:null,stack:null}),n=nd(e,n,a)}else if(Qe||Za(e,n,a,!1),g=(a&e.childLanes)!==0,Qe||g){if(g=_e,g!==null&&(o=jr(g,a),o!==0&&o!==R.retryLane))throw R.retryLane=o,Jr(e,o),Pn(g,e,o),$f;Ud(E)||wc(),n=nd(e,n,a)}else Ud(E)?(n.flags|=192,n.child=e.child,n=null):(e=R.treeContext,Ee=fi(E.nextSibling),on=n,Yt=!0,Ys=null,ci=!1,e!==null&&sp(n,e),n=ed(n,o.children),n.flags|=4096);return n}return h?(tr(),E=o.fallback,h=n.mode,R=e.child,j=R.sibling,o=us(R,{mode:"hidden",children:o.children}),o.subtreeFlags=R.subtreeFlags&65011712,j!==null?E=us(j,E):(E=Wr(E,h,a,null),E.flags|=2),E.return=n,o.return=n,o.sibling=E,n.child=o,El(null,o),o=n.child,E=e.child.memoizedState,E===null?E=Wf(a):(h=E.cachePool,h!==null?(R=Fe._currentValue,h=h.parent!==R?{parent:R,pool:R}:h):h=cp(),E={baseLanes:E.baseLanes|a,cachePool:h}),o.memoizedState=E,o.childLanes=td(e,g,a),n.memoizedState=Jf,El(e.child,o)):(Ws(n),a=e.child,e=a.sibling,a=us(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(g=n.deletions,g===null?(n.deletions=[e],n.flags|=16):g.push(e)),n.child=a,n.memoizedState=null,a)}function ed(e,n){return n=pc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function pc(e,n){return e=Hn(22,e,null,n),e.lanes=0,e}function nd(e,n,a){return aa(n,e.child,null,a),e=ed(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Sy(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),yf(e.return,n,a)}function id(e,n,a,o,h,f){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:f}:(g.isBackwards=n,g.rendering=null,g.renderingStartTime=0,g.last=o,g.tail=a,g.tailMode=h,g.treeForkCount=f)}function by(e,n,a){var o=n.pendingProps,h=o.revealOrder,f=o.tail;o=o.children;var g=je.current,E=(g&2)!==0;if(E?(g=g&1|2,n.flags|=128):g&=1,lt(je,g),un(e,n,o,a),o=Yt?ol:0,!E&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sy(e,a,n);else if(e.tag===19)Sy(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)e=a.alternate,e!==null&&sc(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),id(n,!1,h,a,f,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&sc(e)===null){n.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}id(n,!0,a,null,f,o);break;case"together":id(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function gs(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),ir|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Za(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=us(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=us(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function sd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&$u(e)))}function FA(e,n,a){switch(n.tag){case 3:De(n,n.stateNode.containerInfo),Xs(n,Fe,e.memoizedState.cache),ta();break;case 27:case 5:Ci(n);break;case 4:De(n,n.stateNode.containerInfo);break;case 10:Xs(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Nf(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ws(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Ay(e,n,a):(Ws(n),e=gs(e,n,a),e!==null?e.sibling:null);Ws(n);break;case 19:var h=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Za(e,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return by(e,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),lt(je,je.current),o)break;return null;case 22:return n.lanes=0,py(e,n,a,n.pendingProps);case 24:Xs(n,Fe,e.memoizedState.cache)}return gs(e,n,a)}function wy(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Qe=!0;else{if(!sd(e,a)&&(n.flags&128)===0)return Qe=!1,FA(e,n,a);Qe=(e.flags&131072)!==0}else Qe=!1,Yt&&(n.flags&1048576)!==0&&ip(n,ol,n.index);switch(n.lanes=0,n.tag){case 16:t:{var o=n.pendingProps;if(e=sa(n.elementType),n.type=e,typeof e=="function")uf(e)?(o=la(e,o),n.tag=1,n=Ey(null,n,e,o,a)):(n.tag=0,n=Zf(null,n,e,o,a));else{if(e!=null){var h=e.$$typeof;if(h===se){n.tag=11,n=dy(null,n,e,o,a);break t}else if(h===N){n.tag=14,n=my(null,n,e,o,a);break t}}throw n=ve(e)||e,Error(r(306,n,""))}}return n;case 0:return Zf(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=la(o,n.pendingProps),Ey(e,n,o,h,a);case 3:t:{if(De(n,n.stateNode.containerInfo),e===null)throw Error(r(387));o=n.pendingProps;var f=n.memoizedState;h=f.element,bf(e,n),gl(n,o,null,a);var g=n.memoizedState;if(o=g.cache,Xs(n,Fe,o),o!==f.cache&&_f(n,[Fe],a,!0),ml(),o=g.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:g.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Ty(e,n,o,a);break t}else if(o!==h){h=oi(Error(r(424)),n),ll(h),n=Ty(e,n,o,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ee=fi(e.firstChild),on=n,Yt=!0,Ys=null,ci=!0,a=pp(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ta(),o===h){n=gs(e,n,a);break t}un(e,n,o,a)}n=n.child}return n;case 26:return gc(e,n),e===null?(a=L_(n.type,null,n.pendingProps,null))?n.memoizedState=a:Yt||(a=n.type,e=n.pendingProps,o=Oc(nt.current).createElement(a),o[Re]=n,o[Pe]=e,cn(o,a,e),ht(o),n.stateNode=o):n.memoizedState=L_(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Ci(n),e===null&&Yt&&(o=n.stateNode=M_(n.type,n.pendingProps,nt.current),on=n,ci=!0,h=Ee,lr(n.type)?(Pd=h,Ee=fi(o.firstChild)):Ee=h),un(e,n,n.pendingProps.children,a),gc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Yt&&((h=o=Ee)&&(o=ES(o,n.type,n.pendingProps,ci),o!==null?(n.stateNode=o,on=n,Ee=fi(o.firstChild),ci=!1,h=!0):h=!1),h||Ks(n)),Ci(n),h=n.type,f=n.pendingProps,g=e!==null?e.memoizedProps:null,o=f.children,Od(h,f)?o=null:g!==null&&Od(h,g)&&(n.flags|=32),n.memoizedState!==null&&(h=xf(e,n,UA,null,null,a),Ul._currentValue=h),gc(e,n),un(e,n,o,a),n.child;case 6:return e===null&&Yt&&((e=a=Ee)&&(a=TS(a,n.pendingProps,ci),a!==null?(n.stateNode=a,on=n,Ee=null,e=!0):e=!1),e||Ks(n)),null;case 13:return Ay(e,n,a);case 4:return De(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=aa(n,null,o,a):un(e,n,o,a),n.child;case 11:return dy(e,n,n.type,n.pendingProps,a);case 7:return un(e,n,n.pendingProps,a),n.child;case 8:return un(e,n,n.pendingProps.children,a),n.child;case 12:return un(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,Xs(n,n.type,o.value),un(e,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,na(n),h=ln(h),o=o(h),n.flags|=1,un(e,n,o,a),n.child;case 14:return my(e,n,n.type,n.pendingProps,a);case 15:return gy(e,n,n.type,n.pendingProps,a);case 19:return by(e,n,a);case 31:return HA(e,n,a);case 22:return py(e,n,a,n.pendingProps);case 24:return na(n),o=ln(Fe),e===null?(h=Tf(),h===null&&(h=_e,f=vf(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),n.memoizedState={parent:o,cache:h},Sf(n),Xs(n,Fe,h)):((e.lanes&a)!==0&&(bf(e,n),gl(n,null,null,a),ml()),h=e.memoizedState,f=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Xs(n,Fe,o)):(o=f.cache,Xs(n,Fe,o),o!==h.cache&&_f(n,[Fe],a,!0))),un(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function ps(e){e.flags|=4}function rd(e,n,a,o,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(Jy())e.flags|=8192;else throw ra=tc,Af}else e.flags&=-16777217}function Ry(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!B_(n))if(Jy())e.flags|=8192;else throw ra=tc,Af}function yc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Sn():536870912,e.lanes|=n,uo|=n)}function Tl(e,n){if(!Yt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Te(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function GA(e,n,a){var o=n.pendingProps;switch(df(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(n),null;case 1:return Te(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),fs(Fe),ye(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&($a(n)?ps(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gf())),Te(n),null;case 26:var h=n.type,f=n.memoizedState;return e===null?(ps(n),f!==null?(Te(n),Ry(n,f)):(Te(n),rd(n,h,null,o,a))):f?f!==e.memoizedState?(ps(n),Te(n),Ry(n,f)):(Te(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&ps(n),Te(n),rd(n,h,e,o,a)),null;case 27:if(Zi(n),a=nt.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&ps(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return Te(n),null}e=st.current,$a(n)?rp(n):(e=M_(h,o,a),n.stateNode=e,ps(n))}return Te(n),null;case 5:if(Zi(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&ps(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return Te(n),null}if(f=st.current,$a(n))rp(n);else{var g=Oc(nt.current);switch(f){case 1:f=g.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=g.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=g.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=g.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=g.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?g.createElement("select",{is:o.is}):g.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?g.createElement(h,{is:o.is}):g.createElement(h)}}f[Re]=n,f[Pe]=o;t:for(g=n.child;g!==null;){if(g.tag===5||g.tag===6)f.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===n)break t;for(;g.sibling===null;){if(g.return===null||g.return===n)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}n.stateNode=f;t:switch(cn(f,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&ps(n)}}return Te(n),rd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&ps(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(r(166));if(e=nt.current,$a(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,h=on,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Re]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||A_(e.nodeValue,a)),e||Ks(n,!0)}else e=Oc(e).createTextNode(o),e[Re]=n,n.stateNode=e}return Te(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=$a(n),a!==null){if(e===null){if(!o)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Re]=n}else ta(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Te(n),e=!1}else a=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Gn(n),n):(Gn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return Te(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=$a(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Re]=n}else ta(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Te(n),h=!1}else h=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Gn(n),n):(Gn(n),null)}return Gn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),yc(n,n.updateQueue),Te(n),null);case 4:return ye(),e===null&&Id(n.stateNode.containerInfo),Te(n),null;case 10:return fs(n.type),Te(n),null;case 19:if(J(je),o=n.memoizedState,o===null)return Te(n),null;if(h=(n.flags&128)!==0,f=o.rendering,f===null)if(h)Tl(o,!1);else{if(Me!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=sc(e),f!==null){for(n.flags|=128,Tl(o,!1),e=f.updateQueue,n.updateQueue=e,yc(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)tp(a,e),a=a.sibling;return lt(je,je.current&1|2),Yt&&cs(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&pn()>Ac&&(n.flags|=128,h=!0,Tl(o,!1),n.lanes=4194304)}else{if(!h)if(e=sc(f),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,yc(n,e),Tl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!Yt)return Te(n),null}else 2*pn()-o.renderingStartTime>Ac&&a!==536870912&&(n.flags|=128,h=!0,Tl(o,!1),n.lanes=4194304);o.isBackwards?(f.sibling=n.child,n.child=f):(e=o.last,e!==null?e.sibling=f:n.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=pn(),e.sibling=null,a=je.current,lt(je,h?a&1|2:a&1),Yt&&cs(n,o.treeForkCount),e):(Te(n),null);case 22:case 23:return Gn(n),Cf(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(Te(n),n.subtreeFlags&6&&(n.flags|=8192)):Te(n),a=n.updateQueue,a!==null&&yc(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&J(ia),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),fs(Fe),Te(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function QA(e,n){switch(df(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return fs(Fe),ye(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Zi(n),null;case 31:if(n.memoizedState!==null){if(Gn(n),n.alternate===null)throw Error(r(340));ta()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Gn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));ta()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return J(je),null;case 4:return ye(),null;case 10:return fs(n.type),null;case 22:case 23:return Gn(n),Cf(),e!==null&&J(ia),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return fs(Fe),null;case 25:return null;default:return null}}function Iy(e,n){switch(df(n),n.tag){case 3:fs(Fe),ye();break;case 26:case 27:case 5:Zi(n);break;case 4:ye();break;case 31:n.memoizedState!==null&&Gn(n);break;case 13:Gn(n);break;case 19:J(je);break;case 10:fs(n.type);break;case 22:case 23:Gn(n),Cf(),e!==null&&J(ia);break;case 24:fs(Fe)}}function Al(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var f=a.create,g=a.inst;o=f(),g.destroy=o}a=a.next}while(a!==h)}}catch(E){ce(n,n.return,E)}}function er(e,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var g=o.inst,E=g.destroy;if(E!==void 0){g.destroy=void 0,h=n;var R=a,j=E;try{j()}catch(Y){ce(h,R,Y)}}}o=o.next}while(o!==f)}}catch(Y){ce(n,n.return,Y)}}function Cy(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{_p(n,a)}catch(o){ce(e,e.return,o)}}}function Ny(e,n,a){a.props=la(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){ce(e,n,o)}}function Sl(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){ce(e,n,h)}}function zi(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){ce(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ce(e,n,h)}else a.current=null}function Dy(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){ce(e,e.return,h)}}function ad(e,n,a){try{var o=e.stateNode;mS(o,e.type,a,n),o[Pe]=n}catch(h){ce(e,e.return,h)}}function xy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&lr(e.type)||e.tag===4}function od(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||xy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&lr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ld(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=pi));else if(o!==4&&(o===27&&lr(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(ld(e,n,a),e=e.sibling;e!==null;)ld(e,n,a),e=e.sibling}function _c(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&lr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(_c(e,n,a),e=e.sibling;e!==null;)_c(e,n,a),e=e.sibling}function Oy(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);cn(n,o,a),n[Re]=e,n[Pe]=a}catch(f){ce(e,e.return,f)}}var ys=!1,Ye=!1,ud=!1,My=typeof WeakSet=="function"?WeakSet:Set,nn=null;function YA(e,n){if(e=e.containerInfo,Dd=zc,e=Gg(e),ef(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var g=0,E=-1,R=-1,j=0,Y=0,W=e,B=null;e:for(;;){for(var F;W!==a||h!==0&&W.nodeType!==3||(E=g+h),W!==f||o!==0&&W.nodeType!==3||(R=g+o),W.nodeType===3&&(g+=W.nodeValue.length),(F=W.firstChild)!==null;)B=W,W=F;for(;;){if(W===e)break e;if(B===a&&++j===h&&(E=g),B===f&&++Y===o&&(R=g),(F=W.nextSibling)!==null)break;W=B,B=W.parentNode}W=F}a=E===-1||R===-1?null:{start:E,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(xd={focusedElem:e,selectionRange:a},zc=!1,nn=n;nn!==null;)if(n=nn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,nn=e;else for(;nn!==null;){switch(n=nn,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=n,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var mt=la(a.type,h);e=o.getSnapshotBeforeUpdate(mt,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(Rt){ce(a,a.return,Rt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Vd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,nn=e;break}nn=n.return}}function Vy(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:vs(e,a),o&4&&Al(5,a);break;case 1:if(vs(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(g){ce(a,a.return,g)}else{var h=la(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(g){ce(a,a.return,g)}}o&64&&Cy(a),o&512&&Sl(a,a.return);break;case 3:if(vs(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{_p(e,n)}catch(g){ce(a,a.return,g)}}break;case 27:n===null&&o&4&&Oy(a);case 26:case 5:vs(e,a),n===null&&o&4&&Dy(a),o&512&&Sl(a,a.return);break;case 12:vs(e,a);break;case 31:vs(e,a),o&4&&Py(e,a);break;case 13:vs(e,a),o&4&&ky(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=nS.bind(null,a),AS(e,a))));break;case 22:if(o=a.memoizedState!==null||ys,!o){n=n!==null&&n.memoizedState!==null||Ye,h=ys;var f=Ye;ys=o,(Ye=n)&&!f?Es(e,a,(a.subtreeFlags&8772)!==0):vs(e,a),ys=h,Ye=f}break;case 30:break;default:vs(e,a)}}function Uy(e){var n=e.alternate;n!==null&&(e.alternate=null,Uy(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&q(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var be=null,Mn=!1;function _s(e,n,a){for(a=a.child;a!==null;)Ly(e,n,a),a=a.sibling}function Ly(e,n,a){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount($t,a)}catch{}switch(a.tag){case 26:Ye||zi(a,n),_s(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ye||zi(a,n);var o=be,h=Mn;lr(a.type)&&(be=a.stateNode,Mn=!1),_s(e,n,a),Ol(a.stateNode),be=o,Mn=h;break;case 5:Ye||zi(a,n);case 6:if(o=be,h=Mn,be=null,_s(e,n,a),be=o,Mn=h,be!==null)if(Mn)try{(be.nodeType===9?be.body:be.nodeName==="HTML"?be.ownerDocument.body:be).removeChild(a.stateNode)}catch(f){ce(a,n,f)}else try{be.removeChild(a.stateNode)}catch(f){ce(a,n,f)}break;case 18:be!==null&&(Mn?(e=be,C_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),_o(e)):C_(be,a.stateNode));break;case 4:o=be,h=Mn,be=a.stateNode.containerInfo,Mn=!0,_s(e,n,a),be=o,Mn=h;break;case 0:case 11:case 14:case 15:er(2,a,n),Ye||er(4,a,n),_s(e,n,a);break;case 1:Ye||(zi(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Ny(a,n,o)),_s(e,n,a);break;case 21:_s(e,n,a);break;case 22:Ye=(o=Ye)||a.memoizedState!==null,_s(e,n,a),Ye=o;break;default:_s(e,n,a)}}function Py(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{_o(e)}catch(a){ce(n,n.return,a)}}}function ky(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{_o(e)}catch(a){ce(n,n.return,a)}}function KA(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new My),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new My),n;default:throw Error(r(435,e.tag))}}function vc(e,n){var a=KA(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var h=iS.bind(null,e,o);o.then(h,h)}})}function Vn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=e,g=n,E=g;t:for(;E!==null;){switch(E.tag){case 27:if(lr(E.type)){be=E.stateNode,Mn=!1;break t}break;case 5:be=E.stateNode,Mn=!1;break t;case 3:case 4:be=E.stateNode.containerInfo,Mn=!0;break t}E=E.return}if(be===null)throw Error(r(160));Ly(f,g,h),be=null,Mn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)zy(n,e),n=n.sibling}var Ai=null;function zy(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vn(n,e),Un(e),o&4&&(er(3,e,e.return),Al(3,e),er(5,e,e.return));break;case 1:Vn(n,e),Un(e),o&512&&(Ye||a===null||zi(a,a.return)),o&64&&ys&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Ai;if(Vn(n,e),Un(e),o&512&&(Ye||a===null||zi(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[L]||f[Re]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),cn(f,o,a),f[Re]=e,ht(f),o=f;break t;case"link":var g=z_("link","href",h).get(o+(a.href||""));if(g){for(var E=0;E<g.length;E++)if(f=g[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(E,1);break e}}f=h.createElement(o),cn(f,o,a),h.head.appendChild(f);break;case"meta":if(g=z_("meta","content",h).get(o+(a.content||""))){for(E=0;E<g.length;E++)if(f=g[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(E,1);break e}}f=h.createElement(o),cn(f,o,a),h.head.appendChild(f);break;default:throw Error(r(468,o))}f[Re]=e,ht(f),o=f}e.stateNode=o}else j_(h,e.type,e.stateNode);else e.stateNode=k_(h,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?j_(h,e.type,e.stateNode):k_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&ad(e,e.memoizedProps,a.memoizedProps)}break;case 27:Vn(n,e),Un(e),o&512&&(Ye||a===null||zi(a,a.return)),a!==null&&o&4&&ad(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Vn(n,e),Un(e),o&512&&(Ye||a===null||zi(a,a.return)),e.flags&32){h=e.stateNode;try{On(h,"")}catch(mt){ce(e,e.return,mt)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,ad(e,h,a!==null?a.memoizedProps:h)),o&1024&&(ud=!0);break;case 6:if(Vn(n,e),Un(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(mt){ce(e,e.return,mt)}}break;case 3:if(Uc=null,h=Ai,Ai=Mc(n.containerInfo),Vn(n,e),Ai=h,Un(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{_o(n.containerInfo)}catch(mt){ce(e,e.return,mt)}ud&&(ud=!1,jy(e));break;case 4:o=Ai,Ai=Mc(e.stateNode.containerInfo),Vn(n,e),Un(e),Ai=o;break;case 12:Vn(n,e),Un(e);break;case 31:Vn(n,e),Un(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,vc(e,o)));break;case 13:Vn(n,e),Un(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Tc=pn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,vc(e,o)));break;case 22:h=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,j=ys,Y=Ye;if(ys=j||h,Ye=Y||R,Vn(n,e),Ye=Y,ys=j,Un(e),o&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||R||ys||Ye||ua(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){R=a=n;try{if(f=R.stateNode,h)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{E=R.stateNode;var W=R.memoizedProps.style,B=W!=null&&W.hasOwnProperty("display")?W.display:null;E.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(mt){ce(R,R.return,mt)}}}else if(n.tag===6){if(a===null){R=n;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(mt){ce(R,R.return,mt)}}}else if(n.tag===18){if(a===null){R=n;try{var F=R.stateNode;h?N_(F,!0):N_(R.stateNode,!1)}catch(mt){ce(R,R.return,mt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,vc(e,a))));break;case 19:Vn(n,e),Un(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,vc(e,o)));break;case 30:break;case 21:break;default:Vn(n,e),Un(e)}}function Un(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(xy(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,f=od(e);_c(e,f,h);break;case 5:var g=a.stateNode;a.flags&32&&(On(g,""),a.flags&=-33);var E=od(e);_c(e,E,g);break;case 3:case 4:var R=a.stateNode.containerInfo,j=od(e);ld(e,j,R);break;default:throw Error(r(161))}}catch(Y){ce(e,e.return,Y)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function jy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;jy(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function vs(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Vy(e,n.alternate,n),n=n.sibling}function ua(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:er(4,n,n.return),ua(n);break;case 1:zi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Ny(n,n.return,a),ua(n);break;case 27:Ol(n.stateNode);case 26:case 5:zi(n,n.return),ua(n);break;case 22:n.memoizedState===null&&ua(n);break;case 30:ua(n);break;default:ua(n)}e=e.sibling}}function Es(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,f=n,g=f.flags;switch(f.tag){case 0:case 11:case 15:Es(h,f,a),Al(4,f);break;case 1:if(Es(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){ce(o,o.return,j)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)yp(R[h],E)}catch(j){ce(o,o.return,j)}}a&&g&64&&Cy(f),Sl(f,f.return);break;case 27:Oy(f);case 26:case 5:Es(h,f,a),a&&o===null&&g&4&&Dy(f),Sl(f,f.return);break;case 12:Es(h,f,a);break;case 31:Es(h,f,a),a&&g&4&&Py(h,f);break;case 13:Es(h,f,a),a&&g&4&&ky(h,f);break;case 22:f.memoizedState===null&&Es(h,f,a),Sl(f,f.return);break;case 30:break;default:Es(h,f,a)}n=n.sibling}}function cd(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ul(a))}function hd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ul(e))}function Si(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)By(e,n,a,o),n=n.sibling}function By(e,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Si(e,n,a,o),h&2048&&Al(9,n);break;case 1:Si(e,n,a,o);break;case 3:Si(e,n,a,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ul(e)));break;case 12:if(h&2048){Si(e,n,a,o),e=n.stateNode;try{var f=n.memoizedProps,g=f.id,E=f.onPostCommit;typeof E=="function"&&E(g,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){ce(n,n.return,R)}}else Si(e,n,a,o);break;case 31:Si(e,n,a,o);break;case 13:Si(e,n,a,o);break;case 23:break;case 22:f=n.stateNode,g=n.alternate,n.memoizedState!==null?f._visibility&2?Si(e,n,a,o):bl(e,n):f._visibility&2?Si(e,n,a,o):(f._visibility|=2,ao(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&cd(g,n);break;case 24:Si(e,n,a,o),h&2048&&hd(n.alternate,n);break;default:Si(e,n,a,o)}}function ao(e,n,a,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,g=n,E=a,R=o,j=g.flags;switch(g.tag){case 0:case 11:case 15:ao(f,g,E,R,h),Al(8,g);break;case 23:break;case 22:var Y=g.stateNode;g.memoizedState!==null?Y._visibility&2?ao(f,g,E,R,h):bl(f,g):(Y._visibility|=2,ao(f,g,E,R,h)),h&&j&2048&&cd(g.alternate,g);break;case 24:ao(f,g,E,R,h),h&&j&2048&&hd(g.alternate,g);break;default:ao(f,g,E,R,h)}n=n.sibling}}function bl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,h=o.flags;switch(o.tag){case 22:bl(a,o),h&2048&&cd(o.alternate,o);break;case 24:bl(a,o),h&2048&&hd(o.alternate,o);break;default:bl(a,o)}n=n.sibling}}var wl=8192;function oo(e,n,a){if(e.subtreeFlags&wl)for(e=e.child;e!==null;)qy(e,n,a),e=e.sibling}function qy(e,n,a){switch(e.tag){case 26:oo(e,n,a),e.flags&wl&&e.memoizedState!==null&&VS(a,Ai,e.memoizedState,e.memoizedProps);break;case 5:oo(e,n,a);break;case 3:case 4:var o=Ai;Ai=Mc(e.stateNode.containerInfo),oo(e,n,a),Ai=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=wl,wl=16777216,oo(e,n,a),wl=o):oo(e,n,a));break;default:oo(e,n,a)}}function Hy(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Rl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];nn=o,Gy(o,e)}Hy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Fy(e),e=e.sibling}function Fy(e){switch(e.tag){case 0:case 11:case 15:Rl(e),e.flags&2048&&er(9,e,e.return);break;case 3:Rl(e);break;case 12:Rl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Ec(e)):Rl(e);break;default:Rl(e)}}function Ec(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];nn=o,Gy(o,e)}Hy(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:er(8,n,n.return),Ec(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Ec(n));break;default:Ec(n)}e=e.sibling}}function Gy(e,n){for(;nn!==null;){var a=nn;switch(a.tag){case 0:case 11:case 15:er(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ul(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,nn=o;else t:for(a=e;nn!==null;){o=nn;var h=o.sibling,f=o.return;if(Uy(o),o===a){nn=null;break t}if(h!==null){h.return=f,nn=h;break t}nn=f}}}var XA={getCacheForType:function(e){var n=ln(Fe),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return ln(Fe).controller.signal}},$A=typeof WeakMap=="function"?WeakMap:Map,ie=0,_e=null,zt=null,qt=0,ue=0,Qn=null,nr=!1,lo=!1,fd=!1,Ts=0,Me=0,ir=0,ca=0,dd=0,Yn=0,uo=0,Il=null,Ln=null,md=!1,Tc=0,Qy=0,Ac=1/0,Sc=null,sr=null,Je=0,rr=null,co=null,As=0,gd=0,pd=null,Yy=null,Cl=0,yd=null;function Kn(){return(ie&2)!==0&&qt!==0?qt&-qt:Q.T!==null?Sd():Oa()}function Ky(){if(Yn===0)if((qt&536870912)===0||Yt){var e=is;is<<=1,(is&3932160)===0&&(is=262144),Yn=e}else Yn=536870912;return e=Fn.current,e!==null&&(e.flags|=32),Yn}function Pn(e,n,a){(e===_e&&(ue===2||ue===9)||e.cancelPendingCommit!==null)&&(ho(e,0),ar(e,qt,Yn,!1)),ss(e,a),((ie&2)===0||e!==_e)&&(e===_e&&((ie&2)===0&&(ca|=a),Me===4&&ar(e,qt,Yn,!1)),ji(e))}function Xy(e,n,a){if((ie&6)!==0)throw Error(r(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||jn(e,n),h=o?WA(e,n):vd(e,n,!0),f=o;do{if(h===0){lo&&!o&&ar(e,n,0,!1);break}else{if(a=e.current.alternate,f&&!ZA(a)){h=vd(e,n,!1),f=!1;continue}if(h===2){if(f=n,e.errorRecoveryDisabledLanes&f)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){n=g;t:{var E=e;h=Il;var R=E.current.memoizedState.isDehydrated;if(R&&(ho(E,g).flags|=256),g=vd(E,g,!1),g!==2){if(fd&&!R){E.errorRecoveryDisabledLanes|=f,ca|=f,h=4;break t}f=Ln,Ln=h,f!==null&&(Ln===null?Ln=f:Ln.push.apply(Ln,f))}h=g}if(f=!1,h!==2)continue}}if(h===1){ho(e,0),ar(e,n,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:ar(o,n,Yn,!nr);break t;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=Tc+300-pn(),10<h)){if(ar(o,n,Yn,!nr),ti(o,0,!0)!==0)break t;As=n,o.timeoutHandle=R_($y.bind(null,o,a,Ln,Sc,md,n,Yn,ca,uo,nr,f,"Throttled",-0,0),h);break t}$y(o,a,Ln,Sc,md,n,Yn,ca,uo,nr,f,null,-0,0)}}break}while(!0);ji(e)}function $y(e,n,a,o,h,f,g,E,R,j,Y,W,B,F){if(e.timeoutHandle=-1,W=n.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pi},qy(n,f,W);var mt=(f&62914560)===f?Tc-pn():(f&4194048)===f?Qy-pn():0;if(mt=US(W,mt),mt!==null){As=f,e.cancelPendingCommit=mt(s_.bind(null,e,n,f,a,o,h,g,E,R,Y,W,null,B,F)),ar(e,f,g,!j);return}}s_(e,n,f,a,o,h,g,E,R)}function ZA(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!qn(f(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ar(e,n,a,o){n&=~dd,n&=~ca,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var f=31-we(h),g=1<<f;o[f]=-1,h&=~g}a!==0&&rs(e,a,n)}function bc(){return(ie&6)===0?(Nl(0),!1):!0}function _d(){if(zt!==null){if(ue===0)var e=zt.return;else e=zt,hs=ea=null,Vf(e),eo=null,hl=0,e=zt;for(;e!==null;)Iy(e.alternate,e),e=e.return;zt=null}}function ho(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,yS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),As=0,_d(),_e=e,zt=a=us(e.current,null),qt=n,ue=0,Qn=null,nr=!1,lo=jn(e,n),fd=!1,uo=Yn=dd=ca=ir=Me=0,Ln=Il=null,md=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-we(o),f=1<<h;n|=e[h],o&=~f}return Ts=n,Gu(),a}function Zy(e,n){Pt=null,Q.H=vl,n===to||n===Wu?(n=dp(),ue=3):n===Af?(n=dp(),ue=4):ue=n===$f?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Qn=n,zt===null&&(Me=1,dc(e,oi(n,e.current)))}function Jy(){var e=Fn.current;return e===null?!0:(qt&4194048)===qt?hi===null:(qt&62914560)===qt||(qt&536870912)!==0?e===hi:!1}function Wy(){var e=Q.H;return Q.H=vl,e===null?vl:e}function t_(){var e=Q.A;return Q.A=XA,e}function wc(){Me=4,nr||(qt&4194048)!==qt&&Fn.current!==null||(lo=!0),(ir&134217727)===0&&(ca&134217727)===0||_e===null||ar(_e,qt,Yn,!1)}function vd(e,n,a){var o=ie;ie|=2;var h=Wy(),f=t_();(_e!==e||qt!==n)&&(Sc=null,ho(e,n)),n=!1;var g=Me;t:do try{if(ue!==0&&zt!==null){var E=zt,R=Qn;switch(ue){case 8:_d(),g=6;break t;case 3:case 2:case 9:case 6:Fn.current===null&&(n=!0);var j=ue;if(ue=0,Qn=null,fo(e,E,R,j),a&&lo){g=0;break t}break;default:j=ue,ue=0,Qn=null,fo(e,E,R,j)}}JA(),g=Me;break}catch(Y){Zy(e,Y)}while(!0);return n&&e.shellSuspendCounter++,hs=ea=null,ie=o,Q.H=h,Q.A=f,zt===null&&(_e=null,qt=0,Gu()),g}function JA(){for(;zt!==null;)e_(zt)}function WA(e,n){var a=ie;ie|=2;var o=Wy(),h=t_();_e!==e||qt!==n?(Sc=null,Ac=pn()+500,ho(e,n)):lo=jn(e,n);t:do try{if(ue!==0&&zt!==null){n=zt;var f=Qn;e:switch(ue){case 1:ue=0,Qn=null,fo(e,n,f,1);break;case 2:case 9:if(hp(f)){ue=0,Qn=null,n_(n);break}n=function(){ue!==2&&ue!==9||_e!==e||(ue=7),ji(e)},f.then(n,n);break t;case 3:ue=7;break t;case 4:ue=5;break t;case 7:hp(f)?(ue=0,Qn=null,n_(n)):(ue=0,Qn=null,fo(e,n,f,7));break;case 5:var g=null;switch(zt.tag){case 26:g=zt.memoizedState;case 5:case 27:var E=zt;if(g?B_(g):E.stateNode.complete){ue=0,Qn=null;var R=E.sibling;if(R!==null)zt=R;else{var j=E.return;j!==null?(zt=j,Rc(j)):zt=null}break e}}ue=0,Qn=null,fo(e,n,f,5);break;case 6:ue=0,Qn=null,fo(e,n,f,6);break;case 8:_d(),Me=6;break t;default:throw Error(r(462))}}tS();break}catch(Y){Zy(e,Y)}while(!0);return hs=ea=null,Q.H=o,Q.A=h,ie=a,zt!==null?0:(_e=null,qt=0,Gu(),Me)}function tS(){for(;zt!==null&&!Lr();)e_(zt)}function e_(e){var n=wy(e.alternate,e,Ts);e.memoizedProps=e.pendingProps,n===null?Rc(e):zt=n}function n_(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=vy(a,n,n.pendingProps,n.type,void 0,qt);break;case 11:n=vy(a,n,n.pendingProps,n.type.render,n.ref,qt);break;case 5:Vf(n);default:Iy(a,n),n=zt=tp(n,Ts),n=wy(a,n,Ts)}e.memoizedProps=e.pendingProps,n===null?Rc(e):zt=n}function fo(e,n,a,o){hs=ea=null,Vf(n),eo=null,hl=0;var h=n.return;try{if(qA(e,h,n,a,qt)){Me=1,dc(e,oi(a,e.current)),zt=null;return}}catch(f){if(h!==null)throw zt=h,f;Me=1,dc(e,oi(a,e.current)),zt=null;return}n.flags&32768?(Yt||o===1?e=!0:lo||(qt&536870912)!==0?e=!1:(nr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Fn.current,o!==null&&o.tag===13&&(o.flags|=16384))),i_(n,e)):Rc(n)}function Rc(e){var n=e;do{if((n.flags&32768)!==0){i_(n,nr);return}e=n.return;var a=GA(n.alternate,n,Ts);if(a!==null){zt=a;return}if(n=n.sibling,n!==null){zt=n;return}zt=n=e}while(n!==null);Me===0&&(Me=5)}function i_(e,n){do{var a=QA(e.alternate,e);if(a!==null){a.flags&=32767,zt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){zt=e;return}zt=e=a}while(e!==null);Me=6,zt=null}function s_(e,n,a,o,h,f,g,E,R){e.cancelPendingCommit=null;do Ic();while(Je!==0);if((ie&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=of,xa(e,a,f,g,E,R),e===_e&&(zt=_e=null,qt=0),co=n,rr=e,As=a,gd=f,pd=h,Yy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,sS(An,function(){return u_(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null,h=at.p,at.p=2,g=ie,ie|=4;try{YA(e,n,a)}finally{ie=g,at.p=h,Q.T=o}}Je=1,r_(),a_(),o_()}}function r_(){if(Je===1){Je=0;var e=rr,n=co,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var o=at.p;at.p=2;var h=ie;ie|=4;try{zy(n,e);var f=xd,g=Gg(e.containerInfo),E=f.focusedElem,R=f.selectionRange;if(g!==E&&E&&E.ownerDocument&&Fg(E.ownerDocument.documentElement,E)){if(R!==null&&ef(E)){var j=R.start,Y=R.end;if(Y===void 0&&(Y=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(Y,E.value.length);else{var W=E.ownerDocument||document,B=W&&W.defaultView||window;if(B.getSelection){var F=B.getSelection(),mt=E.textContent.length,Rt=Math.min(R.start,mt),ge=R.end===void 0?Rt:Math.min(R.end,mt);!F.extend&&Rt>ge&&(g=ge,ge=Rt,Rt=g);var U=Hg(E,Rt),x=Hg(E,ge);if(U&&x&&(F.rangeCount!==1||F.anchorNode!==U.node||F.anchorOffset!==U.offset||F.focusNode!==x.node||F.focusOffset!==x.offset)){var z=W.createRange();z.setStart(U.node,U.offset),F.removeAllRanges(),Rt>ge?(F.addRange(z),F.extend(x.node,x.offset)):(z.setEnd(x.node,x.offset),F.addRange(z))}}}}for(W=[],F=E;F=F.parentNode;)F.nodeType===1&&W.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<W.length;E++){var Z=W[E];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}zc=!!Dd,xd=Dd=null}finally{ie=h,at.p=o,Q.T=a}}e.current=n,Je=2}}function a_(){if(Je===2){Je=0;var e=rr,n=co,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var o=at.p;at.p=2;var h=ie;ie|=4;try{Vy(e,n.alternate,n)}finally{ie=h,at.p=o,Q.T=a}}Je=3}}function o_(){if(Je===4||Je===3){Je=0,Ra();var e=rr,n=co,a=As,o=Yy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Je=5:(Je=0,co=rr=null,l_(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(sr=null),ei(a),n=n.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot($t,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=Q.T,h=at.p,at.p=2,Q.T=null;try{for(var f=e.onRecoverableError,g=0;g<o.length;g++){var E=o[g];f(E.value,{componentStack:E.stack})}}finally{Q.T=n,at.p=h}}(As&3)!==0&&Ic(),ji(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===yd?Cl++:(Cl=0,yd=e):Cl=0,Nl(0)}}function l_(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,ul(n)))}function Ic(){return r_(),a_(),o_(),u_()}function u_(){if(Je!==5)return!1;var e=rr,n=gd;gd=0;var a=ei(As),o=Q.T,h=at.p;try{at.p=32>a?32:a,Q.T=null,a=pd,pd=null;var f=rr,g=As;if(Je=0,co=rr=null,As=0,(ie&6)!==0)throw Error(r(331));var E=ie;if(ie|=4,Fy(f.current),By(f,f.current,g,a),ie=E,Nl(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot($t,f)}catch{}return!0}finally{at.p=h,Q.T=o,l_(e,n)}}function c_(e,n,a){n=oi(a,n),n=Xf(e.stateNode,n,2),e=Js(e,n,2),e!==null&&(ss(e,2),ji(e))}function ce(e,n,a){if(e.tag===3)c_(e,e,a);else for(;n!==null;){if(n.tag===3){c_(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(sr===null||!sr.has(o))){e=oi(a,e),a=hy(2),o=Js(n,a,2),o!==null&&(fy(a,o,n,e),ss(o,2),ji(o));break}}n=n.return}}function Ed(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new $A;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(fd=!0,h.add(a),e=eS.bind(null,e,n,a),n.then(e,e))}function eS(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,_e===e&&(qt&a)===a&&(Me===4||Me===3&&(qt&62914560)===qt&&300>pn()-Tc?(ie&2)===0&&ho(e,0):dd|=a,uo===qt&&(uo=0)),ji(e)}function h_(e,n){n===0&&(n=Sn()),e=Jr(e,n),e!==null&&(ss(e,n),ji(e))}function nS(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),h_(e,a)}function iS(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(n),h_(e,a)}function sS(e,n){return He(e,n)}var Cc=null,mo=null,Td=!1,Nc=!1,Ad=!1,or=0;function ji(e){e!==mo&&e.next===null&&(mo===null?Cc=mo=e:mo=mo.next=e),Nc=!0,Td||(Td=!0,aS())}function Nl(e,n){if(!Ad&&Nc){Ad=!0;do for(var a=!1,o=Cc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var g=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-we(42|e)+1)-1,f&=h&~(g&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,g_(o,f))}else f=qt,f=ti(o,o===_e?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||jn(o,f)||(a=!0,g_(o,f));o=o.next}while(a);Ad=!1}}function rS(){f_()}function f_(){Nc=Td=!1;var e=0;or!==0&&pS()&&(e=or);for(var n=pn(),a=null,o=Cc;o!==null;){var h=o.next,f=d_(o,n);f===0?(o.next=null,a===null?Cc=h:a.next=h,h===null&&(mo=a)):(a=o,(e!==0||(f&3)!==0)&&(Nc=!0)),o=h}Je!==0&&Je!==5||Nl(e),or!==0&&(or=0)}function d_(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var g=31-we(f),E=1<<g,R=h[g];R===-1?((E&a)===0||(E&o)!==0)&&(h[g]=Go(E,n)):R<=n&&(e.expiredLanes|=E),f&=~E}if(n=_e,a=qt,a=ti(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(ue===2||ue===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Ni(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||jn(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&Ni(o),ei(a)){case 2:case 8:a=Pr;break;case 32:a=An;break;case 268435456:a=ts;break;default:a=An}return o=m_.bind(null,e),a=He(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&Ni(o),e.callbackPriority=2,e.callbackNode=null,2}function m_(e,n){if(Je!==0&&Je!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ic()&&e.callbackNode!==a)return null;var o=qt;return o=ti(e,e===_e?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Xy(e,o,n),d_(e,pn()),e.callbackNode!=null&&e.callbackNode===a?m_.bind(null,e):null)}function g_(e,n){if(Ic())return null;Xy(e,n,!0)}function aS(){_S(function(){(ie&6)!==0?He(Ia,rS):f_()})}function Sd(){if(or===0){var e=Ja;e===0&&(e=zn,zn<<=1,(zn&261888)===0&&(zn=256)),or=e}return or}function p_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Pa(""+e)}function y_(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function oS(e,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var f=p_((h[Pe]||null).action),g=o.submitter;g&&(n=(n=g[Pe]||null)?p_(n.formAction):g.getAttribute("formAction"),n!==null&&(f=n,g=null));var E=new Mi("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(or!==0){var R=g?y_(h,g):new FormData(h);Hf(a,{pending:!0,data:R,method:h.method,action:f},null,R)}}else typeof f=="function"&&(E.preventDefault(),R=g?y_(h,g):new FormData(h),Hf(a,{pending:!0,data:R,method:h.method,action:f},f,R))},currentTarget:h}]})}}for(var bd=0;bd<af.length;bd++){var wd=af[bd],lS=wd.toLowerCase(),uS=wd[0].toUpperCase()+wd.slice(1);Ti(lS,"on"+uS)}Ti(Kg,"onAnimationEnd"),Ti(Xg,"onAnimationIteration"),Ti($g,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(wA,"onTransitionRun"),Ti(RA,"onTransitionStart"),Ti(IA,"onTransitionCancel"),Ti(Zg,"onTransitionEnd"),gt("onMouseEnter",["mouseout","mouseover"]),gt("onMouseLeave",["mouseout","mouseover"]),gt("onPointerEnter",["pointerout","pointerover"]),gt("onPointerLeave",["pointerout","pointerover"]),dt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dt("onBeforeInput",["compositionend","keypress","textInput","paste"]),dt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dl));function __(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var f=void 0;if(n)for(var g=o.length-1;0<=g;g--){var E=o[g],R=E.instance,j=E.currentTarget;if(E=E.listener,R!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=j;try{f(h)}catch(Y){Fu(Y)}h.currentTarget=null,f=R}else for(g=0;g<o.length;g++){if(E=o[g],R=E.instance,j=E.currentTarget,E=E.listener,R!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=j;try{f(h)}catch(Y){Fu(Y)}h.currentTarget=null,f=R}}}}function jt(e,n){var a=n[Ls];a===void 0&&(a=n[Ls]=new Set);var o=e+"__bubble";a.has(o)||(v_(n,e,2,!1),a.add(o))}function Rd(e,n,a){var o=0;n&&(o|=4),v_(a,e,o,n)}var Dc="_reactListening"+Math.random().toString(36).slice(2);function Id(e){if(!e[Dc]){e[Dc]=!0,yt.forEach(function(a){a!=="selectionchange"&&(cS.has(a)||Rd(a,!1,e),Rd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Dc]||(n[Dc]=!0,Rd("selectionchange",!1,n))}}function v_(e,n,a,o){switch(K_(n)){case 2:var h=kS;break;case 8:h=zS;break;default:h=qd}a=h.bind(null,n,a,e),h=void 0,!Fr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,a,{capture:!0,passive:h}):e.addEventListener(n,a,!0):h!==void 0?e.addEventListener(n,a,{passive:h}):e.addEventListener(n,a,!1)}function Cd(e,n,a,o,h){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var E=o.stateNode.containerInfo;if(E===h)break;if(g===4)for(g=o.return;g!==null;){var R=g.tag;if((R===3||R===4)&&g.stateNode.containerInfo===h)return;g=g.return}for(;E!==null;){if(g=$(E),g===null)return;if(R=g.tag,R===5||R===6||R===26||R===27){o=f=g;continue t}E=E.parentNode}}o=o.return}qs(function(){var j=f,Y=ii(a),W=[];t:{var B=Jg.get(e);if(B!==void 0){var F=Mi,mt=e;switch(e){case"keypress":if(Qr(a)===0)break t;case"keydown":case"keyup":F=Bu;break;case"focusin":mt="focus",F=Kr;break;case"focusout":mt="blur",F=Kr;break;case"beforeblur":case"afterblur":F=Kr;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=el;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Ou;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=m;break;case Kg:case Xg:case $g:F=Vu;break;case Zg:F=T;break;case"scroll":case"scrollend":F=tl;break;case"wheel":F=H;break;case"copy":case"cut":case"paste":F=Uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=ls;break;case"toggle":case"beforetoggle":F=Lt}var Rt=(n&4)!==0,ge=!Rt&&(e==="scroll"||e==="scrollend"),U=Rt?B!==null?B+"Capture":null:B;Rt=[];for(var x=j,z;x!==null;){var Z=x;if(z=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||z===null||U===null||(Z=yi(x,U),Z!=null&&Rt.push(xl(x,Z,z))),ge)break;x=x.return}0<Rt.length&&(B=new F(B,mt,null,a,Y),W.push({event:B,listeners:Rt}))}}if((n&7)===0){t:{if(B=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",B&&a!==Zo&&(mt=a.relatedTarget||a.fromElement)&&($(mt)||mt[ni]))break t;if((F||B)&&(B=Y.window===Y?Y:(B=Y.ownerDocument)?B.defaultView||B.parentWindow:window,F?(mt=a.relatedTarget||a.toElement,F=j,mt=mt?$(mt):null,mt!==null&&(ge=c(mt),Rt=mt.tag,mt!==ge||Rt!==5&&Rt!==27&&Rt!==6)&&(mt=null)):(F=null,mt=j),F!==mt)){if(Rt=el,Z="onMouseLeave",U="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(Rt=ls,Z="onPointerLeave",U="onPointerEnter",x="pointer"),ge=F==null?B:ut(F),z=mt==null?B:ut(mt),B=new Rt(Z,x+"leave",F,a,Y),B.target=ge,B.relatedTarget=z,Z=null,$(Y)===j&&(Rt=new Rt(U,x+"enter",mt,a,Y),Rt.target=z,Rt.relatedTarget=ge,Z=Rt),ge=Z,F&&mt)e:{for(Rt=hS,U=F,x=mt,z=0,Z=U;Z;Z=Rt(Z))z++;Z=0;for(var Tt=x;Tt;Tt=Rt(Tt))Z++;for(;0<z-Z;)U=Rt(U),z--;for(;0<Z-z;)x=Rt(x),Z--;for(;z--;){if(U===x||x!==null&&U===x.alternate){Rt=U;break e}U=Rt(U),x=Rt(x)}Rt=null}else Rt=null;F!==null&&E_(W,B,F,Rt,!1),mt!==null&&ge!==null&&E_(W,ge,mt,Rt,!0)}}t:{if(B=j?ut(j):window,F=B.nodeName&&B.nodeName.toLowerCase(),F==="select"||F==="input"&&B.type==="file")var Wt=Pg;else if(Ug(B))if(kg)Wt=AA;else{Wt=EA;var pt=vA}else F=B.nodeName,!F||F.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?j&&La(j.elementType)&&(Wt=Pg):Wt=TA;if(Wt&&(Wt=Wt(e,j))){Lg(W,Wt,a,Y);break t}pt&&pt(e,B,j),e==="focusout"&&j&&B.type==="number"&&j.memoizedProps.value!=null&&Ko(B,"number",B.value)}switch(pt=j?ut(j):window,e){case"focusin":(Ug(pt)||pt.contentEditable==="true")&&(Fa=pt,nf=j,al=null);break;case"focusout":al=nf=Fa=null;break;case"mousedown":sf=!0;break;case"contextmenu":case"mouseup":case"dragend":sf=!1,Qg(W,a,Y);break;case"selectionchange":if(bA)break;case"keydown":case"keyup":Qg(W,a,Y)}var kt;if(ne)t:{switch(e){case"compositionstart":var Ht="onCompositionStart";break t;case"compositionend":Ht="onCompositionEnd";break t;case"compositionupdate":Ht="onCompositionUpdate";break t}Ht=void 0}else Ha?Xr(e,a)&&(Ht="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ht="onCompositionStart");Ht&&(Li&&a.locale!=="ko"&&(Ha||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&Ha&&(kt=Wo()):(Oi=Y,Jo="value"in Oi?Oi.value:Oi.textContent,Ha=!0)),pt=xc(j,Ht),0<pt.length&&(Ht=new Ui(Ht,e,null,a,Y),W.push({event:Ht,listeners:pt}),kt?Ht.data=kt:(kt=qa(a),kt!==null&&(Ht.data=kt)))),(kt=ri?gA(e,a):pA(e,a))&&(Ht=xc(j,"onBeforeInput"),0<Ht.length&&(pt=new Ui("onBeforeInput","beforeinput",null,a,Y),W.push({event:pt,listeners:Ht}),pt.data=kt)),oS(W,e,j,a,Y)}__(W,n)})}function xl(e,n,a){return{instance:e,listener:n,currentTarget:a}}function xc(e,n){for(var a=n+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=yi(e,a),h!=null&&o.unshift(xl(e,h,f)),h=yi(e,n),h!=null&&o.push(xl(e,h,f))),e.tag===3)return o;e=e.return}return[]}function hS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function E_(e,n,a,o,h){for(var f=n._reactName,g=[];a!==null&&a!==o;){var E=a,R=E.alternate,j=E.stateNode;if(E=E.tag,R!==null&&R===o)break;E!==5&&E!==26&&E!==27||j===null||(R=j,h?(j=yi(a,f),j!=null&&g.unshift(xl(a,j,R))):h||(j=yi(a,f),j!=null&&g.push(xl(a,j,R)))),a=a.return}g.length!==0&&e.push({event:n,listeners:g})}var fS=/\r\n?/g,dS=/\u0000|\uFFFD/g;function T_(e){return(typeof e=="string"?e:""+e).replace(fS,`
`).replace(dS,"")}function A_(e,n){return n=T_(n),T_(e)===n}function me(e,n,a,o,h,f){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||On(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&On(e,""+o);break;case"className":en(e,"class",o);break;case"tabIndex":en(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":en(e,a,o);break;case"style":$o(e,o,f);break;case"data":if(n!=="object"){en(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Pa(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&me(e,n,"name",h.name,h,null),me(e,n,"formEncType",h.formEncType,h,null),me(e,n,"formMethod",h.formMethod,h,null),me(e,n,"formTarget",h.formTarget,h,null)):(me(e,n,"encType",h.encType,h,null),me(e,n,"method",h.method,h,null),me(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Pa(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=pi);break;case"onScroll":o!=null&&jt("scroll",e);break;case"onScrollEnd":o!=null&&jt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Pa(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":jt("beforetoggle",e),jt("toggle",e),gi(e,"popover",o);break;case"xlinkActuate":Ie(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ie(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ie(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ie(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ie(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ie(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ie(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ie(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ie(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":gi(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=xu.get(a)||a,gi(e,a,o))}}function Nd(e,n,a,o,h,f){switch(a){case"style":$o(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof o=="string"?On(e,o):(typeof o=="number"||typeof o=="bigint")&&On(e,""+o);break;case"onScroll":o!=null&&jt("scroll",e);break;case"onScrollEnd":o!=null&&jt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ut.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),f=e[Pe]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(n,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):gi(e,a,o)}}}function cn(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",e),jt("load",e);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var g=a[f];if(g!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:me(e,n,f,g,a,null)}}h&&me(e,n,"srcSet",a.srcSet,a,null),o&&me(e,n,"src",a.src,a,null);return;case"input":jt("invalid",e);var E=f=g=h=null,R=null,j=null;for(o in a)if(a.hasOwnProperty(o)){var Y=a[o];if(Y!=null)switch(o){case"name":h=Y;break;case"type":g=Y;break;case"checked":R=Y;break;case"defaultChecked":j=Y;break;case"value":f=Y;break;case"defaultValue":E=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,n));break;default:me(e,n,o,Y,a,null)}}Cu(e,f,E,R,j,g,h,!1);return;case"select":jt("invalid",e),o=g=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":g=E;break;case"multiple":o=E;default:me(e,n,h,E,a,null)}n=f,a=g,e.multiple=!!o,n!=null?ks(e,!!o,n,!1):a!=null&&ks(e,!!o,a,!0);return;case"textarea":jt("invalid",e),f=h=o=null;for(g in a)if(a.hasOwnProperty(g)&&(E=a[g],E!=null))switch(g){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:me(e,n,g,E,a,null)}zs(e,o,h,f);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(o=a[R],o!=null))switch(R){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:me(e,n,R,o,a,null)}return;case"dialog":jt("beforetoggle",e),jt("toggle",e),jt("cancel",e),jt("close",e);break;case"iframe":case"object":jt("load",e);break;case"video":case"audio":for(o=0;o<Dl.length;o++)jt(Dl[o],e);break;case"image":jt("error",e),jt("load",e);break;case"details":jt("toggle",e);break;case"embed":case"source":case"link":jt("error",e),jt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:me(e,n,j,o,a,null)}return;default:if(La(n)){for(Y in a)a.hasOwnProperty(Y)&&(o=a[Y],o!==void 0&&Nd(e,n,Y,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&me(e,n,E,o,a,null))}function mS(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,g=null,E=null,R=null,j=null,Y=null;for(F in a){var W=a[F];if(a.hasOwnProperty(F)&&W!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":R=W;default:o.hasOwnProperty(F)||me(e,n,F,null,o,W)}}for(var B in o){var F=o[B];if(W=a[B],o.hasOwnProperty(B)&&(F!=null||W!=null))switch(B){case"type":f=F;break;case"name":h=F;break;case"checked":j=F;break;case"defaultChecked":Y=F;break;case"value":g=F;break;case"defaultValue":E=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,n));break;default:F!==W&&me(e,n,B,F,o,W)}}Ua(e,g,E,R,j,Y,f,h);return;case"select":F=g=E=B=null;for(f in a)if(R=a[f],a.hasOwnProperty(f)&&R!=null)switch(f){case"value":break;case"multiple":F=R;default:o.hasOwnProperty(f)||me(e,n,f,null,o,R)}for(h in o)if(f=o[h],R=a[h],o.hasOwnProperty(h)&&(f!=null||R!=null))switch(h){case"value":B=f;break;case"defaultValue":E=f;break;case"multiple":g=f;default:f!==R&&me(e,n,h,f,o,R)}n=E,a=g,o=F,B!=null?ks(e,!!a,B,!1):!!o!=!!a&&(n!=null?ks(e,!!a,n,!0):ks(e,!!a,a?[]:"",!1));return;case"textarea":F=B=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:me(e,n,E,null,o,h)}for(g in o)if(h=o[g],f=a[g],o.hasOwnProperty(g)&&(h!=null||f!=null))switch(g){case"value":B=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==f&&me(e,n,g,h,o,f)}Nu(e,B,F);return;case"option":for(var mt in a)if(B=a[mt],a.hasOwnProperty(mt)&&B!=null&&!o.hasOwnProperty(mt))switch(mt){case"selected":e.selected=!1;break;default:me(e,n,mt,null,o,B)}for(R in o)if(B=o[R],F=a[R],o.hasOwnProperty(R)&&B!==F&&(B!=null||F!=null))switch(R){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:me(e,n,R,B,o,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in a)B=a[Rt],a.hasOwnProperty(Rt)&&B!=null&&!o.hasOwnProperty(Rt)&&me(e,n,Rt,null,o,B);for(j in o)if(B=o[j],F=a[j],o.hasOwnProperty(j)&&B!==F&&(B!=null||F!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,n));break;default:me(e,n,j,B,o,F)}return;default:if(La(n)){for(var ge in a)B=a[ge],a.hasOwnProperty(ge)&&B!==void 0&&!o.hasOwnProperty(ge)&&Nd(e,n,ge,void 0,o,B);for(Y in o)B=o[Y],F=a[Y],!o.hasOwnProperty(Y)||B===F||B===void 0&&F===void 0||Nd(e,n,Y,B,o,F);return}}for(var U in a)B=a[U],a.hasOwnProperty(U)&&B!=null&&!o.hasOwnProperty(U)&&me(e,n,U,null,o,B);for(W in o)B=o[W],F=a[W],!o.hasOwnProperty(W)||B===F||B==null&&F==null||me(e,n,W,B,o,F)}function S_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function gS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],f=h.transferSize,g=h.initiatorType,E=h.duration;if(f&&E&&S_(g)){for(g=0,E=h.responseEnd,o+=1;o<a.length;o++){var R=a[o],j=R.startTime;if(j>E)break;var Y=R.transferSize,W=R.initiatorType;Y&&S_(W)&&(R=R.responseEnd,g+=Y*(R<E?1:(E-j)/(R-j)))}if(--o,n+=8*(f+g)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Dd=null,xd=null;function Oc(e){return e.nodeType===9?e:e.ownerDocument}function b_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w_(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Od(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Md=null;function pS(){var e=window.event;return e&&e.type==="popstate"?e===Md?!1:(Md=e,!0):(Md=null,!1)}var R_=typeof setTimeout=="function"?setTimeout:void 0,yS=typeof clearTimeout=="function"?clearTimeout:void 0,I_=typeof Promise=="function"?Promise:void 0,_S=typeof queueMicrotask=="function"?queueMicrotask:typeof I_<"u"?function(e){return I_.resolve(null).then(e).catch(vS)}:R_;function vS(e){setTimeout(function(){throw e})}function lr(e){return e==="head"}function C_(e,n){var a=n,o=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(h),_o(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Ol(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ol(a);for(var f=a.firstChild;f;){var g=f.nextSibling,E=f.nodeName;f[L]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=g}}else a==="body"&&Ol(e.ownerDocument.body);a=h}while(a);_o(n)}function N_(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function Vd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Vd(a),q(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function ES(e,n,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[L])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=fi(e.nextSibling),e===null)break}return null}function TS(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=fi(e.nextSibling),e===null))return null;return e}function D_(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=fi(e.nextSibling),e===null))return null;return e}function Ud(e){return e.data==="$?"||e.data==="$~"}function Ld(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function AS(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function fi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Pd=null;function x_(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return fi(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function O_(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function M_(e,n,a){switch(n=Oc(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Ol(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);q(e)}var di=new Map,V_=new Set;function Mc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ss=at.d;at.d={f:SS,r:bS,D:wS,C:RS,L:IS,m:CS,X:DS,S:NS,M:xS};function SS(){var e=Ss.f(),n=bc();return e||n}function bS(e){var n=K(e);n!==null&&n.tag===5&&n.type==="form"?Zp(n):Ss.r(e)}var go=typeof document>"u"?null:document;function U_(e,n,a){var o=go;if(o&&typeof n=="string"&&n){var h=xn(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),V_.has(h)||(V_.add(h),e={rel:e,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),cn(n,"link",e),ht(n),o.head.appendChild(n)))}}function wS(e){Ss.D(e),U_("dns-prefetch",e,null)}function RS(e,n){Ss.C(e,n),U_("preconnect",e,n)}function IS(e,n,a){Ss.L(e,n,a);var o=go;if(o&&e&&n){var h='link[rel="preload"][as="'+xn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+xn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+xn(a.imageSizes)+'"]')):h+='[href="'+xn(e)+'"]';var f=h;switch(n){case"style":f=po(e);break;case"script":f=yo(e)}di.has(f)||(e=S({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),di.set(f,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(Ml(f))||n==="script"&&o.querySelector(Vl(f))||(n=o.createElement("link"),cn(n,"link",e),ht(n),o.head.appendChild(n)))}}function CS(e,n){Ss.m(e,n);var a=go;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+xn(o)+'"][href="'+xn(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=yo(e)}if(!di.has(f)&&(e=S({rel:"modulepreload",href:e},n),di.set(f,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Vl(f)))return}o=a.createElement("link"),cn(o,"link",e),ht(o),a.head.appendChild(o)}}}function NS(e,n,a){Ss.S(e,n,a);var o=go;if(o&&e){var h=_t(o).hoistableStyles,f=po(e);n=n||"default";var g=h.get(f);if(!g){var E={loading:0,preload:null};if(g=o.querySelector(Ml(f)))E.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":n},a),(a=di.get(f))&&kd(e,a);var R=g=o.createElement("link");ht(R),cn(R,"link",e),R._p=new Promise(function(j,Y){R.onload=j,R.onerror=Y}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Vc(g,n,o)}g={type:"stylesheet",instance:g,count:1,state:E},h.set(f,g)}}}function DS(e,n){Ss.X(e,n);var a=go;if(a&&e){var o=_t(a).hoistableScripts,h=yo(e),f=o.get(h);f||(f=a.querySelector(Vl(h)),f||(e=S({src:e,async:!0},n),(n=di.get(h))&&zd(e,n),f=a.createElement("script"),ht(f),cn(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function xS(e,n){Ss.M(e,n);var a=go;if(a&&e){var o=_t(a).hoistableScripts,h=yo(e),f=o.get(h);f||(f=a.querySelector(Vl(h)),f||(e=S({src:e,async:!0,type:"module"},n),(n=di.get(h))&&zd(e,n),f=a.createElement("script"),ht(f),cn(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function L_(e,n,a,o){var h=(h=nt.current)?Mc(h):null;if(!h)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=po(a.href),a=_t(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=po(a.href);var f=_t(h).hoistableStyles,g=f.get(e);if(g||(h=h.ownerDocument||h,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,g),(f=h.querySelector(Ml(e)))&&!f._p&&(g.instance=f,g.state.loading=5),di.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},di.set(e,a),f||OS(h,e,a,g.state))),n&&o===null)throw Error(r(528,""));return g}if(n&&o!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=yo(a),a=_t(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function po(e){return'href="'+xn(e)+'"'}function Ml(e){return'link[rel="stylesheet"]['+e+"]"}function P_(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function OS(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),cn(n,"link",a),ht(n),e.head.appendChild(n))}function yo(e){return'[src="'+xn(e)+'"]'}function Vl(e){return"script[async]"+e}function k_(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+xn(a.href)+'"]');if(o)return n.instance=o,ht(o),o;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ht(o),cn(o,"style",h),Vc(o,a.precedence,e),n.instance=o;case"stylesheet":h=po(a.href);var f=e.querySelector(Ml(h));if(f)return n.state.loading|=4,n.instance=f,ht(f),f;o=P_(a),(h=di.get(h))&&kd(o,h),f=(e.ownerDocument||e).createElement("link"),ht(f);var g=f;return g._p=new Promise(function(E,R){g.onload=E,g.onerror=R}),cn(f,"link",o),n.state.loading|=4,Vc(f,a.precedence,e),n.instance=f;case"script":return f=yo(a.src),(h=e.querySelector(Vl(f)))?(n.instance=h,ht(h),h):(o=a,(h=di.get(f))&&(o=S({},a),zd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),ht(h),cn(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Vc(o,a.precedence,e));return n.instance}function Vc(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,g=0;g<o.length;g++){var E=o[g];if(E.dataset.precedence===n)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function kd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function zd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Uc=null;function z_(e,n,a){if(Uc===null){var o=new Map,h=Uc=new Map;h.set(a,o)}else h=Uc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var f=a[h];if(!(f[L]||f[Re]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var g=f.getAttribute(n)||"";g=e+g;var E=o.get(g);E?E.push(f):o.set(g,[f])}}return o}function j_(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function MS(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function B_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function VS(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=po(o.href),f=n.querySelector(Ml(h));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Lc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=f,ht(f);return}f=n.ownerDocument||n,o=P_(o),(h=di.get(h))&&kd(o,h),f=f.createElement("link"),ht(f);var g=f;g._p=new Promise(function(E,R){g.onload=E,g.onerror=R}),cn(f,"link",o),a.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Lc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var jd=0;function US(e,n){return e.stylesheets&&e.count===0&&kc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&kc(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&jd===0&&(jd=62500*gS());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&kc(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>jd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Lc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pc=null;function kc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pc=new Map,n.forEach(LS,e),Pc=null,Lc.call(e))}function LS(e,n){if(!(n.state.loading&4)){var a=Pc.get(e);if(a)var o=a.get(null);else{a=new Map,Pc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var g=h[f];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),o=g)}o&&a.set(null,o)}h=n.instance,g=h.getAttribute("data-precedence"),f=a.get(g)||o,f===o&&a.set(null,h),a.set(g,h),this.count++,o=Lc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var Ul={$$typeof:It,Provider:null,Consumer:null,_currentValue:Et,_currentValue2:Et,_threadCount:0};function PS(e,n,a,o,h,f,g,E,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.hiddenUpdates=Nn(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function q_(e,n,a,o,h,f,g,E,R,j,Y,W){return e=new PS(e,n,a,g,R,j,Y,W,E),n=1,f===!0&&(n|=24),f=Hn(3,null,null,n),e.current=f,f.stateNode=e,n=vf(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:n},Sf(f),e}function H_(e){return e?(e=Ya,e):Ya}function F_(e,n,a,o,h,f){h=H_(h),o.context===null?o.context=h:o.pendingContext=h,o=Zs(n),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=Js(e,o,n),a!==null&&(Pn(a,e,n),dl(a,e,n))}function G_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Bd(e,n){G_(e,n),(e=e.alternate)&&G_(e,n)}function Q_(e){if(e.tag===13||e.tag===31){var n=Jr(e,67108864);n!==null&&Pn(n,e,67108864),Bd(e,67108864)}}function Y_(e){if(e.tag===13||e.tag===31){var n=Kn();n=Dn(n);var a=Jr(e,n);a!==null&&Pn(a,e,n),Bd(e,n)}}var zc=!0;function kS(e,n,a,o){var h=Q.T;Q.T=null;var f=at.p;try{at.p=2,qd(e,n,a,o)}finally{at.p=f,Q.T=h}}function zS(e,n,a,o){var h=Q.T;Q.T=null;var f=at.p;try{at.p=8,qd(e,n,a,o)}finally{at.p=f,Q.T=h}}function qd(e,n,a,o){if(zc){var h=Hd(o);if(h===null)Cd(e,n,o,jc,a),X_(e,o);else if(BS(h,e,n,a,o))o.stopPropagation();else if(X_(e,o),n&4&&-1<jS.indexOf(e)){for(;h!==null;){var f=K(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var g=Wn(f.pendingLanes);if(g!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;g;){var R=1<<31-we(g);E.entanglements[1]|=R,g&=~R}ji(f),(ie&6)===0&&(Ac=pn()+500,Nl(0))}}break;case 31:case 13:E=Jr(f,2),E!==null&&Pn(E,f,2),bc(),Bd(f,2)}if(f=Hd(o),f===null&&Cd(e,n,o,jc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else Cd(e,n,o,null,a)}}function Hd(e){return e=ii(e),Fd(e)}var jc=null;function Fd(e){if(jc=null,e=$(e),e!==null){var n=c(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=d(n),e!==null)return e;e=null}else if(a===31){if(e=p(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return jc=e,null}function K_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wi()){case Ia:return 2;case Pr:return 8;case An:case Ca:return 32;case ts:return 268435456;default:return 32}default:return 32}}var Gd=!1,ur=null,cr=null,hr=null,Ll=new Map,Pl=new Map,fr=[],jS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X_(e,n){switch(e){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Ll.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pl.delete(n.pointerId)}}function kl(e,n,a,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},n!==null&&(n=K(n),n!==null&&Q_(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function BS(e,n,a,o,h){switch(n){case"focusin":return ur=kl(ur,e,n,a,o,h),!0;case"dragenter":return cr=kl(cr,e,n,a,o,h),!0;case"mouseover":return hr=kl(hr,e,n,a,o,h),!0;case"pointerover":var f=h.pointerId;return Ll.set(f,kl(Ll.get(f)||null,e,n,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,Pl.set(f,kl(Pl.get(f)||null,e,n,a,o,h)),!0}return!1}function $_(e){var n=$(e.target);if(n!==null){var a=c(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){e.blockedOn=n,bn(e.priority,function(){Y_(a)});return}}else if(n===31){if(n=p(a),n!==null){e.blockedOn=n,bn(e.priority,function(){Y_(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Hd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Zo=o,a.target.dispatchEvent(o),Zo=null}else return n=K(a),n!==null&&Q_(n),e.blockedOn=a,!1;n.shift()}return!0}function Z_(e,n,a){Bc(e)&&a.delete(n)}function qS(){Gd=!1,ur!==null&&Bc(ur)&&(ur=null),cr!==null&&Bc(cr)&&(cr=null),hr!==null&&Bc(hr)&&(hr=null),Ll.forEach(Z_),Pl.forEach(Z_)}function qc(e,n){e.blockedOn===n&&(e.blockedOn=null,Gd||(Gd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,qS)))}var Hc=null;function J_(e){Hc!==e&&(Hc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Hc===e&&(Hc=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(Fd(o||a)===null)continue;break}var f=K(a);f!==null&&(e.splice(n,3),n-=3,Hf(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function _o(e){function n(R){return qc(R,e)}ur!==null&&qc(ur,e),cr!==null&&qc(cr,e),hr!==null&&qc(hr,e),Ll.forEach(n),Pl.forEach(n);for(var a=0;a<fr.length;a++){var o=fr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<fr.length&&(a=fr[0],a.blockedOn===null);)$_(a),a.blockedOn===null&&fr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],g=h[Pe]||null;if(typeof f=="function")g||J_(a);else if(g){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,g=f[Pe]||null)E=g.formAction;else if(Fd(h)!==null)continue}else E=g.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),J_(a)}}}function W_(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(g){return h=g})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Qd(e){this._internalRoot=e}Fc.prototype.render=Qd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,o=Kn();F_(a,o,e,n,null,null)},Fc.prototype.unmount=Qd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;F_(e.current,2,null,e,null,null),bc(),n[ni]=null}};function Fc(e){this._internalRoot=e}Fc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Oa();e={blockedOn:null,target:e,priority:n};for(var a=0;a<fr.length&&n!==0&&n<fr[a].priority;a++);fr.splice(a,0,e),a===0&&$_(e)}};var tv=t.version;if(tv!=="19.2.0")throw Error(r(527,tv,"19.2.0"));at.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(n),e=e!==null?A(e):null,e=e===null?null:e.stateNode,e};var HS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{$t=Gc.inject(HS),Ze=Gc}catch{}}return jl.createRoot=function(e,n){if(!l(e))throw Error(r(299));var a=!1,o="",h=oy,f=ly,g=uy;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),n=q_(e,1,!1,null,null,a,o,null,h,f,g,W_),e[ni]=n.current,Id(e),new Qd(n)},jl.hydrateRoot=function(e,n,a){if(!l(e))throw Error(r(299));var o=!1,h="",f=oy,g=ly,E=uy,R=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),n=q_(e,1,!0,n,a??null,o,h,R,f,g,E,W_),n.context=H_(null),a=n.current,o=Kn(),o=Dn(o),h=Zs(o),h.callback=null,Js(a,h,o),a=o,n.current.lanes=a,ss(n,a),ji(n),e[ni]=n.current,Id(e),new Fc(n)},jl.version="19.2.0",jl}var cv;function e1(){if(cv)return Xd.exports;cv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Xd.exports=t1(),Xd.exports}var n1=e1();/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s1=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,r)=>r?r.toUpperCase():i.toLowerCase()),hv=s=>{const t=s1(s);return t.charAt(0).toUpperCase()+t.slice(1)},F0=(...s)=>s.filter((t,i,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===i).join(" ").trim(),r1=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var a1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=Nt.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:l="",children:c,iconNode:d,...p},_)=>Nt.createElement("svg",{ref:_,...a1,width:t,height:t,stroke:s,strokeWidth:r?Number(i)*24/Number(t):i,className:F0("lucide",l),...!c&&!r1(p)&&{"aria-hidden":"true"},...p},[...d.map(([y,A])=>Nt.createElement(y,A)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=(s,t)=>{const i=Nt.forwardRef(({className:r,...l},c)=>Nt.createElement(o1,{ref:c,iconNode:t,className:F0(`lucide-${i1(hv(s))}`,`lucide-${s}`,r),...l}));return i.displayName=hv(s),i};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],u1=Nh("clock",l1);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],h1=Nh("plus",c1);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],d1=Nh("user-plus",f1);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],g1=Nh("users",m1),p1=()=>{};var fv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=function(s){const t=[];let i=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},y1=function(s){const t=[];let i=0,r=0;for(;i<s.length;){const l=s[i++];if(l<128)t[r++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[i++];t[r++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[i++],d=s[i++],p=s[i++],_=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;t[r++]=String.fromCharCode(55296+(_>>10)),t[r++]=String.fromCharCode(56320+(_&1023))}else{const c=s[i++],d=s[i++];t[r++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},Q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const c=s[l],d=l+1<s.length,p=d?s[l+1]:0,_=l+2<s.length,y=_?s[l+2]:0,A=c>>2,S=(c&3)<<4|p>>4;let I=(p&15)<<2|y>>6,G=y&63;_||(G=64,d||(I=64)),r.push(i[A],i[S],i[I],i[G])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(G0(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):y1(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const c=i[s.charAt(l++)],p=l<s.length?i[s.charAt(l)]:0;++l;const y=l<s.length?i[s.charAt(l)]:64;++l;const S=l<s.length?i[s.charAt(l)]:64;if(++l,c==null||p==null||y==null||S==null)throw new _1;const I=c<<2|p>>4;if(r.push(I),y!==64){const G=p<<4&240|y>>2;if(r.push(G),S!==64){const et=y<<6&192|S;r.push(et)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class _1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v1=function(s){const t=G0(s);return Q0.encodeByteArray(t,!0)},uh=function(s){return v1(s).replace(/\./g,"")},Y0=function(s){try{return Q0.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=()=>E1().__FIREBASE_DEFAULTS__,A1=()=>{if(typeof process>"u"||typeof fv>"u")return;const s=fv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},S1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&Y0(s[1]);return t&&JSON.parse(t)},Dh=()=>{try{return p1()||T1()||A1()||S1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},K0=s=>Dh()?.emulatorHosts?.[s],b1=s=>{const t=K0(s);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},X0=()=>Dh()?.config,$0=s=>Dh()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Z0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[uh(JSON.stringify(i)),uh(JSON.stringify(d)),""].join(".")}const Kl={};function I1(){const s={prod:[],emulator:[]};for(const t of Object.keys(Kl))Kl[t]?s.emulator.push(t):s.prod.push(t);return s}function C1(s){let t=document.getElementById(s),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),i=!0),{created:i,element:t}}let dv=!1;function J0(s,t){if(typeof window>"u"||typeof document>"u"||!Po(window.location.host)||Kl[s]===t||Kl[s]||dv)return;Kl[s]=t;function i(I){return`__firebase__banner__${I}`}const r="__firebase__banner",c=I1().prod.length>0;function d(){const I=document.getElementById(r);I&&I.remove()}function p(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function _(I,G){I.setAttribute("width","24"),I.setAttribute("id",G),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{dv=!0,d()},I}function A(I,G){I.setAttribute("id",G),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function S(){const I=C1(r),G=i("text"),et=document.getElementById(G)||document.createElement("span"),ot=i("learnmore"),it=document.getElementById(ot)||document.createElement("a"),wt=i("preprendIcon"),Vt=document.getElementById(wt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const It=I.element;p(It),A(it,ot);const se=y();_(Vt,wt),It.append(Vt,et,it,se),document.body.appendChild(It)}c?(et.innerText="Preview backend disconnected.",Vt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Vt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,et.innerText="Preview backend running in this workspace."),et.setAttribute("id",G)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function N1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function D1(){const s=Dh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function O1(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function M1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function V1(){const s=Tn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function U1(){return!D1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L1(){try{return typeof indexedDB=="object"}catch{return!1}}function P1(){return new Promise((s,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="FirebaseError";class Os extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=k1,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fu.prototype.create)}}class fu{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?z1(c,r):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new Os(l,p,r)}}function z1(s,t){return s.replace(j1,(i,r)=>{const l=t[r];return l!=null?String(l):`<${r}?>`})}const j1=/\{\$([^}]+)}/g;function B1(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function _a(s,t){if(s===t)return!0;const i=Object.keys(s),r=Object.keys(t);for(const l of i){if(!r.includes(l))return!1;const c=s[l],d=t[l];if(mv(c)&&mv(d)){if(!_a(c,d))return!1}else if(c!==d)return!1}for(const l of r)if(!i.includes(l))return!1;return!0}function mv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(s){const t=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function q1(s,t){const i=new H1(s,t);return i.subscribe.bind(i)}class H1{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,r){let l;if(t===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");F1(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:r},l.next===void 0&&(l.next=Wd),l.error===void 0&&(l.error=Wd),l.complete===void 0&&(l.complete=Wd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F1(s,t){if(typeof s!="object"||s===null)return!1;for(const i of t)if(i in s&&typeof s[i]=="function")return!0;return!1}function Wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(s){return s&&s._delegate?s._delegate:s}class va{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new w1;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Y1(t))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:l});r.resolve(c)}catch{}}}}clearInstance(t=da){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=da){return this.instances.has(t)}getOptions(t=da){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&d.resolve(l)}return l}onInit(t,i){const r=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(r)??new Set;l.add(t),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&t(c,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const l of r)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q1(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=da){return this.component?this.component.multipleInstances?t:da:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q1(s){return s===da?void 0:s}function Y1(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new G1(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ft||(Ft={}));const X1={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},$1=Ft.INFO,Z1={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},J1=(s,t,...i)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),l=Z1[t];if(l)console[l](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Lm{constructor(t){this.name=t,this._logLevel=$1,this._logHandler=J1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?X1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...t),this._logHandler(this,Ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...t),this._logHandler(this,Ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...t),this._logHandler(this,Ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...t),this._logHandler(this,Ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...t),this._logHandler(this,Ft.ERROR,...t)}}const W1=(s,t)=>t.some(i=>s instanceof i);let gv,pv;function tb(){return gv||(gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eb(){return pv||(pv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W0=new WeakMap,cm=new WeakMap,tE=new WeakMap,tm=new WeakMap,Pm=new WeakMap;function nb(s){const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{i(Er(s.result)),l()},d=()=>{r(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",d)});return t.then(i=>{i instanceof IDBCursor&&W0.set(i,s)}).catch(()=>{}),Pm.set(t,s),t}function ib(s){if(cm.has(s))return;const t=new Promise((i,r)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{i(),l()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});cm.set(s,t)}let hm={get(s,t,i){if(s instanceof IDBTransaction){if(t==="done")return cm.get(s);if(t==="objectStoreNames")return s.objectStoreNames||tE.get(s);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Er(s[t])},set(s,t,i){return s[t]=i,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function sb(s){hm=s(hm)}function rb(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=s.call(em(this),t,...i);return tE.set(r,t.sort?t.sort():[t]),Er(r)}:eb().includes(s)?function(...t){return s.apply(em(this),t),Er(W0.get(this))}:function(...t){return Er(s.apply(em(this),t))}}function ab(s){return typeof s=="function"?rb(s):(s instanceof IDBTransaction&&ib(s),W1(s,tb())?new Proxy(s,hm):s)}function Er(s){if(s instanceof IDBRequest)return nb(s);if(tm.has(s))return tm.get(s);const t=ab(s);return t!==s&&(tm.set(s,t),Pm.set(t,s)),t}const em=s=>Pm.get(s);function ob(s,t,{blocked:i,upgrade:r,blocking:l,terminated:c}={}){const d=indexedDB.open(s,t),p=Er(d);return r&&d.addEventListener("upgradeneeded",_=>{r(Er(d.result),_.oldVersion,_.newVersion,Er(d.transaction),_)}),i&&d.addEventListener("blocked",_=>i(_.oldVersion,_.newVersion,_)),p.then(_=>{c&&_.addEventListener("close",()=>c()),l&&_.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const lb=["get","getKey","getAll","getAllKeys","count"],ub=["put","add","delete","clear"],nm=new Map;function yv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(nm.get(t))return nm.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,l=ub.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(l||lb.includes(i)))return;const c=async function(d,...p){const _=this.transaction(d,l?"readwrite":"readonly");let y=_.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[i](...p),l&&_.done]))[0]};return nm.set(t,c),c}sb(s=>({...s,get:(t,i,r)=>yv(t,i)||s.get(t,i,r),has:(t,i)=>!!yv(t,i)||s.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(hb(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function hb(s){return s.getComponent()?.type==="VERSION"}const fm="@firebase/app",_v="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new Lm("@firebase/app"),fb="@firebase/app-compat",db="@firebase/analytics-compat",mb="@firebase/analytics",gb="@firebase/app-check-compat",pb="@firebase/app-check",yb="@firebase/auth",_b="@firebase/auth-compat",vb="@firebase/database",Eb="@firebase/data-connect",Tb="@firebase/database-compat",Ab="@firebase/functions",Sb="@firebase/functions-compat",bb="@firebase/installations",wb="@firebase/installations-compat",Rb="@firebase/messaging",Ib="@firebase/messaging-compat",Cb="@firebase/performance",Nb="@firebase/performance-compat",Db="@firebase/remote-config",xb="@firebase/remote-config-compat",Ob="@firebase/storage",Mb="@firebase/storage-compat",Vb="@firebase/firestore",Ub="@firebase/ai",Lb="@firebase/firestore-compat",Pb="firebase",kb="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="[DEFAULT]",zb={[fm]:"fire-core",[fb]:"fire-core-compat",[mb]:"fire-analytics",[db]:"fire-analytics-compat",[pb]:"fire-app-check",[gb]:"fire-app-check-compat",[yb]:"fire-auth",[_b]:"fire-auth-compat",[vb]:"fire-rtdb",[Eb]:"fire-data-connect",[Tb]:"fire-rtdb-compat",[Ab]:"fire-fn",[Sb]:"fire-fn-compat",[bb]:"fire-iid",[wb]:"fire-iid-compat",[Rb]:"fire-fcm",[Ib]:"fire-fcm-compat",[Cb]:"fire-perf",[Nb]:"fire-perf-compat",[Db]:"fire-rc",[xb]:"fire-rc-compat",[Ob]:"fire-gcs",[Mb]:"fire-gcs-compat",[Vb]:"fire-fst",[Lb]:"fire-fst-compat",[Ub]:"fire-vertex","fire-js":"fire-js",[Pb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Map,jb=new Map,mm=new Map;function vv(s,t){try{s.container.addComponent(t)}catch(i){Cs.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,i)}}function No(s){const t=s.name;if(mm.has(t))return Cs.debug(`There were multiple attempts to register component ${t}.`),!1;mm.set(t,s);for(const i of ch.values())vv(i,s);for(const i of jb.values())vv(i,s);return!0}function km(s,t){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(t)}function bi(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new fu("app","Firebase",Bb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(t,i,r){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=kb;function eE(s,t={}){let i=s;typeof t!="object"&&(t={name:t});const r={name:dm,automaticDataCollectionEnabled:!0,...t},l=r.name;if(typeof l!="string"||!l)throw Tr.create("bad-app-name",{appName:String(l)});if(i||(i=X0()),!i)throw Tr.create("no-options");const c=ch.get(l);if(c){if(_a(i,c.options)&&_a(r,c.config))return c;throw Tr.create("duplicate-app",{appName:l})}const d=new K1(l);for(const _ of mm.values())d.addComponent(_);const p=new qb(i,r,d);return ch.set(l,p),p}function nE(s=dm){const t=ch.get(s);if(!t&&s===dm&&X0())return eE();if(!t)throw Tr.create("no-app",{appName:s});return t}function Ar(s,t,i){let r=zb[s]??s;i&&(r+=`-${i}`);const l=r.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${r}" with version "${t}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Cs.warn(d.join(" "));return}No(new va(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="firebase-heartbeat-database",Fb=1,eu="firebase-heartbeat-store";let im=null;function iE(){return im||(im=ob(Hb,Fb,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(eu)}catch(i){console.warn(i)}}}}).catch(s=>{throw Tr.create("idb-open",{originalErrorMessage:s.message})})),im}async function Gb(s){try{const i=(await iE()).transaction(eu),r=await i.objectStore(eu).get(sE(s));return await i.done,r}catch(t){if(t instanceof Os)Cs.warn(t.message);else{const i=Tr.create("idb-get",{originalErrorMessage:t?.message});Cs.warn(i.message)}}}async function Ev(s,t){try{const r=(await iE()).transaction(eu,"readwrite");await r.objectStore(eu).put(t,sE(s)),await r.done}catch(i){if(i instanceof Os)Cs.warn(i.message);else{const r=Tr.create("idb-set",{originalErrorMessage:i?.message});Cs.warn(r.message)}}}function sE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=1024,Yb=30;class Kb{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new $b(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Tv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>Yb){const l=Zb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Cs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Tv(),{heartbeatsToSend:i,unsentEntries:r}=Xb(this._heartbeatsCache.heartbeats),l=uh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Cs.warn(t),""}}}function Tv(){return new Date().toISOString().substring(0,10)}function Xb(s,t=Qb){const i=[];let r=s.slice();for(const l of s){const c=i.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),Av(i)>t){c.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),Av(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class $b{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return L1()?P1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await Gb(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ev(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ev(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Av(s){return uh(JSON.stringify({version:2,heartbeats:s})).length}function Zb(s){if(s.length===0)return-1;let t=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(s){No(new va("platform-logger",t=>new cb(t),"PRIVATE")),No(new va("heartbeat",t=>new Kb(t),"PRIVATE")),Ar(fm,_v,s),Ar(fm,_v,"esm2020"),Ar("fire-js","")}Jb("");var Wb="firebase",tw="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar(Wb,tw,"app");function rE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ew=rE,aE=new fu("auth","Firebase",rE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Lm("@firebase/auth");function nw(s,...t){hh.logLevel<=Ft.WARN&&hh.warn(`Auth (${ko}): ${s}`,...t)}function Wc(s,...t){hh.logLevel<=Ft.ERROR&&hh.error(`Auth (${ko}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(s,...t){throw jm(s,...t)}function Ri(s,...t){return jm(s,...t)}function zm(s,t,i){const r={...ew(),[t]:i};return new fu("auth","Firebase",r).create(t,{appName:s.name})}function pa(s){return zm(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iw(s,t,i){const r=i;if(!(t instanceof r))throw r.name!==t.constructor.name&&Ki(s,"argument-error"),zm(s,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jm(s,...t){if(typeof s!="string"){const i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return aE.create(s,...t)}function xt(s,t,...i){if(!s)throw jm(t,...i)}function Rs(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Wc(t),new Error(t)}function Ns(s,t){s||Rs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(){return typeof self<"u"&&self.location?.href||""}function sw(){return Sv()==="http:"||Sv()==="https:"}function Sv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sw()||O1()||"connection"in navigator)?navigator.onLine:!0}function aw(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(t,i){this.shortDelay=t,this.longDelay=i,Ns(i>t,"Short delay should be less than long delay!"),this.isMobile=N1()||M1()}get(){return rw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(s,t){Ns(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{static initialize(t,i,r){this.fetchImpl=t,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uw=new mu(3e4,6e4);function qm(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function zo(s,t,i,r,l={}){return lE(s,l,async()=>{let c={},d={};r&&(t==="GET"?d=r:c={body:JSON.stringify(r)});const p=du({key:s.config.apiKey,...d}).slice(1),_=await s._getAdditionalHeaders();_["Content-Type"]="application/json",s.languageCode&&(_["X-Firebase-Locale"]=s.languageCode);const y={method:t,headers:_,...c};return x1()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Po(s.emulatorConfig.host)&&(y.credentials="include"),oE.fetch()(await uE(s,s.config.apiHost,i,p),y)})}async function lE(s,t,i){s._canInitEmulator=!1;const r={...ow,...t};try{const l=new hw(s),c=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Qc(s,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[_,y]=p.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qc(s,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw Qc(s,"email-already-in-use",d);if(_==="USER_DISABLED")throw Qc(s,"user-disabled",d);const A=r[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw zm(s,A,y);Ki(s,A)}}catch(l){if(l instanceof Os)throw l;Ki(s,"network-request-failed",{message:String(l)})}}async function cw(s,t,i,r,l={}){const c=await zo(s,t,i,r,l);return"mfaPendingCredential"in c&&Ki(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function uE(s,t,i,r){const l=`${t}${i}?${r}`,c=s,d=c.config.emulator?Bm(s.config,l):`${s.config.apiScheme}://${l}`;return lw.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class hw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(Ri(this.auth,"network-request-failed")),uw.get())})}}function Qc(s,t,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const l=Ri(s,t,r);return l.customData._tokenResponse=i,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(s,t){return zo(s,"POST","/v1/accounts:delete",t)}async function fh(s,t){return zo(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function dw(s,t=!1){const i=tn(s),r=await i.getIdToken(t),l=Hm(r);xt(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:r,authTime:Xl(sm(l.auth_time)),issuedAtTime:Xl(sm(l.iat)),expirationTime:Xl(sm(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function sm(s){return Number(s)*1e3}function Hm(s){const[t,i,r]=s.split(".");if(t===void 0||i===void 0||r===void 0)return Wc("JWT malformed, contained fewer than 3 sections"),null;try{const l=Y0(i);return l?JSON.parse(l):(Wc("Failed to decode base64 JWT payload"),null)}catch(l){return Wc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function bv(s){const t=Hm(s);return xt(t,"internal-error"),xt(typeof t.exp<"u","internal-error"),xt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(s,t,i=!1){if(i)return t;try{return await t}catch(r){throw r instanceof Os&&mw(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function mw({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xl(this.lastLoginAt),this.creationTime=Xl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dh(s){const t=s.auth,i=await s.getIdToken(),r=await nu(s,fh(t,{idToken:i}));xt(r?.users.length,t,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const c=l.providerUserInfo?.length?cE(l.providerUserInfo):[],d=yw(s.providerData,c),p=s.isAnonymous,_=!(s.email&&l.passwordHash)&&!d?.length,y=p?_:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new pm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,A)}async function pw(s){const t=tn(s);await dh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function yw(s,t){return[...s.filter(r=>!t.some(l=>l.providerId===r.providerId)),...t]}function cE(s){return s.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _w(s,t){const i=await lE(s,{},async()=>{const r=du({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,d=await uE(s,l,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:p,body:r};return s.emulatorConfig&&Po(s.emulatorConfig.host)&&(_.credentials="include"),oE.fetch()(d,_)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function vw(s,t){return zo(s,"POST","/v2/accounts:revokeToken",qm(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){xt(t.idToken,"internal-error"),xt(typeof t.idToken<"u","internal-error"),xt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):bv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){xt(t.length!==0,"internal-error");const i=bv(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(xt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:r,refreshToken:l,expiresIn:c}=await _w(t,i);this.updateTokensAndExpiration(r,l,Number(c))}updateTokensAndExpiration(t,i,r){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,i){const{refreshToken:r,accessToken:l,expirationTime:c}=i,d=new wo;return r&&(xt(typeof r=="string","internal-error",{appName:t}),d.refreshToken=r),l&&(xt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(xt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new wo,this.toJSON())}_performRefresh(){return Rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(s,t){xt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class wi{constructor({uid:t,auth:i,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new gw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new pm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await nu(this,this.stsTokenManager.getToken(this.auth,t));return xt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return dw(this,t)}reload(){return pw(this)}_assign(t){this!==t&&(xt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new wi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){xt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),i&&await dh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bi(this.auth.app))return Promise.reject(pa(this.auth));const t=await this.getIdToken();return await nu(this,fw(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const r=i.displayName??void 0,l=i.email??void 0,c=i.phoneNumber??void 0,d=i.photoURL??void 0,p=i.tenantId??void 0,_=i._redirectEventId??void 0,y=i.createdAt??void 0,A=i.lastLoginAt??void 0,{uid:S,emailVerified:I,isAnonymous:G,providerData:et,stsTokenManager:ot}=i;xt(S&&ot,t,"internal-error");const it=wo.fromJSON(this.name,ot);xt(typeof S=="string",t,"internal-error"),mr(r,t.name),mr(l,t.name),xt(typeof I=="boolean",t,"internal-error"),xt(typeof G=="boolean",t,"internal-error"),mr(c,t.name),mr(d,t.name),mr(p,t.name),mr(_,t.name),mr(y,t.name),mr(A,t.name);const wt=new wi({uid:S,auth:t,email:l,emailVerified:I,displayName:r,isAnonymous:G,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:it,createdAt:y,lastLoginAt:A});return et&&Array.isArray(et)&&(wt.providerData=et.map(Vt=>({...Vt}))),_&&(wt._redirectEventId=_),wt}static async _fromIdTokenResponse(t,i,r=!1){const l=new wo;l.updateFromServerResponse(i);const c=new wi({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:r});return await dh(c),c}static async _fromGetAccountInfoResponse(t,i,r){const l=i.users[0];xt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?cE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,p=new wo;p.updateFromIdToken(r);const _=new wi({uid:l.localId,auth:t,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new pm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(_,y),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=new Map;function Is(s){Ns(s instanceof Function,"Expected a class definition");let t=wv.get(s);return t?(Ns(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,wv.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}hE.type="NONE";const Rv=hE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(s,t,i){return`firebase:${s}:${t}:${i}`}class Ro{constructor(t,i,r){this.persistence=t,this.auth=i,this.userKey=r;const{config:l,name:c}=this.auth;this.fullUserKey=th(this.userKey,l.apiKey,c),this.fullPersistenceKey=th("persistence",l.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await fh(this.auth,{idToken:t}).catch(()=>{});return i?wi._fromGetAccountInfoResponse(this.auth,i,t):null}return wi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,r="authUser"){if(!i.length)return new Ro(Is(Rv),t,r);const l=(await Promise.all(i.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||Is(Rv);const d=th(r,t.config.apiKey,t.name);let p=null;for(const y of i)try{const A=await y._get(d);if(A){let S;if(typeof A=="string"){const I=await fh(t,{idToken:A}).catch(()=>{});if(!I)break;S=await wi._fromGetAccountInfoResponse(t,I,A)}else S=wi._fromJSON(t,A);y!==c&&(p=S),c=y;break}}catch{}const _=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!_.length?new Ro(c,t,r):(c=_[0],p&&await c._set(d,p.toJSON()),await Promise.all(i.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Ro(c,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(gE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(fE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(yE(t))return"Blackberry";if(_E(t))return"Webos";if(dE(t))return"Safari";if((t.includes("chrome/")||mE(t))&&!t.includes("edge/"))return"Chrome";if(pE(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function fE(s=Tn()){return/firefox\//i.test(s)}function dE(s=Tn()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function mE(s=Tn()){return/crios\//i.test(s)}function gE(s=Tn()){return/iemobile/i.test(s)}function pE(s=Tn()){return/android/i.test(s)}function yE(s=Tn()){return/blackberry/i.test(s)}function _E(s=Tn()){return/webos/i.test(s)}function Fm(s=Tn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Ew(s=Tn()){return Fm(s)&&!!window.navigator?.standalone}function Tw(){return V1()&&document.documentMode===10}function vE(s=Tn()){return Fm(s)||pE(s)||_E(s)||yE(s)||/windows phone/i.test(s)||gE(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(s,t=[]){let i;switch(s){case"Browser":i=Iv(Tn());break;case"Worker":i=`${Iv(Tn())}-${s}`;break;default:i=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${ko}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const r=c=>new Promise((d,p)=>{try{const _=t(c);d(_)}catch(_){p(_)}});r.onAbort=i,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const r of this.queue)await r(t),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sw(s,t={}){return zo(s,"GET","/v2/passwordPolicy",qm(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=6;class ww{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??bw,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=t.length>=r),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let l=0;l<t.length;l++)r=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,i,r,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(t,i,r,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cv(this),this.idTokenSubscription=new Cv(this),this.beforeStateQueue=new Aw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Is(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ro.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await fh(this,{idToken:t}),r=await wi._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(bi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=r?._redirectEventId,p=await this.tryRedirectSignIn(t);(!c||c===d)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return xt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await dh(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=aw()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(bi(this.app))return Promise.reject(pa(this));const i=t?tn(t):null;return i&&xt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&xt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return bi(this.app)?Promise.reject(pa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return bi(this.app)?Promise.reject(pa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Is(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Sw(this),i=new ww(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new fu("auth","Firebase",t())}onAuthStateChanged(t,i,r){return this.registerStateListener(this.authStateSubscription,t,i,r)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,r){return this.registerStateListener(this.idTokenSubscription,t,i,r)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await vw(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const r=await this.getOrInitRedirectPersistenceManager(i);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Is(t)||this._popupRedirectResolver;xt(i,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[Is(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,r,l){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(xt(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof i=="function"){const _=t.addObserver(i,r,l);return()=>{d=!0,_()}}else{const _=t.addObserver(i);return()=>{d=!0,_()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return xt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=EE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if(bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&nw(`Error while retrieving App Check token: ${t.error}`),t?.token}}function xh(s){return tn(s)}class Cv{constructor(t){this.auth=t,this.observer=null,this.addObserver=q1(i=>this.observer=i)}get next(){return xt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Iw(s){Gm=s}function Cw(s){return Gm.loadJS(s)}function Nw(){return Gm.gapiScript}function Dw(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(s,t){const i=km(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),c=i.getOptions();if(_a(c,t??{}))return l;Ki(l,"already-initialized")}return i.initialize({options:t})}function Ow(s,t){const i=t?.persistence||[],r=(Array.isArray(i)?i:[i]).map(Is);t?.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t?.popupRedirectResolver)}function Mw(s,t,i){const r=xh(s);xt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const l=!1,c=TE(t),{host:d,port:p}=Vw(t),_=p===null?"":`:${p}`,y={url:`${c}//${d}${_}/`},A=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){xt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xt(_a(y,r.config.emulator)&&_a(A,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=A,r.settings.appVerificationDisabledForTesting=!0,Po(d)?(Z0(`${c}//${d}${_}`),J0("Auth",!0)):Uw()}function TE(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function Vw(s){const t=TE(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const c=l[1];return{host:c,port:Nv(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:Nv(d)}}}function Nv(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function Uw(){function s(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Rs("not implemented")}_getIdTokenResponse(t){return Rs("not implemented")}_linkToIdToken(t,i){return Rs("not implemented")}_getReauthenticationResolver(t){return Rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(s,t){return cw(s,"POST","/v1/accounts:signInWithIdp",qm(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="http://localhost";class Ea extends AE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new Ea(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Ki("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:l,...c}=i;if(!r||!l)return null;const d=new Ea(r,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const i=this.buildRequest();return Io(t,i)}_linkToIdToken(t,i){const r=this.buildRequest();return r.idToken=i,Io(t,r)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Io(t,i)}buildRequest(){const t={requestUri:Lw,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=du(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends Qm{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends gu{constructor(){super("facebook.com")}static credential(t){return Ea._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return pr.credentialFromTaggedObject(t)}static credentialFromError(t){return pr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return pr.credential(t.oauthAccessToken)}catch{return null}}}pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Ea._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return ws.credentialFromTaggedObject(t)}static credentialFromError(t){return ws.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return ws.credential(i,r)}catch{return null}}}ws.GOOGLE_SIGN_IN_METHOD="google.com";ws.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends gu{constructor(){super("github.com")}static credential(t){return Ea._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return yr.credentialFromTaggedObject(t)}static credentialFromError(t){return yr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return yr.credential(t.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends gu{constructor(){super("twitter.com")}static credential(t,i){return Ea._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return _r.credentialFromTaggedObject(t)}static credentialFromError(t){return _r.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return _r.credential(i,r)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,r,l=!1){const c=await wi._fromIdTokenResponse(t,r,l),d=Dv(r);return new Do({user:c,providerId:d,_tokenResponse:r,operationType:i})}static async _forOperation(t,i,r){await t._updateTokensIfNecessary(r,!0);const l=Dv(r);return new Do({user:t,providerId:l,_tokenResponse:r,operationType:i})}}function Dv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends Os{constructor(t,i,r,l){super(i.code,i.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,mh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,i,r,l){return new mh(t,i,r,l)}}function SE(s,t,i,r){return(t==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?mh._fromErrorAndOperation(s,c,t,r):c})}async function Pw(s,t,i=!1){const r=await nu(s,t._linkToIdToken(s.auth,await s.getIdToken()),i);return Do._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kw(s,t,i=!1){const{auth:r}=s;if(bi(r.app))return Promise.reject(pa(r));const l="reauthenticate";try{const c=await nu(s,SE(r,l,t,s),i);xt(c.idToken,r,"internal-error");const d=Hm(c.idToken);xt(d,r,"internal-error");const{sub:p}=d;return xt(s.uid===p,r,"user-mismatch"),Do._forOperation(s,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Ki(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zw(s,t,i=!1){if(bi(s.app))return Promise.reject(pa(s));const r="signIn",l=await SE(s,r,t),c=await Do._fromIdTokenResponse(s,r,l);return i||await s._updateCurrentUser(c.user),c}function jw(s,t,i,r){return tn(s).onIdTokenChanged(t,i,r)}function Bw(s,t,i){return tn(s).beforeAuthStateChanged(t,i)}function qw(s,t,i,r){return tn(s).onAuthStateChanged(t,i,r)}const gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=1e3,Fw=10;class wE extends bE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),l=this.localCache[i];r!==l&&t(i,l,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((d,p,_)=>{this.notifyListeners(d,_)});return}const r=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(r);!i&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);Tw()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,Fw):l()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},Hw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}wE.type="LOCAL";const Gw=wE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE extends bE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}RE.type="SESSION";const IE=RE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const r=new Oh(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:r,eventType:l,data:c}=i.data,d=this.handlersMap[l];if(!d?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(d).map(async y=>y(i.origin,c)),_=await Qw(p);i.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:_})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(s="",t=10){let i="";for(let r=0;r<t;r++)i+=Math.floor(Math.random()*10);return s+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,_)=>{const y=Ym("",20);l.port1.start();const A=setTimeout(()=>{_(new Error("unsupported_event"))},r);d={messageChannel:l,onMessage(S){const I=S;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(A),c=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(I.data.response);break;default:clearTimeout(A),clearTimeout(c),_(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:y,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(){return window}function Kw(s){Hi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(){return typeof Hi().WorkerGlobalScope<"u"&&typeof Hi().importScripts=="function"}async function Xw(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $w(){return navigator?.serviceWorker?.controller||null}function Zw(){return CE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="firebaseLocalStorageDb",Jw=1,ph="firebaseLocalStorage",DE="fbase_key";class pu{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Mh(s,t){return s.transaction([ph],t?"readwrite":"readonly").objectStore(ph)}function Ww(){const s=indexedDB.deleteDatabase(NE);return new pu(s).toPromise()}function ym(){const s=indexedDB.open(NE,Jw);return new Promise((t,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(ph,{keyPath:DE})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(ph)?t(r):(r.close(),await Ww(),t(await ym()))})})}async function xv(s,t,i){const r=Mh(s,!0).put({[DE]:t,value:i});return new pu(r).toPromise()}async function tR(s,t){const i=Mh(s,!1).get(t),r=await new pu(i).toPromise();return r===void 0?null:r.value}function Ov(s,t){const i=Mh(s,!0).delete(t);return new pu(i).toPromise()}const eR=800,nR=3;class xE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ym(),this.db)}async _withRetries(t){let i=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(i++>nR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(Zw()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Xw(),!this.activeServiceWorker)return;this.sender=new Yw(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||$w()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ym();return await xv(t,gh,"1"),await Ov(t,gh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>xv(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(r=>tR(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ov(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=Mh(l,!1).getAll();return new pu(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xE.type="LOCAL";const iR=xE;new mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(s,t){return t?Is(t):(xt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends AE{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Io(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Io(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Io(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function sR(s){return zw(s.auth,new Km(s),s.bypassAuthState)}function rR(s){const{auth:t,user:i}=s;return xt(i,t,"internal-error"),kw(i,new Km(s),s.bypassAuthState)}async function aR(s){const{auth:t,user:i}=s;return xt(i,t,"internal-error"),Pw(i,new Km(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(t,i,r,l,c=!1){this.auth=t,this.resolver=r,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:r,postBody:l,tenantId:c,error:d,type:p}=t;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:i,sessionId:r,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(_))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return sR;case"linkViaPopup":case"linkViaRedirect":return aR;case"reauthViaPopup":case"reauthViaRedirect":return rR;default:Ki(this.auth,"internal-error")}}resolve(t){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new mu(2e3,1e4);async function lR(s,t,i){if(bi(s.app))return Promise.reject(Ri(s,"operation-not-supported-in-this-environment"));const r=xh(s);iw(s,t,Qm);const l=OE(r,i);return new ma(r,"signInViaPopup",t,l).executeNotNull()}class ma extends ME{constructor(t,i,r,l,c){super(t,i,l,c),this.provider=r,this.authWindow=null,this.pollId=null,ma.currentPopupAction&&ma.currentPopupAction.cancel(),ma.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return xt(t,this.auth,"internal-error"),t}async onExecution(){Ns(this.filter.length===1,"Popup operations only handle one event");const t=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ma.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,oR.get())};t()}}ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="pendingRedirect",eh=new Map;class cR extends ME{constructor(t,i,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let t=eh.get(this.auth._key());if(!t){try{const r=await hR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(i){t=()=>Promise.reject(i)}eh.set(this.auth._key(),t)}return this.bypassAuthState||eh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hR(s,t){const i=mR(t),r=dR(s);if(!await r._isAvailable())return!1;const l=await r._get(i)==="true";return await r._remove(i),l}function fR(s,t){eh.set(s._key(),t)}function dR(s){return Is(s._redirectPersistence)}function mR(s){return th(uR,s.config.apiKey,s.name)}async function gR(s,t,i=!1){if(bi(s.app))return Promise.reject(pa(s));const r=xh(s),l=OE(r,t),d=await new cR(r,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=600*1e3;class yR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(i=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!_R(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!VE(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";i.onError(Ri(this.auth,r))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const r=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=pR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mv(t))}saveEventToCache(t){this.cachedEventUids.add(Mv(t)),this.lastProcessedEventTime=Date.now()}}function Mv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function VE({type:s,error:t}){return s==="unknown"&&t?.code==="auth/no-auth-event"}function _R(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VE(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(s,t={}){return zo(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TR=/^https?/;async function AR(s){if(s.config.emulator)return;const{authorizedDomains:t}=await vR(s);for(const i of t)try{if(SR(i))return}catch{}Ki(s,"unauthorized-domain")}function SR(s){const t=gm(),{protocol:i,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===r}if(!TR.test(i))return!1;if(ER.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new mu(3e4,6e4);function Vv(){const s=Hi().___jsl;if(s?.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function wR(s){return new Promise((t,i)=>{function r(){Vv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Vv(),i(Ri(s,"network-request-failed"))},timeout:bR.get()})}if(Hi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Hi().gapi?.load)r();else{const l=Dw("iframefcb");return Hi()[l]=()=>{gapi.load?r():i(Ri(s,"network-request-failed"))},Cw(`${Nw()}?onload=${l}`).catch(c=>i(c))}}).catch(t=>{throw nh=null,t})}let nh=null;function RR(s){return nh=nh||wR(s),nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=new mu(5e3,15e3),CR="__/auth/iframe",NR="emulator/auth/iframe",DR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OR(s){const t=s.config;xt(t.authDomain,s,"auth-domain-config-required");const i=t.emulator?Bm(t,NR):`https://${s.config.authDomain}/${CR}`,r={apiKey:t.apiKey,appName:s.name,v:ko},l=xR.get(s.config.apiHost);l&&(r.eid=l);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${i}?${du(r).slice(1)}`}async function MR(s){const t=await RR(s),i=Hi().gapi;return xt(i,s,"internal-error"),t.open({where:document.body,url:OR(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DR,dontclear:!0},r=>new Promise(async(l,c)=>{await r.restyle({setHideOnLeave:!1});const d=Ri(s,"network-request-failed"),p=Hi().setTimeout(()=>{c(d)},IR.get());function _(){Hi().clearTimeout(p),l(r)}r.ping(_).then(_,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UR=500,LR=600,PR="_blank",kR="http://localhost";class Uv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zR(s,t,i,r=UR,l=LR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const _={...VR,width:r.toString(),height:l.toString(),top:c,left:d},y=Tn().toLowerCase();i&&(p=mE(y)?PR:i),fE(y)&&(t=t||kR,_.scrollbars="yes");const A=Object.entries(_).reduce((I,[G,et])=>`${I}${G}=${et},`,"");if(Ew(y)&&p!=="_self")return jR(t||"",p),new Uv(null);const S=window.open(t||"",p,A);xt(S,s,"popup-blocked");try{S.focus()}catch{}return new Uv(S)}function jR(s,t){const i=document.createElement("a");i.href=s,i.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="__/auth/handler",qR="emulator/auth/handler",HR=encodeURIComponent("fac");async function Lv(s,t,i,r,l,c){xt(s.config.authDomain,s,"auth-domain-config-required"),xt(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:ko,eventId:l};if(t instanceof Qm){t.setDefaultLanguage(s.languageCode),d.providerId=t.providerId||"",B1(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,S]of Object.entries({}))d[A]=S}if(t instanceof gu){const A=t.getScopes().filter(S=>S!=="");A.length>0&&(d.scopes=A.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const A of Object.keys(p))p[A]===void 0&&delete p[A];const _=await s._getAppCheckToken(),y=_?`#${HR}=${encodeURIComponent(_)}`:"";return`${FR(s)}?${du(p).slice(1)}${y}`}function FR({config:s}){return s.emulator?Bm(s,qR):`https://${s.authDomain}/${BR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="webStorageSupport";class GR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IE,this._completeRedirectFn=gR,this._overrideRedirectResult=fR}async _openPopup(t,i,r,l){Ns(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Lv(t,i,r,gm(),l);return zR(t,c,Ym())}async _openRedirect(t,i,r,l){await this._originValidation(t);const c=await Lv(t,i,r,gm(),l);return Kw(c),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:c}=this.eventManagers[i];return l?Promise.resolve(l):(Ns(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(t);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(t){const i=await MR(t),r=new yR(t);return i.register("authEvent",l=>(xt(l?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=i,r}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(rm,{type:rm},l=>{const c=l?.[0]?.[rm];c!==void 0&&i(!!c),Ki(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=AR(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return vE()||dE()||Fm()}}const QR=GR;var Pv="@firebase/auth",kv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){xt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XR(s){No(new va("auth",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=r.options;xt(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const _={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EE(s)},y=new Rw(r,l,c,_);return Ow(y,i),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,r)=>{t.getProvider("auth-internal").initialize()})),No(new va("auth-internal",t=>{const i=xh(t.getProvider("auth").getImmediate());return(r=>new YR(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ar(Pv,kv,KR(s)),Ar(Pv,kv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=300,ZR=$0("authIdTokenMaxAge")||$R;let zv=null;const JR=s=>async t=>{const i=t&&await t.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>ZR)return;const l=i?.token;zv!==l&&(zv=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function WR(s=nE()){const t=km(s,"auth");if(t.isInitialized())return t.getImmediate();const i=xw(s,{popupRedirectResolver:QR,persistence:[iR,Gw,IE]}),r=$0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=JR(c.toString());Bw(i,d,()=>d(i.currentUser)),jw(i,p=>d(p))}}const l=K0("auth");return l&&Mw(i,`http://${l}`),i}function t2(){return document.getElementsByTagName("head")?.[0]??document}Iw({loadJS(s){return new Promise((t,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=l=>{const c=Ri("internal-error");c.customData=l,i(c)},r.type="text/javascript",r.charset="UTF-8",t2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XR("Browser");var jv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sr,UE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(N,b){function C(){}C.prototype=b.prototype,N.F=b.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(V,O,P){for(var w=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)w[ve-2]=arguments[ve];return b.prototype[O].apply(V,w)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,i),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,b,C){C||(C=0);const V=Array(16);if(typeof b=="string")for(var O=0;O<16;++O)V[O]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(O=0;O<16;++O)V[O]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;b=N.g[0],C=N.g[1],O=N.g[2];let P=N.g[3],w;w=b+(P^C&(O^P))+V[0]+3614090360&4294967295,b=C+(w<<7&4294967295|w>>>25),w=P+(O^b&(C^O))+V[1]+3905402710&4294967295,P=b+(w<<12&4294967295|w>>>20),w=O+(C^P&(b^C))+V[2]+606105819&4294967295,O=P+(w<<17&4294967295|w>>>15),w=C+(b^O&(P^b))+V[3]+3250441966&4294967295,C=O+(w<<22&4294967295|w>>>10),w=b+(P^C&(O^P))+V[4]+4118548399&4294967295,b=C+(w<<7&4294967295|w>>>25),w=P+(O^b&(C^O))+V[5]+1200080426&4294967295,P=b+(w<<12&4294967295|w>>>20),w=O+(C^P&(b^C))+V[6]+2821735955&4294967295,O=P+(w<<17&4294967295|w>>>15),w=C+(b^O&(P^b))+V[7]+4249261313&4294967295,C=O+(w<<22&4294967295|w>>>10),w=b+(P^C&(O^P))+V[8]+1770035416&4294967295,b=C+(w<<7&4294967295|w>>>25),w=P+(O^b&(C^O))+V[9]+2336552879&4294967295,P=b+(w<<12&4294967295|w>>>20),w=O+(C^P&(b^C))+V[10]+4294925233&4294967295,O=P+(w<<17&4294967295|w>>>15),w=C+(b^O&(P^b))+V[11]+2304563134&4294967295,C=O+(w<<22&4294967295|w>>>10),w=b+(P^C&(O^P))+V[12]+1804603682&4294967295,b=C+(w<<7&4294967295|w>>>25),w=P+(O^b&(C^O))+V[13]+4254626195&4294967295,P=b+(w<<12&4294967295|w>>>20),w=O+(C^P&(b^C))+V[14]+2792965006&4294967295,O=P+(w<<17&4294967295|w>>>15),w=C+(b^O&(P^b))+V[15]+1236535329&4294967295,C=O+(w<<22&4294967295|w>>>10),w=b+(O^P&(C^O))+V[1]+4129170786&4294967295,b=C+(w<<5&4294967295|w>>>27),w=P+(C^O&(b^C))+V[6]+3225465664&4294967295,P=b+(w<<9&4294967295|w>>>23),w=O+(b^C&(P^b))+V[11]+643717713&4294967295,O=P+(w<<14&4294967295|w>>>18),w=C+(P^b&(O^P))+V[0]+3921069994&4294967295,C=O+(w<<20&4294967295|w>>>12),w=b+(O^P&(C^O))+V[5]+3593408605&4294967295,b=C+(w<<5&4294967295|w>>>27),w=P+(C^O&(b^C))+V[10]+38016083&4294967295,P=b+(w<<9&4294967295|w>>>23),w=O+(b^C&(P^b))+V[15]+3634488961&4294967295,O=P+(w<<14&4294967295|w>>>18),w=C+(P^b&(O^P))+V[4]+3889429448&4294967295,C=O+(w<<20&4294967295|w>>>12),w=b+(O^P&(C^O))+V[9]+568446438&4294967295,b=C+(w<<5&4294967295|w>>>27),w=P+(C^O&(b^C))+V[14]+3275163606&4294967295,P=b+(w<<9&4294967295|w>>>23),w=O+(b^C&(P^b))+V[3]+4107603335&4294967295,O=P+(w<<14&4294967295|w>>>18),w=C+(P^b&(O^P))+V[8]+1163531501&4294967295,C=O+(w<<20&4294967295|w>>>12),w=b+(O^P&(C^O))+V[13]+2850285829&4294967295,b=C+(w<<5&4294967295|w>>>27),w=P+(C^O&(b^C))+V[2]+4243563512&4294967295,P=b+(w<<9&4294967295|w>>>23),w=O+(b^C&(P^b))+V[7]+1735328473&4294967295,O=P+(w<<14&4294967295|w>>>18),w=C+(P^b&(O^P))+V[12]+2368359562&4294967295,C=O+(w<<20&4294967295|w>>>12),w=b+(C^O^P)+V[5]+4294588738&4294967295,b=C+(w<<4&4294967295|w>>>28),w=P+(b^C^O)+V[8]+2272392833&4294967295,P=b+(w<<11&4294967295|w>>>21),w=O+(P^b^C)+V[11]+1839030562&4294967295,O=P+(w<<16&4294967295|w>>>16),w=C+(O^P^b)+V[14]+4259657740&4294967295,C=O+(w<<23&4294967295|w>>>9),w=b+(C^O^P)+V[1]+2763975236&4294967295,b=C+(w<<4&4294967295|w>>>28),w=P+(b^C^O)+V[4]+1272893353&4294967295,P=b+(w<<11&4294967295|w>>>21),w=O+(P^b^C)+V[7]+4139469664&4294967295,O=P+(w<<16&4294967295|w>>>16),w=C+(O^P^b)+V[10]+3200236656&4294967295,C=O+(w<<23&4294967295|w>>>9),w=b+(C^O^P)+V[13]+681279174&4294967295,b=C+(w<<4&4294967295|w>>>28),w=P+(b^C^O)+V[0]+3936430074&4294967295,P=b+(w<<11&4294967295|w>>>21),w=O+(P^b^C)+V[3]+3572445317&4294967295,O=P+(w<<16&4294967295|w>>>16),w=C+(O^P^b)+V[6]+76029189&4294967295,C=O+(w<<23&4294967295|w>>>9),w=b+(C^O^P)+V[9]+3654602809&4294967295,b=C+(w<<4&4294967295|w>>>28),w=P+(b^C^O)+V[12]+3873151461&4294967295,P=b+(w<<11&4294967295|w>>>21),w=O+(P^b^C)+V[15]+530742520&4294967295,O=P+(w<<16&4294967295|w>>>16),w=C+(O^P^b)+V[2]+3299628645&4294967295,C=O+(w<<23&4294967295|w>>>9),w=b+(O^(C|~P))+V[0]+4096336452&4294967295,b=C+(w<<6&4294967295|w>>>26),w=P+(C^(b|~O))+V[7]+1126891415&4294967295,P=b+(w<<10&4294967295|w>>>22),w=O+(b^(P|~C))+V[14]+2878612391&4294967295,O=P+(w<<15&4294967295|w>>>17),w=C+(P^(O|~b))+V[5]+4237533241&4294967295,C=O+(w<<21&4294967295|w>>>11),w=b+(O^(C|~P))+V[12]+1700485571&4294967295,b=C+(w<<6&4294967295|w>>>26),w=P+(C^(b|~O))+V[3]+2399980690&4294967295,P=b+(w<<10&4294967295|w>>>22),w=O+(b^(P|~C))+V[10]+4293915773&4294967295,O=P+(w<<15&4294967295|w>>>17),w=C+(P^(O|~b))+V[1]+2240044497&4294967295,C=O+(w<<21&4294967295|w>>>11),w=b+(O^(C|~P))+V[8]+1873313359&4294967295,b=C+(w<<6&4294967295|w>>>26),w=P+(C^(b|~O))+V[15]+4264355552&4294967295,P=b+(w<<10&4294967295|w>>>22),w=O+(b^(P|~C))+V[6]+2734768916&4294967295,O=P+(w<<15&4294967295|w>>>17),w=C+(P^(O|~b))+V[13]+1309151649&4294967295,C=O+(w<<21&4294967295|w>>>11),w=b+(O^(C|~P))+V[4]+4149444226&4294967295,b=C+(w<<6&4294967295|w>>>26),w=P+(C^(b|~O))+V[11]+3174756917&4294967295,P=b+(w<<10&4294967295|w>>>22),w=O+(b^(P|~C))+V[2]+718787259&4294967295,O=P+(w<<15&4294967295|w>>>17),w=C+(P^(O|~b))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(O+(w<<21&4294967295|w>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+P&4294967295}r.prototype.v=function(N,b){b===void 0&&(b=N.length);const C=b-this.blockSize,V=this.C;let O=this.h,P=0;for(;P<b;){if(O==0)for(;P<=C;)l(this,N,P),P+=this.blockSize;if(typeof N=="string"){for(;P<b;)if(V[O++]=N.charCodeAt(P++),O==this.blockSize){l(this,V),O=0;break}}else for(;P<b;)if(V[O++]=N[P++],O==this.blockSize){l(this,V),O=0;break}}this.h=O,this.o+=b},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;b=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=b&255,b/=256;for(this.v(N),N=Array(16),b=0,C=0;C<4;++C)for(let V=0;V<32;V+=8)N[b++]=this.g[C]>>>V&255;return N};function c(N,b){var C=p;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=b(N)}function d(N,b){this.h=b;const C=[];let V=!0;for(let O=N.length-1;O>=0;O--){const P=N[O]|0;V&&P==b||(C[O]=P,V=!1)}this.g=C}var p={};function _(N){return-128<=N&&N<128?c(N,function(b){return new d([b|0],b<0?-1:0)}):new d([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return S;if(N<0)return it(y(-N));const b=[];let C=1;for(let V=0;N>=C;V++)b[V]=N/C|0,C*=4294967296;return new d(b,0)}function A(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return it(A(N.substring(1),b));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(b,8));let V=S;for(let P=0;P<N.length;P+=8){var O=Math.min(8,N.length-P);const w=parseInt(N.substring(P,P+O),b);O<8?(O=y(Math.pow(b,O)),V=V.j(O).add(y(w))):(V=V.j(C),V=V.add(y(w)))}return V}var S=_(0),I=_(1),G=_(16777216);s=d.prototype,s.m=function(){if(ot(this))return-it(this).m();let N=0,b=1;for(let C=0;C<this.g.length;C++){const V=this.i(C);N+=(V>=0?V:4294967296+V)*b,b*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(et(this))return"0";if(ot(this))return"-"+it(this).toString(N);const b=y(Math.pow(N,6));var C=this;let V="";for(;;){const O=se(C,b).g;C=wt(C,O.j(b));let P=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=O,et(C))return P+V;for(;P.length<6;)P="0"+P;V=P+V}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function et(N){if(N.h!=0)return!1;for(let b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function ot(N){return N.h==-1}s.l=function(N){return N=wt(this,N),ot(N)?-1:et(N)?0:1};function it(N){const b=N.g.length,C=[];for(let V=0;V<b;V++)C[V]=~N.g[V];return new d(C,~N.h).add(I)}s.abs=function(){return ot(this)?it(this):this},s.add=function(N){const b=Math.max(this.g.length,N.g.length),C=[];let V=0;for(let O=0;O<=b;O++){let P=V+(this.i(O)&65535)+(N.i(O)&65535),w=(P>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);V=w>>>16,P&=65535,w&=65535,C[O]=w<<16|P}return new d(C,C[C.length-1]&-2147483648?-1:0)};function wt(N,b){return N.add(it(b))}s.j=function(N){if(et(this)||et(N))return S;if(ot(this))return ot(N)?it(this).j(it(N)):it(it(this).j(N));if(ot(N))return it(this.j(it(N)));if(this.l(G)<0&&N.l(G)<0)return y(this.m()*N.m());const b=this.g.length+N.g.length,C=[];for(var V=0;V<2*b;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(let O=0;O<N.g.length;O++){const P=this.i(V)>>>16,w=this.i(V)&65535,ve=N.i(O)>>>16,Ue=N.i(O)&65535;C[2*V+2*O]+=w*Ue,Vt(C,2*V+2*O),C[2*V+2*O+1]+=P*Ue,Vt(C,2*V+2*O+1),C[2*V+2*O+1]+=w*ve,Vt(C,2*V+2*O+1),C[2*V+2*O+2]+=P*ve,Vt(C,2*V+2*O+2)}for(N=0;N<b;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=b;N<2*b;N++)C[N]=0;return new d(C,0)};function Vt(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function It(N,b){this.g=N,this.h=b}function se(N,b){if(et(b))throw Error("division by zero");if(et(N))return new It(S,S);if(ot(N))return b=se(it(N),b),new It(it(b.g),it(b.h));if(ot(b))return b=se(N,it(b)),new It(it(b.g),b.h);if(N.g.length>30){if(ot(N)||ot(b))throw Error("slowDivide_ only works with positive integers.");for(var C=I,V=b;V.l(N)<=0;)C=oe(C),V=oe(V);var O=Kt(C,1),P=Kt(V,1);for(V=Kt(V,2),C=Kt(C,2);!et(V);){var w=P.add(V);w.l(N)<=0&&(O=O.add(C),P=w),V=Kt(V,1),C=Kt(C,1)}return b=wt(N,O.j(b)),new It(O,b)}for(O=S;N.l(b)>=0;){for(C=Math.max(1,Math.floor(N.m()/b.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),P=y(C),w=P.j(b);ot(w)||w.l(N)>0;)C-=V,P=y(C),w=P.j(b);et(P)&&(P=I),O=O.add(P),N=wt(N,w)}return new It(O,N)}s.B=function(N){return se(this,N).h},s.and=function(N){const b=Math.max(this.g.length,N.g.length),C=[];for(let V=0;V<b;V++)C[V]=this.i(V)&N.i(V);return new d(C,this.h&N.h)},s.or=function(N){const b=Math.max(this.g.length,N.g.length),C=[];for(let V=0;V<b;V++)C[V]=this.i(V)|N.i(V);return new d(C,this.h|N.h)},s.xor=function(N){const b=Math.max(this.g.length,N.g.length),C=[];for(let V=0;V<b;V++)C[V]=this.i(V)^N.i(V);return new d(C,this.h^N.h)};function oe(N){const b=N.g.length+1,C=[];for(let V=0;V<b;V++)C[V]=N.i(V)<<1|N.i(V-1)>>>31;return new d(C,N.h)}function Kt(N,b){const C=b>>5;b%=32;const V=N.g.length-C,O=[];for(let P=0;P<V;P++)O[P]=b>0?N.i(P+C)>>>b|N.i(P+C+1)<<32-b:N.i(P+C);return new d(O,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,UE=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=A,Sr=d}).apply(typeof jv<"u"?jv:typeof self<"u"?self:typeof window<"u"?window:{});var Yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LE,Fl,PE,ih,_m,kE,zE,jE;(function(){var s,t=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yc=="object"&&Yc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=i(this);function l(u,m){if(m)t:{var v=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var k=u[T];if(!(k in v))break t;v=v[k]}u=u[u.length-1],T=v[u],m=m(T),m!=T&&m!=null&&t(v,u,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(m){var v=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&v.push([T,m[T]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function y(u,m,v){return y=_,y.apply(null,arguments)}function A(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function S(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(T,k,H){for(var rt=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)rt[Lt-2]=arguments[Lt];return m.prototype[k].apply(T,rt)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function G(u){const m=u.length;if(m>0){const v=Array(m);for(let T=0;T<m;T++)v[T]=u[T];return v}return[]}function et(u,m){for(let T=1;T<arguments.length;T++){const k=arguments[T];var v=typeof k;if(v=v!="object"?v:k?Array.isArray(k)?"array":v:"null",v=="array"||v=="object"&&typeof k.length=="number"){v=u.length||0;const H=k.length||0;u.length=v+H;for(let rt=0;rt<H;rt++)u[v+rt]=k[rt]}else u.push(k)}}class ot{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function it(u){d.setTimeout(()=>{throw u},0)}function wt(){var u=N;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Vt{constructor(){this.h=this.g=null}add(m,v){const T=It.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var It=new ot(()=>new se,u=>u.reset());class se{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,Kt=!1,N=new Vt,b=()=>{const u=Promise.resolve(void 0);oe=()=>{u.then(C)}};function C(){for(var u;u=wt();){try{u.h.call(u.g)}catch(v){it(v)}var m=It;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}Kt=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u})();function w(u){return/^[\s\xa0]*$/.test(u)}function ve(u,m){O.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}S(ve,O),ve.prototype.init=function(u,m){const v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ue="closure_listenable_"+(Math.random()*1e6|0),Q=0;function at(u,m,v,T,k){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=k,this.key=++Q,this.da=this.fa=!1}function Et(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Xt(u,m,v){for(const T in u)m.call(v,u[T],T,u)}function re(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function M(u){const m={};for(const v in u)m[v]=u[v];return m}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(u,m){let v,T;for(let k=1;k<arguments.length;k++){T=arguments[k];for(v in T)u[v]=T[v];for(let H=0;H<J.length;H++)v=J[H],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function st(u){this.src=u,this.g={},this.h=0}st.prototype.add=function(u,m,v,T,k){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const rt=nt(u,m,T,k);return rt>-1?(m=u[rt],v||(m.fa=!1)):(m=new at(m,this.src,H,!!T,k),m.fa=v,u.push(m)),m};function At(u,m){const v=m.type;if(v in u.g){var T=u.g[v],k=Array.prototype.indexOf.call(T,m,void 0),H;(H=k>=0)&&Array.prototype.splice.call(T,k,1),H&&(Et(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function nt(u,m,v,T){for(let k=0;k<u.length;++k){const H=u[k];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==T)return k}return-1}var Bt="closure_lm_"+(Math.random()*1e6|0),De={};function ye(u,m,v,T,k){if(Array.isArray(m)){for(let H=0;H<m.length;H++)ye(u,m[H],v,T,k);return null}return v=wa(v),u&&u[Ue]?u.J(m,v,p(T)?!!T.capture:!1,k):Ci(u,m,v,!1,T,k)}function Ci(u,m,v,T,k,H){if(!m)throw Error("Invalid event type");const rt=p(k)?!!k.capture:!!k;let Lt=Vs(u);if(Lt||(u[Bt]=Lt=new st(u)),v=Lt.add(m,v,T,rt,H),v.proxy)return v;if(T=Zi(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)P||(k=rt),k===void 0&&(k=!1),u.addEventListener(m.toString(),T,k);else if(u.attachEvent)u.attachEvent(mi(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Zi(){function u(v){return m.call(u.src,u.listener,v)}const m=Ur;return u}function Ji(u,m,v,T,k){if(Array.isArray(m))for(var H=0;H<m.length;H++)Ji(u,m[H],v,T,k);else T=p(T)?!!T.capture:!!T,v=wa(v),u&&u[Ue]?(u=u.i,H=String(m).toString(),H in u.g&&(m=u.g[H],v=nt(m,v,T,k),v>-1&&(Et(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[H],u.h--)))):u&&(u=Vs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=nt(m,v,T,k)),(v=u>-1?m[u]:null)&&Ms(v))}function Ms(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ue])At(m.i,u);else{var v=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(v,T,u.capture):m.detachEvent?m.detachEvent(mi(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=Vs(m))?(At(v,u),v.h==0&&(v.src=null,m[Bt]=null)):Et(u)}}}function mi(u){return u in De?De[u]:De[u]="on"+u}function Ur(u,m){if(u.da)u=!0;else{m=new ve(m,this);const v=u.listener,T=u.ha||u.src;u.fa&&Ms(u),u=v.call(T,m)}return u}function Vs(u){return u=u[Bt],u instanceof st?u:null}var Us="__closure_events_fn_"+(Math.random()*1e9>>>0);function wa(u){return typeof u=="function"?u:(u[Us]||(u[Us]=function(m){return u.handleEvent(m)}),u[Us])}function Le(){V.call(this),this.i=new st(this),this.M=this,this.G=null}S(Le,V),Le.prototype[Ue]=!0,Le.prototype.removeEventListener=function(u,m,v,T){Ji(this,u,m,v,T)};function He(u,m){var v,T=u.G;if(T)for(v=[];T;T=T.G)v.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new O(m,u);else if(m instanceof O)m.target=m.target||u;else{var k=m;m=new O(T,u),lt(m,k)}k=!0;let H,rt;if(v)for(rt=v.length-1;rt>=0;rt--)H=m.g=v[rt],k=Ni(H,T,!0,m)&&k;if(H=m.g=u,k=Ni(H,T,!0,m)&&k,k=Ni(H,T,!1,m)&&k,v)for(rt=0;rt<v.length;rt++)H=m.g=v[rt],k=Ni(H,T,!1,m)&&k}Le.prototype.N=function(){if(Le.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let T=0;T<v.length;T++)Et(v[T]);delete u.g[m],u.h--}}this.G=null},Le.prototype.J=function(u,m,v,T){return this.i.add(String(u),m,!1,v,T)},Le.prototype.K=function(u,m,v,T){return this.i.add(String(u),m,!0,v,T)};function Ni(u,m,v,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let k=!0;for(let H=0;H<m.length;++H){const rt=m[H];if(rt&&!rt.da&&rt.capture==v){const Lt=rt.listener,ze=rt.ha||rt.src;rt.fa&&At(u.i,rt),k=Lt.call(ze,T)!==!1&&k}}return k&&!T.defaultPrevented}function Lr(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:d.setTimeout(u,m||0)}function Ra(u){u.g=Lr(()=>{u.g=null,u.i&&(u.i=!1,Ra(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class pn extends V{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ra(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wi(u){V.call(this),this.h=u,this.g={}}S(Wi,V);var Ia=[];function Pr(u){Xt(u.g,function(m,v){this.g.hasOwnProperty(v)&&Ms(m)},u),u.g={}}Wi.prototype.N=function(){Wi.Z.N.call(this),Pr(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var An=d.JSON.stringify,Ca=d.JSON.parse,ts=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function es(){}function Na(){}var $t={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ze(){O.call(this,"d")}S(Ze,O);function yn(){O.call(this,"c")}S(yn,O);var we={},Da=null;function ns(){return Da=Da||new Le}we.Ia="serverreachability";function kr(u){O.call(this,we.Ia,u)}S(kr,O);function zn(u){const m=ns();He(m,new kr(m))}we.STAT_EVENT="statevent";function is(u,m){O.call(this,we.STAT_EVENT,u),this.stat=m}S(is,O);function xe(u){const m=ns();He(m,new is(m,u))}we.Ja="timingevent";function Wn(u,m){O.call(this,we.Ja,u),this.size=m}S(Wn,O);function ti(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function jn(){this.g=!0}jn.prototype.ua=function(){this.g=!1};function Go(u,m,v,T,k,H){u.info(function(){if(u.g)if(H){var rt="",Lt=H.split("&");for(let ne=0;ne<Lt.length;ne++){var ze=Lt[ne].split("=");if(ze.length>1){const Se=ze[0];ze=ze[1];const ri=Se.split("_");rt=ri.length>=2&&ri[1]=="type"?rt+(Se+"="+ze+"&"):rt+(Se+"=redacted&")}}}else rt=null;else rt=H;return"XMLHTTP REQ ("+T+") [attempt "+k+"]: "+m+`
`+v+`
`+rt})}function Sn(u,m,v,T,k,H,rt){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+k+"]: "+m+`
`+v+`
`+H+" "+rt})}function Nn(u,m,v,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+xa(u,v)+(T?" "+T:"")})}function ss(u,m){u.info(function(){return"TIMEOUT: "+m})}jn.prototype.info=function(){};function xa(u,m){if(!u.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var v=H[u];if(!(v.length<2)){var T=v[1];if(Array.isArray(T)&&!(T.length<1)){var k=T[0];if(k!="noop"&&k!="stop"&&k!="close")for(let rt=1;rt<T.length;rt++)T[rt]=""}}}}return An(H)}catch{return m}}var rs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},jr;function Dn(){}S(Dn,es),Dn.prototype.g=function(){return new XMLHttpRequest},jr=new Dn;function ei(u){return encodeURIComponent(String(u))}function Oa(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function bn(u,m,v,T){this.j=u,this.i=m,this.l=v,this.S=T||1,this.V=new Wi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bn}function Bn(){this.i=null,this.g="",this.h=!1}var Re={},Pe={};function ni(u,m,v){u.M=1,u.A=Br(Ie(m)),u.u=v,u.R=!0,Ls(u,null)}function Ls(u,m){u.F=Date.now(),L(u),u.B=Ie(u.A);var v=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),La(v.i,"t",T),u.C=0,v=u.j.L,u.h=new Bn,u.g=zu(u.j,v?m:null,!u.u),u.P>0&&(u.O=new pn(y(u.Y,u,u.g),u.P)),m=u.V,v=u.g,T=u.ba;var k="readystatechange";Array.isArray(k)||(k&&(Ia[0]=k.toString()),k=Ia);for(let H=0;H<k.length;H++){const rt=ye(v,k[H],T||m.handleEvent,!1,m.h||m);if(!rt)break;m.g[rt.key]=rt}m=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),zn(),Go(u.i,u.v,u.B,u.l,u.S,u.u)}bn.prototype.ba=function(u){u=u.target;const m=this.O;m&&_i(u)==3?m.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)t:{const Lt=_i(this.g),ze=this.g.ya(),ne=this.g.ca();if(!(Lt<3)&&(Lt!=3||this.g&&(this.h.h||this.g.la()||an(this.g)))){this.K||Lt!=4||ze==7||(ze==8||ne<=0?zn(3):zn(2)),$(this);var m=this.g.ca();this.X=m;var v=Qo(this);if(this.o=m==200,Sn(this.i,this.v,this.B,this.l,this.S,Lt,m),this.o){if(this.U&&!this.L){e:{if(this.g){var T,k=this.g;if((T=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(T)){var H=T;break e}}H=null}if(u=H)Nn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_t(this,u);else{this.o=!1,this.m=3,xe(12),ut(this),K(this);break t}}if(this.R){u=!0;let Se;for(;!this.K&&this.C<v.length;)if(Se=Va(this,v),Se==Pe){Lt==4&&(this.m=4,xe(14),u=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(Se==Re){this.m=4,xe(15),Nn(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Nn(this.i,this.l,Se,null),_t(this,Se);if(Ma(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||v.length!=0||this.h.h||(this.m=1,xe(16),u=!1),this.o=this.o&&u,!u)Nn(this.i,this.l,v,"[Invalid Chunked Response]"),ut(this),K(this);else if(v.length>0&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.aa&&!rt.P&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),nl(rt),rt.P=!0,xe(11))}}else Nn(this.i,this.l,v,null),_t(this,v);Lt==4&&ut(this),this.o&&!this.K&&(Lt==4?Uu(this.j,this):(this.o=!1,L(this)))}else os(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,xe(12)):(this.m=0,xe(13)),ut(this),K(this)}}}catch{}finally{}};function Qo(u){if(!Ma(u))return u.g.la();const m=an(u.g);if(m==="")return"";let v="";const T=m.length,k=_i(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ut(u),K(u),"";u.h.i=new d.TextDecoder}for(let H=0;H<T;H++)u.h.h=!0,v+=u.h.i.decode(m[H],{stream:!(k&&H==T-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function Ma(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Va(u,m){var v=u.C,T=m.indexOf(`
`,v);return T==-1?Pe:(v=Number(m.substring(v,T)),isNaN(v)?Re:(T+=1,T+v>m.length?Pe:(m=m.slice(T,T+v),u.C=T+v,m)))}bn.prototype.cancel=function(){this.K=!0,ut(this)};function L(u){u.T=Date.now()+u.H,q(u,u.H)}function q(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ti(y(u.aa,u),m)}function $(u){u.D&&(d.clearTimeout(u.D),u.D=null)}bn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ss(this.i,this.B),this.M!=2&&(zn(),xe(17)),ut(this),this.m=2,K(this)):q(this,this.T-u)};function K(u){u.j.I==0||u.K||Uu(u.j,u)}function ut(u){$(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Pr(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function _t(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||gt(v.h,u))){if(!u.L&&gt(v.h,u)&&v.I==3){try{var T=v.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var k=T;if(k[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Ba(v),Fs(v);else break t;Kr(v),xe(18)}}else v.xa=k[1],0<v.xa-v.K&&k[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ti(y(v.Va,v),6e3));dt(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ui(v,11)}else if((u.L||v.g==u)&&Ba(v),!w(m))for(k=v.Ba.g.parse(m),m=0;m<k.length;m++){let ne=k[m];const Se=ne[0];if(!(Se<=v.K))if(v.K=Se,ne=ne[1],v.I==2)if(ne[0]=="c"){v.M=ne[1],v.ba=ne[2];const ri=ne[3];ri!=null&&(v.ka=ri,v.j.info("VER="+v.ka));const Li=ne[4];Li!=null&&(v.za=Li,v.j.info("SVER="+v.za));const vi=ne[5];vi!=null&&typeof vi=="number"&&vi>0&&(T=1.5*vi,v.O=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const Ei=u.g;if(Ei){const Xr=Ei.g?Ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xr){var H=T.h;H.g||Xr.indexOf("spdy")==-1&&Xr.indexOf("quic")==-1&&Xr.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(St(H,H.h),H.h=null))}if(T.G){const qa=Ei.g?Ei.g.getResponseHeader("X-HTTP-Session-Id"):null;qa&&(T.wa=qa,le(T.J,T.G,qa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),T=v;var rt=u;if(T.na=ku(T,T.L?T.ba:null,T.W),rt.L){he(T.h,rt);var Lt=rt,ze=T.O;ze&&(Lt.H=ze),Lt.D&&($(Lt),L(Lt)),T.g=rt}else Mu(T);v.i.length>0&&Vi(v)}else ne[0]!="stop"&&ne[0]!="close"||Ui(v,7);else v.I==3&&(ne[0]=="stop"||ne[0]=="close"?ne[0]=="stop"?Ui(v,7):tl(v):ne[0]!="noop"&&v.l&&v.l.qa(ne),v.A=0)}}zn(4)}catch{}}var ht=class{constructor(u,m){this.g=u,this.map=m}};function yt(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ut(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function dt(u){return u.h?1:u.g?u.g.size:0}function gt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function St(u,m){u.g?u.g.add(m):u.h=m}function he(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}yt.prototype.cancel=function(){if(this.i=Dt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Dt(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return G(u.i)}var ke=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gi(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const T=u[v].indexOf("=");let k,H=null;T>=0?(k=u[v].substring(0,T),H=u[v].substring(T+1)):k=u[v],m(k,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function en(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof en?(this.l=u.l,ae(this,u.j),this.o=u.o,this.g=u.g,Ps(this,u.u),this.h=u.h,Yo(this,xu(u.i)),this.m=u.m):u&&(m=String(u).match(ke))?(this.l=!1,ae(this,m[1]||"",!0),this.o=Di(m[2]||""),this.g=Di(m[3]||"",!0),Ps(this,m[4]),this.h=Di(m[5]||"",!0),Yo(this,m[6]||"",!0),this.m=Di(m[7]||"")):(this.l=!1,this.i=new zs(null,this.l))}en.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(qr(m,Ua,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(qr(m,Ua,!0),"@"),u.push(ei(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(qr(v,v.charAt(0)=="/"?Ko:Cu,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",qr(v,Nu)),u.join("")},en.prototype.resolve=function(u){const m=Ie(this);let v=!!u.j;v?ae(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var T=u.h;if(v)Ps(m,u.u);else if(v=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var k=m.h.lastIndexOf("/");k!=-1&&(T=m.h.slice(0,k+1)+T)}if(k=T,k==".."||k==".")T="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){T=k.lastIndexOf("/",0)==0,k=k.split("/");const H=[];for(let rt=0;rt<k.length;){const Lt=k[rt++];Lt=="."?T&&rt==k.length&&H.push(""):Lt==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),T&&rt==k.length&&H.push("")):(H.push(Lt),T=!0)}T=H.join("/")}else T=k}return v?m.h=T:v=u.i.toString()!=="",v?Yo(m,xu(u.i)):v=!!u.m,v&&(m.m=u.m),m};function Ie(u){return new en(u)}function ae(u,m,v){u.j=v?Di(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Ps(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Yo(u,m,v){m instanceof zs?(u.i=m,Pa(u.i,u.l)):(v||(m=qr(m,ks)),u.i=new zs(m,u.l))}function le(u,m,v){u.i.set(m,v)}function Br(u){return le(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Di(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function qr(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,xn),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function xn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ua=/[#\/\?@]/g,Cu=/[#\?:]/g,Ko=/[#\?]/g,ks=/[#\?@]/g,Nu=/#/g;function zs(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function On(u){u.g||(u.g=new Map,u.h=0,u.i&&gi(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}s=zs.prototype,s.add=function(u,m){On(this),this.i=null,u=js(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Du(u,m){On(u),m=js(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Xo(u,m){return On(u),m=js(u,m),u.g.has(m)}s.forEach=function(u,m){On(this),this.g.forEach(function(v,T){v.forEach(function(k){u.call(m,k,T,this)},this)},this)};function $o(u,m){On(u);let v=[];if(typeof m=="string")Xo(u,m)&&(v=v.concat(u.g.get(js(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}s.set=function(u,m){return On(this),this.i=null,u=js(this,u),Xo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=$o(this,u),u.length>0?String(u[0]):m):m};function La(u,m,v){Du(u,m),v.length>0&&(u.i=null,u.g.set(js(u,m),G(v)),u.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var v=m[T];const k=ei(v);v=$o(this,v);for(let H=0;H<v.length;H++){let rt=k;v[H]!==""&&(rt+="="+ei(v[H])),u.push(rt)}}return this.i=u.join("&")};function xu(u){const m=new zs;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function js(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Pa(u,m){m&&!u.j&&(On(u),u.i=null,u.g.forEach(function(v,T){const k=T.toLowerCase();T!=k&&(Du(this,T),La(this,k,v))},u)),u.j=m}function pi(u,m){const v=new jn;if(d.Image){const T=new Image;T.onload=A(ii,v,"TestLoadImage: loaded",!0,m,T),T.onerror=A(ii,v,"TestLoadImage: error",!1,m,T),T.onabort=A(ii,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=A(ii,v,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Zo(u,m){const v=new jn,T=new AbortController,k=setTimeout(()=>{T.abort(),ii(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(H=>{clearTimeout(k),H.ok?ii(v,"TestPingServer: ok",!0,m):ii(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(k),ii(v,"TestPingServer: error",!1,m)})}function ii(u,m,v,T,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),T(v)}catch{}}function Bs(){this.g=new ts}function xi(u){this.i=u.Sb||null,this.h=u.ab||!1}S(xi,es),xi.prototype.g=function(){return new Hr(this.i,this.h)};function Hr(u,m){Le.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Hr,Le),s=Hr.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,yi(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||d).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,yi(this)),this.g&&(this.readyState=3,yi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ka(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ka(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?qs(this):yi(this),this.readyState==3&&ka(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,qs(this))},s.Na=function(u){this.g&&(this.response=u,qs(this))},s.ga=function(){this.g&&qs(this)};function qs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,yi(u)}s.setRequestHeader=function(u,m){this.A.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function yi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Hr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function si(u){let m="";return Xt(u,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function Fr(u,m,v){t:{for(T in v){var T=!1;break t}T=!0}T||(v=si(v),typeof u=="string"?v!=null&&ei(v):le(u,m,v))}function fe(u){Le.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(fe,Le);var Oi=/^https?$/i,Jo=["POST","PUT"];s=fe.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():jr.g(),this.g.onreadystatechange=I(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){Gr(this,H);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var k in T)v.set(k,T[k]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())v.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),k=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Jo,m,void 0)>=0)||T||k||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,rt]of v)this.g.setRequestHeader(H,rt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){Gr(this,H)}};function Gr(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Wo(u),as(u)}function Wo(u){u.A||(u.A=!0,He(u,"complete"),He(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,He(this,"complete"),He(this,"abort"),as(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),fe.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Qr(this):this.Xa())},s.Xa=function(){Qr(this)};function Qr(u){if(u.h&&typeof c<"u"){if(u.v&&_i(u)==4)setTimeout(u.Ca.bind(u),0);else if(He(u,"readystatechange"),_i(u)==4){u.h=!1;try{const H=u.ca();t:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var v;if(!(v=m)){var T;if(T=H===0){let rt=String(u.D).match(ke)[1]||null;!rt&&d.self&&d.self.location&&(rt=d.self.location.protocol.slice(0,-1)),T=!Oi.test(rt?rt.toLowerCase():"")}v=T}if(v)He(u,"complete"),He(u,"success");else{u.o=6;try{var k=_i(u)>2?u.g.statusText:""}catch{k=""}u.l=k+" ["+u.ca()+"]",Wo(u)}}finally{as(u)}}}}function as(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||He(u,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function _i(u){return u.g?u.g.readyState:0}s.ca=function(){try{return _i(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Ca(m)}};function an(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function os(u){const m={};u=(u.g&&_i(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(w(u[T]))continue;var v=Oa(u[T]);const k=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[k]||[];m[k]=H,H.push(v)}re(m,function(T){return T.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mi(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Hs(u){this.za=0,this.i=[],this.j=new jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mi("baseRetryDelayMs",5e3,u),this.Za=Mi("retryDelaySeedMs",1e4,u),this.Ta=Mi("forwardChannelMaxRetries",2,u),this.va=Mi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new yt(u&&u.concurrentRequestLimit),this.Ba=new Bs,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Hs.prototype,s.ka=8,s.I=1,s.connect=function(u,m,v,T){xe(0),this.W=u,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.J=ku(this,null,this.W),Vi(this)};function tl(u){if(za(u),u.I==3){var m=u.V++,v=Ie(u.J);if(le(v,"SID",u.M),le(v,"RID",m),le(v,"TYPE","terminate"),Yr(u,v),m=new bn(u,u.j,m),m.M=2,m.A=Br(Ie(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.A,v=!0),v||(m.g=zu(m.j,null),m.g.ea(m.A)),m.F=Date.now(),L(m)}Pu(u)}function Fs(u){u.g&&(nl(u),u.g.cancel(),u.g=null)}function za(u){Fs(u),u.v&&(d.clearTimeout(u.v),u.v=null),Ba(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function Vi(u){if(!Ut(u.h)&&!u.m){u.m=!0;var m=u.Ea;oe||b(),Kt||(oe(),Kt=!0),N.add(m,u),u.D=0}}function ja(u,m){return dt(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ti(y(u.Ea,u,m),Lu(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const k=new bn(this,this.j,u);let H=this.o;if(this.U&&(H?(H=M(H),lt(H,this.U)):H=this.U),this.u!==null||this.R||(k.J=H,H=null),this.S)t:{for(var m=0,v=0;v<this.i.length;v++){e:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=v;break t}if(m===4096||v===this.i.length-1){m=v+1;break t}}m=1e3}else m=1e3;m=Ou(this,k,m),v=Ie(this.J),le(v,"RID",u),le(v,"CVER",22),this.G&&le(v,"X-HTTP-Session-Id",this.G),Yr(this,v),H&&(this.R?m="headers="+ei(si(H))+"&"+m:this.u&&Fr(v,this.u,H)),St(this.h,k),this.Ra&&le(v,"TYPE","init"),this.S?(le(v,"$req",m),le(v,"SID","null"),k.U=!0,ni(k,v,null)):ni(k,v,m),this.I=2}}else this.I==3&&(u?el(this,u):this.i.length==0||Ut(this.h)||el(this))};function el(u,m){var v;m?v=m.l:v=u.V++;const T=Ie(u.J);le(T,"SID",u.M),le(T,"RID",v),le(T,"AID",u.K),Yr(u,T),u.u&&u.o&&Fr(T,u.u,u.o),v=new bn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Ou(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),St(u.h,v),ni(v,T,m)}function Yr(u,m){u.H&&Xt(u.H,function(v,T){le(m,T,v)}),u.l&&Xt({},function(v,T){le(m,T,v)})}function Ou(u,m,v){v=Math.min(u.i.length,v);const T=u.l?y(u.l.Ka,u.l,u):null;t:{var k=u.i;let Lt=-1;for(;;){const ze=["count="+v];Lt==-1?v>0?(Lt=k[0].g,ze.push("ofs="+Lt)):Lt=0:ze.push("ofs="+Lt);let ne=!0;for(let Se=0;Se<v;Se++){var H=k[Se].g;const ri=k[Se].map;if(H-=Lt,H<0)Lt=Math.max(0,k[Se].g-100),ne=!1;else try{H="req"+H+"_"||"";try{var rt=ri instanceof Map?ri:Object.entries(ri);for(const[Li,vi]of rt){let Ei=vi;p(vi)&&(Ei=An(vi)),ze.push(H+Li+"="+encodeURIComponent(Ei))}}catch(Li){throw ze.push(H+"type="+encodeURIComponent("_badmap")),Li}}catch{T&&T(ri)}}if(ne){rt=ze.join("&");break t}}rt=void 0}return u=u.i.splice(0,v),m.G=u,rt}function Mu(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;oe||b(),Kt||(oe(),Kt=!0),N.add(m,u),u.A=0}}function Kr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ti(y(u.Da,u),Lu(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Vu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ti(y(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xe(10),Fs(this),Vu(this))};function nl(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Vu(u){u.g=new bn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Ie(u.na);le(m,"RID","rpc"),le(m,"SID",u.M),le(m,"AID",u.K),le(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&le(m,"TO",u.ia),le(m,"TYPE","xmlhttp"),Yr(u,m),u.u&&u.o&&Fr(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Br(Ie(m)),v.u=null,v.R=!0,Ls(v,u)}s.Va=function(){this.C!=null&&(this.C=null,Fs(this),Kr(this),xe(19))};function Ba(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Uu(u,m){var v=null;if(u.g==m){Ba(u),nl(u),u.g=null;var T=2}else if(gt(u.h,m))v=m.G,he(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var k=u.D;T=ns(),He(T,new Wn(T,v)),Vi(u)}else Mu(u);else if(k=m.m,k==3||k==0&&m.X>0||!(T==1&&ja(u,m)||T==2&&Kr(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),k){case 1:Ui(u,5);break;case 4:Ui(u,10);break;case 3:Ui(u,6);break;default:Ui(u,2)}}}function Lu(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function Ui(u,m){if(u.j.info("Error code "+m),m==2){var v=y(u.bb,u),T=u.Ua;const k=!T;T=new en(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ae(T,"https"),Br(T),k?pi(T.toString(),v):Zo(T.toString(),v)}else xe(2);u.I=0,u.l&&u.l.pa(m),Pu(u),za(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function Pu(u){if(u.I=0,u.ja=[],u.l){const m=Dt(u.h);(m.length!=0||u.i.length!=0)&&(et(u.ja,m),et(u.ja,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.oa()}}function ku(u,m,v){var T=v instanceof en?Ie(v):new en(v);if(T.g!="")m&&(T.g=m+"."+T.g),Ps(T,T.u);else{var k=d.location;T=k.protocol,m=m?m+"."+k.hostname:k.hostname,k=+k.port;const H=new en(null);T&&ae(H,T),m&&(H.g=m),k&&Ps(H,k),v&&(H.h=v),T=H}return v=u.G,m=u.wa,v&&m&&le(T,v,m),le(T,"VER",u.ka),Yr(u,T),T}function zu(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new fe(new xi({ab:v})):new fe(u.ma),m.Fa(u.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ju(){}s=ju.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Gs(){}Gs.prototype.g=function(u,m){return new wn(u,m)};function wn(u,m){Le.call(this),this.g=new Hs(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!w(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!w(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ls(this)}S(wn,Le),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){tl(this.g)},wn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=An(u),u=v);m.i.push(new ht(m.Ya++,u)),m.I==3&&Vi(m)},wn.prototype.N=function(){this.g.l=null,delete this.j,tl(this.g),delete this.g,wn.Z.N.call(this)};function Bu(u){Ze.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const v in m){u=v;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}S(Bu,Ze);function qu(){yn.call(this),this.status=1}S(qu,yn);function ls(u){this.g=u}S(ls,ju),ls.prototype.ra=function(){He(this.g,"a")},ls.prototype.qa=function(u){He(this.g,new Bu(u))},ls.prototype.pa=function(u){He(this.g,new qu)},ls.prototype.oa=function(){He(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,jE=function(){return new Gs},zE=function(){return ns()},kE=we,_m={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},rs.NO_ERROR=0,rs.TIMEOUT=8,rs.HTTP_ERROR=6,ih=rs,zr.COMPLETE="complete",PE=zr,Na.EventType=$t,$t.OPEN="a",$t.CLOSE="b",$t.ERROR="c",$t.MESSAGE="d",Le.prototype.listen=Le.prototype.J,Fl=Na,fe.prototype.listenOnce=fe.prototype.K,fe.prototype.getLastError=fe.prototype.Ha,fe.prototype.getLastErrorCode=fe.prototype.ya,fe.prototype.getStatus=fe.prototype.ca,fe.prototype.getResponseJson=fe.prototype.La,fe.prototype.getResponseText=fe.prototype.la,fe.prototype.send=fe.prototype.ea,fe.prototype.setWithCredentials=fe.prototype.Fa,LE=fe}).apply(typeof Yc<"u"?Yc:typeof self<"u"?self:typeof window<"u"?window:{});const Bv="@firebase/firestore",qv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new Lm("@firebase/firestore");function Eo(){return Ta.logLevel}function ft(s,...t){if(Ta.logLevel<=Ft.DEBUG){const i=t.map(Xm);Ta.debug(`Firestore (${jo}): ${s}`,...i)}}function Ds(s,...t){if(Ta.logLevel<=Ft.ERROR){const i=t.map(Xm);Ta.error(`Firestore (${jo}): ${s}`,...i)}}function xo(s,...t){if(Ta.logLevel<=Ft.WARN){const i=t.map(Xm);Ta.warn(`Firestore (${jo}): ${s}`,...i)}}function Xm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(s,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,BE(s,r,i)}function BE(s,t,i){let r=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw Ds(r),new Error(r)}function Jt(s,t,i,r){let l="Unexpected state";typeof i=="string"?l=i:r=i,s||BE(t,l,r)}function Ot(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends Os{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class e2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable((()=>i(En.UNAUTHENTICATED)))}shutdown(){}}class n2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class i2{constructor(t){this.t=t,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Jt(this.o===void 0,42304);let r=this.i;const l=_=>this.i!==r?(r=this.i,i(_)):Promise.resolve();let c=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Fi,t.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const _=c;t.enqueueRetryable((async()=>{await _.promise,await l(this.currentUser)}))},p=_=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((_=>p(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Fi)}}),0),d()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((r=>this.i!==t?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Jt(typeof r.accessToken=="string",31837,{l:r}),new qE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Jt(t===null||typeof t=="string",2055,{h:t}),new En(t)}}class s2{constructor(t,i,r){this.P=t,this.T=i,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class r2{constructor(t,i,r){this.P=t,this.T=i,this.I=r}getToken(){return Promise.resolve(new s2(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable((()=>i(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a2{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Jt(this.o===void 0,3512);const r=c=>{c.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ft("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>r(c)))};const l=c=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((i=>i?(Jt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Hv(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<s;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=o2(40);for(let c=0;c<l.length;++c)r.length<20&&l[c]<i&&(r+=t.charAt(l[c]%62))}return r}}function Gt(s,t){return s<t?-1:s>t?1:0}function vm(s,t){const i=Math.min(s.length,t.length);for(let r=0;r<i;r++){const l=s.charAt(r),c=t.charAt(r);if(l!==c)return am(l)===am(c)?Gt(l,c):am(l)?1:-1}return Gt(s.length,t.length)}const l2=55296,u2=57343;function am(s){const t=s.charCodeAt(0);return t>=l2&&t<=u2}function Oo(s,t,i){return s.length===t.length&&s.every(((r,l)=>i(r,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="__name__";class qi{constructor(t,i,r){i===void 0?i=0:i>t.length&&bt(637,{offset:i,range:t.length}),r===void 0?r=t.length-i:r>t.length-i&&bt(1746,{length:r,range:t.length-i}),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return qi.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof qi?t.forEach((r=>{i.push(r)})):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let l=0;l<r;l++){const c=qi.compareSegments(t.get(l),i.get(l));if(c!==0)return c}return Gt(t.length,i.length)}static compareSegments(t,i){const r=qi.isNumericId(t),l=qi.isNumericId(i);return r&&!l?-1:!r&&l?1:r&&l?qi.extractNumericId(t).compare(qi.extractNumericId(i)):vm(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Sr.fromString(t.substring(4,t.length-2))}}class pe extends qi{construct(t,i,r){return new pe(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new ct(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter((l=>l.length>0)))}return new pe(i)}static emptyPath(){return new pe([])}}const c2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends qi{construct(t,i,r){return new dn(t,i,r)}static isValidIdentifier(t){return c2.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fv}static keyField(){return new dn([Fv])}static fromServerFormat(t){const i=[];let r="",l=0;const c=()=>{if(r.length===0)throw new ct(X.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let d=!1;for(;l<t.length;){const p=t[l];if(p==="\\"){if(l+1===t.length)throw new ct(X.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[l+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new ct(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=_,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(r+=p,l++):(c(),l++)}if(c(),d)throw new ct(X.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new dn(i)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t){this.path=t}static fromPath(t){return new vt(pe.fromString(t))}static fromName(t){return new vt(pe.fromString(t).popFirst(5))}static empty(){return new vt(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return pe.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new vt(new pe(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(s,t,i){if(!i)throw new ct(X.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function h2(s,t,i,r){if(t===!0&&r===!0)throw new ct(X.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function Gv(s){if(!vt.isDocumentKey(s))throw new ct(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Qv(s){if(vt.isDocumentKey(s))throw new ct(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function FE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Vh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":bt(12329,{type:typeof s})}function Cn(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ct(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Vh(s);throw new ct(X.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(s,t){const i={typeString:s};return t&&(i.value=t),i}function yu(s,t){if(!FE(s))throw new ct(X.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in t)if(t[r]){const l=t[r].typeString,c="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){i=`JSON missing required field: '${r}'`;break}const d=s[r];if(l&&typeof d!==l){i=`JSON field '${r}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){i=`Expected '${r}' field to equal '${c.value}'`;break}}if(i)throw new ct(X.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=-62135596800,Kv=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(t){return Ae.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor((t-1e3*i)*Kv);return new Ae(i,r)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new ct(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ct(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<Yv)throw new ct(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ct(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kv}_compareTo(t){return this.seconds===t.seconds?Gt(this.nanoseconds,t.nanoseconds):Gt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(yu(t,Ae._jsonSchema))return new Ae(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Yv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:$e("string",Ae._jsonSchemaVersion),seconds:$e("number"),nanoseconds:$e("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{static fromTimestamp(t){return new Ct(t)}static min(){return new Ct(new Ae(0,0))}static max(){return new Ct(new Ae(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=-1;function f2(s,t){const i=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=Ct.fromTimestamp(r===1e9?new Ae(i+1,0):new Ae(i,r));return new Rr(l,vt.empty(),t)}function d2(s){return new Rr(s.readTime,s.key,iu)}class Rr{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new Rr(Ct.min(),vt.empty(),iu)}static max(){return new Rr(Ct.max(),vt.empty(),iu)}}function m2(s,t){let i=s.readTime.compareTo(t.readTime);return i!==0?i:(i=vt.comparator(s.documentKey,t.documentKey),i!==0?i:Gt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(s){if(s.code!==X.FAILED_PRECONDITION||s.message!==g2)throw s;ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&bt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new tt(((r,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(r,l)},this.catchCallback=c=>{this.wrapFailure(i,c).next(r,l)}}))}toPromise(){return new Promise(((t,i)=>{this.next(t,i)}))}wrapUserFunction(t){try{const i=t();return i instanceof tt?i:tt.resolve(i)}catch(i){return tt.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction((()=>t(i))):tt.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction((()=>t(i))):tt.reject(i)}static resolve(t){return new tt(((i,r)=>{i(t)}))}static reject(t){return new tt(((i,r)=>{r(t)}))}static waitFor(t){return new tt(((i,r)=>{let l=0,c=0,d=!1;t.forEach((p=>{++l,p.next((()=>{++c,d&&c===l&&i()}),(_=>r(_)))})),d=!0,c===l&&i()}))}static or(t){let i=tt.resolve(!1);for(const r of t)i=i.next((l=>l?tt.resolve(l):r()));return i}static forEach(t,i){const r=[];return t.forEach(((l,c)=>{r.push(i.call(this,l,c))})),this.waitFor(r)}static mapArray(t,i){return new tt(((r,l)=>{const c=t.length,d=new Array(c);let p=0;for(let _=0;_<c;_++){const y=_;i(t[y]).next((A=>{d[y]=A,++p,p===c&&r(d)}),(A=>l(A)))}}))}static doWhile(t,i){return new tt(((r,l)=>{const c=()=>{t()===!0?i().next((()=>{c()}),l):r()};c()}))}}function y2(s){const t=s.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function qo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Uh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=-1;function _u(s){return s==null}function yh(s){return s===0&&1/s==-1/0}function _2(s){return typeof s=="number"&&Number.isInteger(s)&&!yh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="";function v2(s){let t="";for(let i=0;i<s.length;i++)t.length>0&&(t=Xv(t)),t=E2(s.get(i),t);return Xv(t)}function E2(s,t){let i=t;const r=s.length;for(let l=0;l<r;l++){const c=s.charAt(l);switch(c){case"\0":i+="";break;case GE:i+="";break;default:i+=c}}return i}function Xv(s){return s+GE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(s){let t=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t++;return t}function Or(s,t){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t(i,s[i])}function QE(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t,i){this.comparator=t,this.root=i||fn.EMPTY}insert(t,i){return new Ne(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(t){return new Ne(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fn.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(t,r.key);if(l===0)return i+r.left.size;l<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((i,r)=>(t(i,r),!1)))}toString(){const t=[];return this.inorderTraversal(((i,r)=>(t.push(`${i}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Kc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Kc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Kc(this.root,t,this.comparator,!0)}}class Kc{constructor(t,i,r,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=i?r(t.key,i):1,i&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class fn{constructor(t,i,r,l,c){this.key=t,this.value=i,this.color=r??fn.RED,this.left=l??fn.EMPTY,this.right=c??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,l,c){return new fn(t??this.key,i??this.value,r??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let l=this;const c=r(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,i,r),null):c===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return fn.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw bt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw bt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw bt(27949);return t+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw bt(57766)}get value(){throw bt(16141)}get color(){throw bt(16727)}get left(){throw bt(29726)}get right(){throw bt(36894)}copy(t,i,r,l,c){return this}insert(t,i,r){return new fn(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.comparator=t,this.data=new Ne(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((i,r)=>(t(i),!1)))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new Zv(this.data.getIterator())}getIteratorFrom(t){return new Zv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach((r=>{i=i.add(r)})),i}isEqual(t){if(!(t instanceof We)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=r.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((i=>{t.push(i)})),t}toString(){const t=[];return this.forEach((i=>t.push(i))),"SortedSet("+t.toString()+")"}copy(t){const i=new We(this.comparator);return i.data=t,i}}class Zv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t){this.fields=t,t.sort(dn.comparator)}static empty(){return new Zn([])}unionWith(t){let i=new We(dn.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new Zn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Oo(this.fields,t.fields,((i,r)=>i.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t){this.binaryString=t}static fromBase64String(t){const i=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new YE("Invalid base64 string: "+c):c}})(t);return new gn(i)}static fromUint8Array(t){const i=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(t);return new gn(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const r=new Uint8Array(i.length);for(let l=0;l<i.length;l++)r[l]=i.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Gt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const T2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(s){if(Jt(!!s,39018),typeof s=="string"){let t=0;const i=T2.exec(s);if(Jt(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:qe(s.seconds),nanos:qe(s.nanos)}}function qe(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Cr(s){return typeof s=="string"?gn.fromBase64String(s):gn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="server_timestamp",XE="__type__",$E="__previous_value__",ZE="__local_write_time__";function Jm(s){return(s?.mapValue?.fields||{})[XE]?.stringValue===KE}function Lh(s){const t=s.mapValue.fields[$E];return Jm(t)?Lh(t):t}function su(s){const t=Ir(s.mapValue.fields[ZE].timestampValue);return new Ae(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(t,i,r,l,c,d,p,_,y,A){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=_,this.useFetchStreams=y,this.isUsingEmulator=A}}const _h="(default)";class ru{constructor(t,i){this.projectId=t,this.database=i||_h}static empty(){return new ru("","")}get isDefaultDatabase(){return this.database===_h}isEqual(t){return t instanceof ru&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="__type__",S2="__max__",Xc={mapValue:{}},WE="__vector__",vh="value";function Nr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Jm(s)?4:w2(s)?9007199254740991:b2(s)?10:11:bt(28295,{value:s})}function Xi(s,t){if(s===t)return!0;const i=Nr(s);if(i!==Nr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return su(s).isEqual(su(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Ir(l.timestampValue),p=Ir(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(l,c){return Cr(l.bytesValue).isEqual(Cr(c.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(l,c){return qe(l.geoPointValue.latitude)===qe(c.geoPointValue.latitude)&&qe(l.geoPointValue.longitude)===qe(c.geoPointValue.longitude)})(s,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return qe(l.integerValue)===qe(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=qe(l.doubleValue),p=qe(c.doubleValue);return d===p?yh(d)===yh(p):isNaN(d)&&isNaN(p)}return!1})(s,t);case 9:return Oo(s.arrayValue.values||[],t.arrayValue.values||[],Xi);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if($v(d)!==$v(p))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(p[_]===void 0||!Xi(d[_],p[_])))return!1;return!0})(s,t);default:return bt(52216,{left:s})}}function au(s,t){return(s.values||[]).find((i=>Xi(i,t)))!==void 0}function Mo(s,t){if(s===t)return 0;const i=Nr(s),r=Nr(t);if(i!==r)return Gt(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return Gt(s.booleanValue,t.booleanValue);case 2:return(function(c,d){const p=qe(c.integerValue||c.doubleValue),_=qe(d.integerValue||d.doubleValue);return p<_?-1:p>_?1:p===_?0:isNaN(p)?isNaN(_)?0:-1:1})(s,t);case 3:return Jv(s.timestampValue,t.timestampValue);case 4:return Jv(su(s),su(t));case 5:return vm(s.stringValue,t.stringValue);case 6:return(function(c,d){const p=Cr(c),_=Cr(d);return p.compareTo(_)})(s.bytesValue,t.bytesValue);case 7:return(function(c,d){const p=c.split("/"),_=d.split("/");for(let y=0;y<p.length&&y<_.length;y++){const A=Gt(p[y],_[y]);if(A!==0)return A}return Gt(p.length,_.length)})(s.referenceValue,t.referenceValue);case 8:return(function(c,d){const p=Gt(qe(c.latitude),qe(d.latitude));return p!==0?p:Gt(qe(c.longitude),qe(d.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return Wv(s.arrayValue,t.arrayValue);case 10:return(function(c,d){const p=c.fields||{},_=d.fields||{},y=p[vh]?.arrayValue,A=_[vh]?.arrayValue,S=Gt(y?.values?.length||0,A?.values?.length||0);return S!==0?S:Wv(y,A)})(s.mapValue,t.mapValue);case 11:return(function(c,d){if(c===Xc.mapValue&&d===Xc.mapValue)return 0;if(c===Xc.mapValue)return 1;if(d===Xc.mapValue)return-1;const p=c.fields||{},_=Object.keys(p),y=d.fields||{},A=Object.keys(y);_.sort(),A.sort();for(let S=0;S<_.length&&S<A.length;++S){const I=vm(_[S],A[S]);if(I!==0)return I;const G=Mo(p[_[S]],y[A[S]]);if(G!==0)return G}return Gt(_.length,A.length)})(s.mapValue,t.mapValue);default:throw bt(23264,{he:i})}}function Jv(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Gt(s,t);const i=Ir(s),r=Ir(t),l=Gt(i.seconds,r.seconds);return l!==0?l:Gt(i.nanos,r.nanos)}function Wv(s,t){const i=s.values||[],r=t.values||[];for(let l=0;l<i.length&&l<r.length;++l){const c=Mo(i[l],r[l]);if(c)return c}return Gt(i.length,r.length)}function Vo(s){return Em(s)}function Em(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const r=Ir(i);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return Cr(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return vt.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let r="[",l=!0;for(const c of i.values||[])l?l=!1:r+=",",r+=Em(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(i){const r=Object.keys(i.fields||{}).sort();let l="{",c=!0;for(const d of r)c?c=!1:l+=",",l+=`${d}:${Em(i.fields[d])}`;return l+"}"})(s.mapValue):bt(61005,{value:s})}function sh(s){switch(Nr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Lh(s);return t?16+sh(t):16;case 5:return 2*s.stringValue.length;case 6:return Cr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,c)=>l+sh(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return Or(r.fields,((c,d)=>{l+=c.length+sh(d)})),l})(s.mapValue);default:throw bt(13486,{value:s})}}function t0(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Tm(s){return!!s&&"integerValue"in s}function Wm(s){return!!s&&"arrayValue"in s}function e0(s){return!!s&&"nullValue"in s}function n0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function rh(s){return!!s&&"mapValue"in s}function b2(s){return(s?.mapValue?.fields||{})[JE]?.stringValue===WE}function $l(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return Or(s.mapValue.fields,((i,r)=>t.mapValue.fields[i]=$l(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=$l(s.arrayValue.values[i]);return t}return{...s}}function w2(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===S2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this.value=t}static empty(){return new In({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!rh(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=$l(i)}setAll(t){let i=dn.emptyPath(),r={},l=[];t.forEach(((d,p)=>{if(!i.isImmediateParentOf(p)){const _=this.getFieldsMap(i);this.applyChanges(_,r,l),r={},l=[],i=p.popLast()}d?r[p.lastSegment()]=$l(d):l.push(p.lastSegment())}));const c=this.getFieldsMap(i);this.applyChanges(c,r,l)}delete(t){const i=this.field(t.popLast());rh(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Xi(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let l=i.mapValue.fields[t.get(r)];rh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,r){Or(i,((l,c)=>t[l]=c));for(const l of r)delete t[l]}clone(){return new In($l(this.value))}}function tT(s){const t=[];return Or(s.fields,((i,r)=>{const l=new dn([i]);if(rh(r)){const c=tT(r.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)})),new Zn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t,i,r,l,c,d,p){this.key=t,this.documentType=i,this.version=r,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(t){return new rn(t,0,Ct.min(),Ct.min(),Ct.min(),In.empty(),0)}static newFoundDocument(t,i,r,l){return new rn(t,1,i,Ct.min(),r,l,0)}static newNoDocument(t,i){return new rn(t,2,i,Ct.min(),Ct.min(),In.empty(),0)}static newUnknownDocument(t,i){return new rn(t,3,i,Ct.min(),Ct.min(),In.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(Ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof rn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,i){this.position=t,this.inclusive=i}}function i0(s,t,i){let r=0;for(let l=0;l<s.position.length;l++){const c=t[l],d=s.position[l];if(c.field.isKeyField()?r=vt.comparator(vt.fromName(d.referenceValue),i.key):r=Mo(d,i.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function s0(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Xi(s.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(t,i="asc"){this.field=t,this.dir=i}}function R2(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{}class Xe extends eT{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new C2(t,i,r):i==="array-contains"?new x2(t,r):i==="in"?new O2(t,r):i==="not-in"?new M2(t,r):i==="array-contains-any"?new V2(t,r):new Xe(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new N2(t,r):new D2(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Mo(i,this.value)):i!==null&&Nr(this.value)===Nr(i)&&this.matchesComparison(Mo(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return bt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ii extends eT{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new Ii(t,i)}matches(t){return nT(this)?this.filters.find((i=>!i.matches(t)))===void 0:this.filters.find((i=>i.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,i)=>t.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nT(s){return s.op==="and"}function iT(s){return I2(s)&&nT(s)}function I2(s){for(const t of s.filters)if(t instanceof Ii)return!1;return!0}function Am(s){if(s instanceof Xe)return s.field.canonicalString()+s.op.toString()+Vo(s.value);if(iT(s))return s.filters.map((t=>Am(t))).join(",");{const t=s.filters.map((i=>Am(i))).join(",");return`${s.op}(${t})`}}function sT(s,t){return s instanceof Xe?(function(r,l){return l instanceof Xe&&r.op===l.op&&r.field.isEqual(l.field)&&Xi(r.value,l.value)})(s,t):s instanceof Ii?(function(r,l){return l instanceof Ii&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((c,d,p)=>c&&sT(d,l.filters[p])),!0):!1})(s,t):void bt(19439)}function rT(s){return s instanceof Xe?(function(i){return`${i.field.canonicalString()} ${i.op} ${Vo(i.value)}`})(s):s instanceof Ii?(function(i){return i.op.toString()+" {"+i.getFilters().map(rT).join(" ,")+"}"})(s):"Filter"}class C2 extends Xe{constructor(t,i,r){super(t,i,r),this.key=vt.fromName(r.referenceValue)}matches(t){const i=vt.comparator(t.key,this.key);return this.matchesComparison(i)}}class N2 extends Xe{constructor(t,i){super(t,"in",i),this.keys=aT("in",i)}matches(t){return this.keys.some((i=>i.isEqual(t.key)))}}class D2 extends Xe{constructor(t,i){super(t,"not-in",i),this.keys=aT("not-in",i)}matches(t){return!this.keys.some((i=>i.isEqual(t.key)))}}function aT(s,t){return(t.arrayValue?.values||[]).map((i=>vt.fromName(i.referenceValue)))}class x2 extends Xe{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Wm(i)&&au(i.arrayValue,this.value)}}class O2 extends Xe{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&au(this.value.arrayValue,i)}}class M2 extends Xe{constructor(t,i){super(t,"not-in",i)}matches(t){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!au(this.value.arrayValue,i)}}class V2 extends Xe{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Wm(i)||!i.arrayValue.values)&&i.arrayValue.values.some((r=>au(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(t,i=null,r=[],l=[],c=null,d=null,p=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function r0(s,t=null,i=[],r=[],l=null,c=null,d=null){return new U2(s,t,i,r,l,c,d)}function tg(s){const t=Ot(s);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map((r=>Am(r))).join(","),i+="|ob:",i+=t.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),_u(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Vo(r))).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Vo(r))).join(",")),t.Te=i}return t.Te}function eg(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!R2(s.orderBy[i],t.orderBy[i]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!sT(s.filters[i],t.filters[i]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!s0(s.startAt,t.startAt)&&s0(s.endAt,t.endAt)}function Sm(s){return vt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(t,i=null,r=[],l=[],c=null,d="F",p=null,_=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function L2(s,t,i,r,l,c,d,p){return new Ho(s,t,i,r,l,c,d,p)}function Ph(s){return new Ho(s)}function a0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function oT(s){return s.collectionGroup!==null}function Zl(s){const t=Ot(s);if(t.Ie===null){t.Ie=[];const i=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),i.add(c.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new We(dn.comparator);return d.filters.forEach((_=>{_.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(t).forEach((c=>{i.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new ou(c,r))})),i.has(dn.keyField().canonicalString())||t.Ie.push(new ou(dn.keyField(),r))}return t.Ie}function Gi(s){const t=Ot(s);return t.Ee||(t.Ee=P2(t,Zl(s))),t.Ee}function P2(s,t){if(s.limitType==="F")return r0(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new ou(l.field,c)}));const i=s.endAt?new Eh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Eh(s.startAt.position,s.startAt.inclusive):null;return r0(s.path,s.collectionGroup,t,s.filters,s.limit,i,r)}}function bm(s,t){const i=s.filters.concat([t]);return new Ho(s.path,s.collectionGroup,s.explicitOrderBy.slice(),i,s.limit,s.limitType,s.startAt,s.endAt)}function wm(s,t,i){return new Ho(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,i,s.startAt,s.endAt)}function kh(s,t){return eg(Gi(s),Gi(t))&&s.limitType===t.limitType}function lT(s){return`${tg(Gi(s))}|lt:${s.limitType}`}function To(s){return`Query(target=${(function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map((l=>rT(l))).join(", ")}]`),_u(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map((l=>Vo(l))).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map((l=>Vo(l))).join(",")),`Target(${r})`})(Gi(s))}; limitType=${s.limitType})`}function zh(s,t){return t.isFoundDocument()&&(function(r,l){const c=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):vt.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,t)&&(function(r,l){for(const c of Zl(r))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,t)&&(function(r,l){for(const c of r.filters)if(!c.matches(l))return!1;return!0})(s,t)&&(function(r,l){return!(r.startAt&&!(function(d,p,_){const y=i0(d,p,_);return d.inclusive?y<=0:y<0})(r.startAt,Zl(r),l)||r.endAt&&!(function(d,p,_){const y=i0(d,p,_);return d.inclusive?y>=0:y>0})(r.endAt,Zl(r),l))})(s,t)}function k2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function uT(s){return(t,i)=>{let r=!1;for(const l of Zl(s)){const c=z2(l,t,i);if(c!==0)return c;r=r||l.field.isKeyField()}return 0}}function z2(s,t,i){const r=s.field.isKeyField()?vt.comparator(t.key,i.key):(function(c,d,p){const _=d.data.field(c),y=p.data.field(c);return _!==null&&y!==null?Mo(_,y):bt(42886)})(s.field,t,i);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return bt(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[l,c]of r)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),l=this.inner[r];if(l===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return r.length===1?delete this.inner[i]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Or(this.inner,((i,r)=>{for(const[l,c]of r)t(l,c)}))}isEmpty(){return QE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=new Ne(vt.comparator);function xs(){return j2}const cT=new Ne(vt.comparator);function Gl(...s){let t=cT;for(const i of s)t=t.insert(i.key,i);return t}function hT(s){let t=cT;return s.forEach(((i,r)=>t=t.insert(i,r.overlayedDocument))),t}function ga(){return Jl()}function fT(){return Jl()}function Jl(){return new Sa((s=>s.toString()),((s,t)=>s.isEqual(t)))}const B2=new Ne(vt.comparator),q2=new We(vt.comparator);function Qt(...s){let t=q2;for(const i of s)t=t.add(i);return t}const H2=new We(Gt);function F2(){return H2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(t)?"-0":t}}function dT(s){return{integerValue:""+s}}function mT(s,t){return _2(t)?dT(t):ng(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this._=void 0}}function G2(s,t,i){return s instanceof lu?(function(l,c){const d={fields:{[XE]:{stringValue:KE},[ZE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Jm(c)&&(c=Lh(c)),c&&(d.fields[$E]=c),{mapValue:d}})(i,t):s instanceof uu?pT(s,t):s instanceof cu?yT(s,t):(function(l,c){const d=gT(l,c),p=o0(d)+o0(l.Ae);return Tm(d)&&Tm(l.Ae)?dT(p):ng(l.serializer,p)})(s,t)}function Q2(s,t,i){return s instanceof uu?pT(s,t):s instanceof cu?yT(s,t):i}function gT(s,t){return s instanceof hu?(function(r){return Tm(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(t)?t:{integerValue:0}:null}class lu extends jh{}class uu extends jh{constructor(t){super(),this.elements=t}}function pT(s,t){const i=_T(t);for(const r of s.elements)i.some((l=>Xi(l,r)))||i.push(r);return{arrayValue:{values:i}}}class cu extends jh{constructor(t){super(),this.elements=t}}function yT(s,t){let i=_T(t);for(const r of s.elements)i=i.filter((l=>!Xi(l,r)));return{arrayValue:{values:i}}}class hu extends jh{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function o0(s){return qe(s.integerValue||s.doubleValue)}function _T(s){return Wm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t,i){this.field=t,this.transform=i}}function Y2(s,t){return s.field.isEqual(t.field)&&(function(r,l){return r instanceof uu&&l instanceof uu||r instanceof cu&&l instanceof cu?Oo(r.elements,l.elements,Xi):r instanceof hu&&l instanceof hu?Xi(r.Ae,l.Ae):r instanceof lu&&l instanceof lu})(s.transform,t.transform)}class K2{constructor(t,i){this.version=t,this.transformResults=i}}class mn{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new mn}static exists(t){return new mn(void 0,t)}static updateTime(t){return new mn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ah(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Bh{}function ET(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new qh(s.key,mn.none()):new vu(s.key,s.data,mn.none());{const i=s.data,r=In.empty();let l=new We(dn.comparator);for(let c of t.fields)if(!l.has(c)){let d=i.field(c);d===null&&c.length>1&&(c=c.popLast(),d=i.field(c)),d===null?r.delete(c):r.set(c,d),l=l.add(c)}return new Mr(s.key,r,new Zn(l.toArray()),mn.none())}}function X2(s,t,i){s instanceof vu?(function(l,c,d){const p=l.value.clone(),_=u0(l.fieldTransforms,c,d.transformResults);p.setAll(_),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,t,i):s instanceof Mr?(function(l,c,d){if(!ah(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=u0(l.fieldTransforms,c,d.transformResults),_=c.data;_.setAll(TT(l)),_.setAll(p),c.convertToFoundDocument(d.version,_).setHasCommittedMutations()})(s,t,i):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,t,i)}function Wl(s,t,i,r){return s instanceof vu?(function(c,d,p,_){if(!ah(c.precondition,d))return p;const y=c.value.clone(),A=c0(c.fieldTransforms,_,d);return y.setAll(A),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,t,i,r):s instanceof Mr?(function(c,d,p,_){if(!ah(c.precondition,d))return p;const y=c0(c.fieldTransforms,_,d),A=d.data;return A.setAll(TT(c)),A.setAll(y),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(s,t,i,r):(function(c,d,p){return ah(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,t,i)}function $2(s,t){let i=null;for(const r of s.fieldTransforms){const l=t.data.field(r.field),c=gT(r.transform,l||null);c!=null&&(i===null&&(i=In.empty()),i.set(r.field,c))}return i||null}function l0(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Oo(r,l,((c,d)=>Y2(c,d)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class vu extends Bh{constructor(t,i,r,l=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Mr extends Bh{constructor(t,i,r,l,c=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function TT(s){const t=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const r=s.data.field(i);t.set(i,r)}})),t}function u0(s,t,i){const r=new Map;Jt(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const c=s[l],d=c.transform,p=t.data.field(c.field);r.set(c.field,Q2(d,p,i[l]))}return r}function c0(s,t,i){const r=new Map;for(const l of s){const c=l.transform,d=i.data.field(l.field);r.set(l.field,G2(c,d,t))}return r}class qh extends Bh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AT extends Bh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(t,i,r,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&X2(c,t,r[l])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=Wl(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=Wl(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=fT();return this.mutations.forEach((l=>{const c=t.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=i.has(l.key)?null:p;const _=ET(d,p);_!==null&&r.set(l.key,_),d.isValidDocument()||d.convertToNoDocument(Ct.min())})),r}keys(){return this.mutations.reduce(((t,i)=>t.add(i.key)),Qt())}isEqual(t){return this.batchId===t.batchId&&Oo(this.mutations,t.mutations,((i,r)=>l0(i,r)))&&Oo(this.baseMutations,t.baseMutations,((i,r)=>l0(i,r)))}}class ig{constructor(t,i,r,l){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=l}static from(t,i,r){Jt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let l=(function(){return B2})();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,r[d].version);return new ig(t,i,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,Zt;function ST(s){switch(s){case X.OK:return bt(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return bt(15467,{code:s})}}function bT(s){if(s===void 0)return Ds("GRPC error has no .code"),X.UNKNOWN;switch(s){case Ke.OK:return X.OK;case Ke.CANCELLED:return X.CANCELLED;case Ke.UNKNOWN:return X.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return X.INTERNAL;case Ke.UNAVAILABLE:return X.UNAVAILABLE;case Ke.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Ke.NOT_FOUND:return X.NOT_FOUND;case Ke.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Ke.ABORTED:return X.ABORTED;case Ke.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Ke.DATA_LOSS:return X.DATA_LOSS;default:return bt(39323,{code:s})}}(Zt=Ke||(Ke={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=new Sr([4294967295,4294967295],0);function h0(s){const t=tI().encode(s),i=new UE;return i.update(t),new Uint8Array(i.digest())}function f0(s){const t=new DataView(s.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Sr([i,r],0),new Sr([l,c],0)]}class sg{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Ql(`Invalid padding: ${i}`);if(r<0)throw new Ql(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Ql(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new Ql(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=Sr.fromNumber(this.ge)}ye(t,i,r){let l=t.add(i.multiply(Sr.fromNumber(r)));return l.compare(eI)===1&&(l=new Sr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=h0(t),[r,l]=f0(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,l,c);if(!this.we(d))return!1}return!0}static create(t,i,r){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new sg(c,l,i);return r.forEach((p=>d.insert(p))),d}insert(t){if(this.ge===0)return;const i=h0(t),[r,l]=f0(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,l,c);this.Se(d)}}Se(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class Ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(t,i,r,l,c){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const l=new Map;return l.set(t,Eu.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new Hh(Ct.min(),l,new Ne(Gt),xs(),Qt())}}class Eu{constructor(t,i,r,l,c){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new Eu(r,i,Qt(),Qt(),Qt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t,i,r,l){this.be=t,this.removedTargetIds=i,this.key=r,this.De=l}}class wT{constructor(t,i){this.targetId=t,this.Ce=i}}class RT{constructor(t,i,r=gn.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=l}}class d0{constructor(){this.ve=0,this.Fe=m0(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Qt(),i=Qt(),r=Qt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:r=r.add(l);break;default:bt(38017,{changeType:c})}})),new Eu(this.Me,this.xe,t,i,r)}qe(){this.Oe=!1,this.Fe=m0()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Jt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nI{constructor(t){this.Ge=t,this.ze=new Map,this.je=xs(),this.Je=$c(),this.He=$c(),this.Ye=new Ne(Gt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,(i=>{const r=this.nt(i);switch(t.state){case 0:this.rt(i)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),r.Le(t.resumeToken));break;default:bt(56790,{state:t.state})}}))}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach(((r,l)=>{this.rt(l)&&i(l)}))}st(t){const i=t.targetId,r=t.Ce.count,l=this.ot(i);if(l){const c=l.target;if(Sm(c))if(r===0){const d=new vt(c.path);this.et(i,d,rn.newNoDocument(d,Ct.min()))}else Jt(r===1,20013,{expectedCount:r});else{const d=this._t(i);if(d!==r){const p=this.ut(t),_=p?this.ct(p,t,d):1;if(_!==0){this.it(i);const y=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,y)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:c=0}=i;let d,p;try{d=Cr(r).toUint8Array()}catch(_){if(_ instanceof YE)return xo("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{p=new sg(d,l,c)}catch(_){return xo(_ instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return p.ge===0?null:p}ct(t,i,r){return i.Ce.count===r-this.Pt(t,i.targetId)?0:2}Pt(t,i){const r=this.Ge.getRemoteKeysForTarget(i);let l=0;return r.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(p)||(this.et(i,c,null),l++)})),l}Tt(t){const i=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&Sm(p.target)){const _=new vt(p.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,rn.newNoDocument(_,t))}c.Be&&(i.set(d,c.ke()),c.qe())}}));let r=Qt();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((_=>{const y=this.ot(_);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(t)));const l=new Hh(t,i,this.Ye,this.je,r);return this.je=xs(),this.Je=$c(),this.He=$c(),this.Ye=new Ne(Gt),l}Xe(t,i){if(!this.rt(t))return;const r=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,r),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,r){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),r&&(this.je=this.je.insert(i,r))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new d0,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new We(Gt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new We(Gt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||ft("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new d0),this.Ge.getRemoteKeysForTarget(t).forEach((i=>{this.et(t,i,null)}))}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function $c(){return new Ne(vt.comparator)}function m0(){return new Ne(vt.comparator)}const iI={asc:"ASCENDING",desc:"DESCENDING"},sI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rI={and:"AND",or:"OR"};class aI{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function Rm(s,t){return s.useProto3Json||_u(t)?t:{value:t}}function Th(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function IT(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function oI(s,t){return Th(s,t.toTimestamp())}function Jn(s){return Jt(!!s,49232),Ct.fromTimestamp((function(i){const r=Ir(i);return new Ae(r.seconds,r.nanos)})(s))}function rg(s,t){return Im(s,t).canonicalString()}function Im(s,t){const i=(function(l){return new pe(["projects",l.projectId,"databases",l.database])})(s).child("documents");return t===void 0?i:i.child(t)}function CT(s){const t=pe.fromString(s);return Jt(VT(t),10190,{key:t.toString()}),t}function Ah(s,t){return rg(s.databaseId,t.path)}function tu(s,t){const i=CT(t);if(i.get(1)!==s.databaseId.projectId)throw new ct(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new ct(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new vt(DT(i))}function NT(s,t){return rg(s.databaseId,t)}function lI(s){const t=CT(s);return t.length===4?pe.emptyPath():DT(t)}function Cm(s){return new pe(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function DT(s){return Jt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function g0(s,t,i){return{name:Ah(s,t),fields:i.value.mapValue.fields}}function uI(s,t){return"found"in t?(function(r,l){Jt(!!l.found,43571),l.found.name,l.found.updateTime;const c=tu(r,l.found.name),d=Jn(l.found.updateTime),p=l.found.createTime?Jn(l.found.createTime):Ct.min(),_=new In({mapValue:{fields:l.found.fields}});return rn.newFoundDocument(c,d,p,_)})(s,t):"missing"in t?(function(r,l){Jt(!!l.missing,3894),Jt(!!l.readTime,22933);const c=tu(r,l.missing),d=Jn(l.readTime);return rn.newNoDocument(c,d)})(s,t):bt(7234,{result:t})}function cI(s,t){let i;if("targetChange"in t){t.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:bt(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(y,A){return y.useProto3Json?(Jt(A===void 0||typeof A=="string",58123),gn.fromBase64String(A||"")):(Jt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),gn.fromUint8Array(A||new Uint8Array))})(s,t.targetChange.resumeToken),d=t.targetChange.cause,p=d&&(function(y){const A=y.code===void 0?X.UNKNOWN:bT(y.code);return new ct(A,y.message||"")})(d);i=new RT(r,l,c,p||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const l=tu(s,r.document.name),c=Jn(r.document.updateTime),d=r.document.createTime?Jn(r.document.createTime):Ct.min(),p=new In({mapValue:{fields:r.document.fields}}),_=rn.newFoundDocument(l,c,d,p),y=r.targetIds||[],A=r.removedTargetIds||[];i=new oh(y,A,_.key,_)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const l=tu(s,r.document),c=r.readTime?Jn(r.readTime):Ct.min(),d=rn.newNoDocument(l,c),p=r.removedTargetIds||[];i=new oh([],p,d.key,d)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const l=tu(s,r.document),c=r.removedTargetIds||[];i=new oh([],c,l,null)}else{if(!("filter"in t))return bt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:l=0,unchangedNames:c}=r,d=new W2(l,c),p=r.targetId;i=new wT(p,d)}}return i}function xT(s,t){let i;if(t instanceof vu)i={update:g0(s,t.key,t.value)};else if(t instanceof qh)i={delete:Ah(s,t.key)};else if(t instanceof Mr)i={update:g0(s,t.key,t.data),updateMask:vI(t.fieldMask)};else{if(!(t instanceof AT))return bt(16599,{Vt:t.type});i={verify:Ah(s,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map((r=>(function(c,d){const p=d.transform;if(p instanceof lu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof uu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof cu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof hu)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw bt(20930,{transform:d.transform})})(0,r)))),t.precondition.isNone||(i.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:oI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:bt(27497)})(s,t.precondition)),i}function hI(s,t){return s&&s.length>0?(Jt(t!==void 0,14353),s.map((i=>(function(l,c){let d=l.updateTime?Jn(l.updateTime):Jn(c);return d.isEqual(Ct.min())&&(d=Jn(c)),new K2(d,l.transformResults||[])})(i,t)))):[]}function fI(s,t){return{documents:[NT(s,t.path)]}}function dI(s,t){const i={structuredQuery:{}},r=t.path;let l;t.collectionGroup!==null?(l=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=NT(s,l);const c=(function(y){if(y.length!==0)return MT(Ii.create(y,"and"))})(t.filters);c&&(i.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((A=>(function(I){return{field:Ao(I.field),direction:pI(I.dir)}})(A)))})(t.orderBy);d&&(i.structuredQuery.orderBy=d);const p=Rm(s,t.limit);return p!==null&&(i.structuredQuery.limit=p),t.startAt&&(i.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(i.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:i,parent:l}}function mI(s){let t=lI(s.parent);const i=s.structuredQuery,r=i.from?i.from.length:0;let l=null;if(r>0){Jt(r===1,65062);const A=i.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let c=[];i.where&&(c=(function(S){const I=OT(S);return I instanceof Ii&&iT(I)?I.getFilters():[I]})(i.where));let d=[];i.orderBy&&(d=(function(S){return S.map((I=>(function(et){return new ou(So(et.field),(function(it){switch(it){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(et.direction))})(I)))})(i.orderBy));let p=null;i.limit&&(p=(function(S){let I;return I=typeof S=="object"?S.value:S,_u(I)?null:I})(i.limit));let _=null;i.startAt&&(_=(function(S){const I=!!S.before,G=S.values||[];return new Eh(G,I)})(i.startAt));let y=null;return i.endAt&&(y=(function(S){const I=!S.before,G=S.values||[];return new Eh(G,I)})(i.endAt)),L2(t,l,d,c,p,"F",_,y)}function gI(s,t){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt(28987,{purpose:l})}})(t.purpose);return i==null?null:{"goog-listen-tags":i}}function OT(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=So(i.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=So(i.unaryFilter.field);return Xe.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=So(i.unaryFilter.field);return Xe.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=So(i.unaryFilter.field);return Xe.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return bt(61313);default:return bt(60726)}})(s):s.fieldFilter!==void 0?(function(i){return Xe.create(So(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return bt(58110);default:return bt(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return Ii.create(i.compositeFilter.filters.map((r=>OT(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return bt(1026)}})(i.compositeFilter.op))})(s):bt(30097,{filter:s})}function pI(s){return iI[s]}function yI(s){return sI[s]}function _I(s){return rI[s]}function Ao(s){return{fieldPath:s.canonicalString()}}function So(s){return dn.fromServerFormat(s.fieldPath)}function MT(s){return s instanceof Xe?(function(i){if(i.op==="=="){if(n0(i.value))return{unaryFilter:{field:Ao(i.field),op:"IS_NAN"}};if(e0(i.value))return{unaryFilter:{field:Ao(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(n0(i.value))return{unaryFilter:{field:Ao(i.field),op:"IS_NOT_NAN"}};if(e0(i.value))return{unaryFilter:{field:Ao(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(i.field),op:yI(i.op),value:i.value}}})(s):s instanceof Ii?(function(i){const r=i.getFilters().map((l=>MT(l)));return r.length===1?r[0]:{compositeFilter:{op:_I(i.op),filters:r}}})(s):bt(54877,{filter:s})}function vI(s){const t=[];return s.fields.forEach((i=>t.push(i.canonicalString()))),{fieldPaths:t}}function VT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(t,i,r,l,c=Ct.min(),d=Ct.min(),p=gn.EMPTY_BYTE_STRING,_=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=_}withSequenceNumber(t){return new vr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(t){this.yt=t}}function TI(s){const t=mI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?wm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.Cn=new SI}addToCollectionParentIndex(t,i){return this.Cn.add(i),tt.resolve()}getCollectionParents(t,i){return tt.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return tt.resolve()}deleteFieldIndex(t,i){return tt.resolve()}deleteAllFieldIndexes(t){return tt.resolve()}createTargetIndexes(t,i){return tt.resolve()}getDocumentsMatchingTarget(t,i){return tt.resolve(null)}getIndexType(t,i){return tt.resolve(0)}getFieldIndexes(t,i){return tt.resolve([])}getNextCollectionGroupToUpdate(t){return tt.resolve(null)}getMinOffset(t,i){return tt.resolve(Rr.min())}getMinOffsetFromCollectionGroup(t,i){return tt.resolve(Rr.min())}updateCollectionGroup(t,i,r){return tt.resolve()}updateIndexEntries(t,i){return tt.resolve()}}class SI{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i]||new We(pe.comparator),c=!l.has(r);return this.index[i]=l.add(r),c}has(t){const i=t.lastSegment(),r=t.popLast(),l=this.index[i];return l&&l.has(r)}getEntries(t){return(this.index[t]||new We(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UT=41943040;class kn{static withCacheSize(t){return new kn(t,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(UT,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Uo(0)}static cr(){return new Uo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="LruGarbageCollector",bI=1048576;function _0([s,t],[i,r]){const l=Gt(s,i);return l===0?Gt(t,r):l}class wI{constructor(t){this.Ir=t,this.buffer=new We(_0),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();_0(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class RI{constructor(t,i,r){this.garbageCollector=t,this.asyncQueue=i,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ft(y0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){qo(i)?ft(y0,"Ignoring IndexedDB error during garbage collection: ",i):await Bo(i)}await this.Vr(3e5)}))}}class II{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next((r=>Math.floor(i/100*r)))}nthSequenceNumber(t,i){if(i===0)return tt.resolve(Uh.ce);const r=new wI(i);return this.mr.forEachTarget(t,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(t,i,r){return this.mr.removeTargets(t,i,r)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),tt.resolve(p0)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),p0):this.yr(t,i)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let r,l,c,d,p,_,y;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),l=this.params.maximumSequenceNumbersToCollect):l=S,d=Date.now(),this.nthSequenceNumber(t,l)))).next((S=>(r=S,p=Date.now(),this.removeTargets(t,r,i)))).next((S=>(c=S,_=Date.now(),this.removeOrphanedDocuments(t,r)))).next((S=>(y=Date.now(),Eo()<=Ft.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(_-p)+`ms
	Removed ${S} documents in `+(y-_)+`ms
Total Duration: ${y-A}ms`),tt.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:S}))))}}function CI(s,t){return new II(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.changes=new Sa((t=>t.toString()),((t,i)=>t.isEqual(i))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,rn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?tt.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(t,i,r,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=l}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next((l=>(r=l,this.remoteDocumentCache.getEntry(t,i)))).next((l=>(r!==null&&Wl(r.mutation,l,Zn.empty(),Ae.now()),l)))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next((r=>this.getLocalViewOfDocuments(t,r,Qt()).next((()=>r))))}getLocalViewOfDocuments(t,i,r=Qt()){const l=ga();return this.populateOverlays(t,l,i).next((()=>this.computeViews(t,i,l,r).next((c=>{let d=Gl();return c.forEach(((p,_)=>{d=d.insert(p,_.overlayedDocument)})),d}))))}getOverlayedDocuments(t,i){const r=ga();return this.populateOverlays(t,r,i).next((()=>this.computeViews(t,i,r,Qt())))}populateOverlays(t,i,r){const l=[];return r.forEach((c=>{i.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((d,p)=>{i.set(d,p)}))}))}computeViews(t,i,r,l){let c=xs();const d=Jl(),p=(function(){return Jl()})();return i.forEach(((_,y)=>{const A=r.get(y.key);l.has(y.key)&&(A===void 0||A.mutation instanceof Mr)?c=c.insert(y.key,y):A!==void 0?(d.set(y.key,A.mutation.getFieldMask()),Wl(A.mutation,y,A.mutation.getFieldMask(),Ae.now())):d.set(y.key,Zn.empty())})),this.recalculateAndSaveOverlays(t,c).next((_=>(_.forEach(((y,A)=>d.set(y,A))),i.forEach(((y,A)=>p.set(y,new DI(A,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(t,i){const r=Jl();let l=new Ne(((d,p)=>d-p)),c=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next((d=>{for(const p of d)p.keys().forEach((_=>{const y=i.get(_);if(y===null)return;let A=r.get(_)||Zn.empty();A=p.applyToLocalView(y,A),r.set(_,A);const S=(l.get(p.batchId)||Qt()).add(_);l=l.insert(p.batchId,S)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),y=_.key,A=_.value,S=fT();A.forEach((I=>{if(!c.has(I)){const G=ET(i.get(I),r.get(I));G!==null&&S.set(I,G),c=c.add(I)}})),d.push(this.documentOverlayCache.saveOverlays(t,y,S))}return tt.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,i,r,l){return(function(d){return vt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):oT(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,l):this.getDocumentsMatchingCollectionQuery(t,i,r,l)}getNextDocuments(t,i,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,l-c.size):tt.resolve(ga());let p=iu,_=c;return d.next((y=>tt.forEach(y,((A,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),c.get(A)?tt.resolve():this.remoteDocumentCache.getEntry(t,A).next((I=>{_=_.insert(A,I)}))))).next((()=>this.populateOverlays(t,y,c))).next((()=>this.computeViews(t,_,y,Qt()))).next((A=>({batchId:p,changes:hT(A)})))))}))}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new vt(i)).next((r=>{let l=Gl();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(t,i,r,l){const c=i.collectionGroup;let d=Gl();return this.indexManager.getCollectionParents(t,c).next((p=>tt.forEach(p,(_=>{const y=(function(S,I){return new Ho(I,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(i,_.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,r,l).next((A=>{A.forEach(((S,I)=>{d=d.insert(S,I)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(t,i,r,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,c,l)))).next((d=>{c.forEach(((_,y)=>{const A=y.getKey();d.get(A)===null&&(d=d.insert(A,rn.newInvalidDocument(A)))}));let p=Gl();return d.forEach(((_,y)=>{const A=c.get(_);A!==void 0&&Wl(A.mutation,y,Zn.empty(),Ae.now()),zh(i,y)&&(p=p.insert(_,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return tt.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Jn(l.createTime)}})(i)),tt.resolve()}getNamedQuery(t,i){return tt.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:TI(l.bundledQuery),readTime:Jn(l.readTime)}})(i)),tt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.overlays=new Ne(vt.comparator),this.qr=new Map}getOverlay(t,i){return tt.resolve(this.overlays.get(i))}getOverlays(t,i){const r=ga();return tt.forEach(i,(l=>this.getOverlay(t,l).next((c=>{c!==null&&r.set(l,c)})))).next((()=>r))}saveOverlays(t,i,r){return r.forEach(((l,c)=>{this.St(t,i,c)})),tt.resolve()}removeOverlaysForBatchId(t,i,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),tt.resolve()}getOverlaysForCollection(t,i,r){const l=ga(),c=i.length+1,d=new vt(i.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const _=p.getNext().value,y=_.getKey();if(!i.isPrefixOf(y.path))break;y.path.length===c&&_.largestBatchId>r&&l.set(_.getKey(),_)}return tt.resolve(l)}getOverlaysForCollectionGroup(t,i,r,l){let c=new Ne(((y,A)=>y-A));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===i&&y.largestBatchId>r){let A=c.get(y.largestBatchId);A===null&&(A=ga(),c=c.insert(y.largestBatchId,A)),A.set(y.getKey(),y)}}const p=ga(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((y,A)=>p.set(y,A))),!(p.size()>=l)););return tt.resolve(p)}St(t,i,r){const l=this.overlays.get(r.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new J2(i,r));let c=this.qr.get(i);c===void 0&&(c=Qt(),this.qr.set(i,c)),this.qr.set(i,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(t){return tt.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,tt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(){this.Qr=new We(sn.$r),this.Ur=new We(sn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const r=new sn(t,i);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,i){t.forEach((r=>this.addReference(r,i)))}removeReference(t,i){this.Gr(new sn(t,i))}zr(t,i){t.forEach((r=>this.removeReference(r,i)))}jr(t){const i=new vt(new pe([])),r=new sn(i,t),l=new sn(i,t+1),c=[];return this.Ur.forEachInRange([r,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new vt(new pe([])),r=new sn(i,t),l=new sn(i,t+1);let c=Qt();return this.Ur.forEachInRange([r,l],(d=>{c=c.add(d.key)})),c}containsKey(t){const i=new sn(t,0),r=this.Qr.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class sn{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return vt.comparator(t.key,i.key)||Gt(t.Yr,i.Yr)}static Kr(t,i){return Gt(t.Yr,i.Yr)||vt.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new We(sn.$r)}checkEmpty(t){return tt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Z2(c,i,r,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new sn(p.key,c)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return tt.resolve(d)}lookupMutationBatch(t,i){return tt.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,l=this.ei(r),c=l<0?0:l;return tt.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return tt.resolve(this.mutationQueue.length===0?Zm:this.tr-1)}getAllMutationBatches(t){return tt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new sn(i,0),l=new sn(i,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,l],(d=>{const p=this.Xr(d.Yr);c.push(p)})),tt.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new We(Gt);return i.forEach((l=>{const c=new sn(l,0),d=new sn(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{r=r.add(p.Yr)}))})),tt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,l=r.length+1;let c=r;vt.isDocumentKey(c)||(c=c.child(""));const d=new sn(new vt(c),0);let p=new We(Gt);return this.Zr.forEachWhile((_=>{const y=_.key.path;return!!r.isPrefixOf(y)&&(y.length===l&&(p=p.add(_.Yr)),!0)}),d),tt.resolve(this.ti(p))}ti(t){const i=[];return t.forEach((r=>{const l=this.Xr(r);l!==null&&i.push(l)})),i}removeMutationBatch(t,i){Jt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return tt.forEach(i.mutations,(l=>{const c=new sn(l.key,i.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,i){const r=new sn(i,0),l=this.Zr.firstAfterOrEqual(r);return tt.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,tt.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t){this.ri=t,this.docs=(function(){return new Ne(vt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,l=this.docs.get(r),c=l?l.size:0,d=this.ri(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return tt.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(i))}getEntries(t,i){let r=xs();return i.forEach((l=>{const c=this.docs.get(l);r=r.insert(l,c?c.document.mutableCopy():rn.newInvalidDocument(l))})),tt.resolve(r)}getDocumentsMatchingQuery(t,i,r,l){let c=xs();const d=i.path,p=new vt(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(p);for(;_.hasNext();){const{key:y,value:{document:A}}=_.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||m2(d2(A),r)<=0||(l.has(A.key)||zh(i,A))&&(c=c.insert(A.key,A.mutableCopy()))}return tt.resolve(c)}getAllFromCollectionGroup(t,i,r,l){bt(9500)}ii(t,i){return tt.forEach(this.docs,(r=>i(r)))}newChangeBuffer(t){return new PI(this)}getSize(t){return tt.resolve(this.size)}}class PI extends NI{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(r)})),tt.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t){this.persistence=t,this.si=new Sa((i=>tg(i)),eg),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.oi=0,this._i=new ag,this.targetCount=0,this.ai=Uo.ur()}forEachTarget(t,i){return this.si.forEach(((r,l)=>i(l))),tt.resolve()}getLastRemoteSnapshotVersion(t){return tt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return tt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),tt.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.oi&&(this.oi=i),tt.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new Uo(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,tt.resolve()}updateTargetData(t,i){return this.Pr(i),tt.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,tt.resolve()}removeTargets(t,i,r){let l=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=i&&r.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(t,p.targetId)),l++)})),tt.waitFor(c).next((()=>l))}getTargetCount(t){return tt.resolve(this.targetCount)}getTargetData(t,i){const r=this.si.get(i)||null;return tt.resolve(r)}addMatchingKeys(t,i,r){return this._i.Wr(i,r),tt.resolve()}removeMatchingKeys(t,i,r){this._i.zr(i,r);const l=this.persistence.referenceDelegate,c=[];return l&&i.forEach((d=>{c.push(l.markPotentiallyOrphaned(t,d))})),tt.waitFor(c)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),tt.resolve()}getMatchingKeysForTargetId(t,i){const r=this._i.Hr(i);return tt.resolve(r)}containsKey(t,i){return tt.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(t,i){this.ui={},this.overlays={},this.ci=new Uh(0),this.li=!1,this.li=!0,this.hi=new VI,this.referenceDelegate=t(this),this.Pi=new kI(this),this.indexManager=new AI,this.remoteDocumentCache=(function(l){return new LI(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new EI(i),this.Ii=new OI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new MI,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.ui[t.toKey()];return r||(r=new UI(i,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,r){ft("MemoryPersistence","Starting transaction:",t);const l=new zI(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,i){return tt.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,i))))}}class zI extends p2{constructor(t){super(),this.currentSequenceNumber=t}}class og{constructor(t){this.persistence=t,this.Ri=new ag,this.Vi=null}static mi(t){return new og(t)}get fi(){if(this.Vi)return this.Vi;throw bt(60996)}addReference(t,i,r){return this.Ri.addReference(r,i),this.fi.delete(r.toString()),tt.resolve()}removeReference(t,i,r){return this.Ri.removeReference(r,i),this.fi.add(r.toString()),tt.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),tt.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(t,i)))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tt.forEach(this.fi,(r=>{const l=vt.fromPath(r);return this.gi(t,l).next((c=>{c||i.removeEntry(l,Ct.min())}))})).next((()=>(this.Vi=null,i.apply(t))))}updateLimboDocument(t,i){return this.gi(t,i).next((r=>{r?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(t){return 0}gi(t,i){return tt.or([()=>tt.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class Sh{constructor(t,i){this.persistence=t,this.pi=new Sa((r=>v2(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=CI(this,i)}static mi(t,i){return new Sh(t,i)}Ei(){}di(t){return tt.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>i.next((l=>r+l))))}wr(t){let i=0;return this.pr(t,(r=>{i++})).next((()=>i))}pr(t,i){return tt.forEach(this.pi,((r,l)=>this.br(t,r,l).next((c=>c?tt.resolve():i(l)))))}removeTargets(t,i,r){return this.persistence.getTargetCache().removeTargets(t,i,r)}removeOrphanedDocuments(t,i){let r=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(d=>this.br(t,d,i).next((p=>{p||(r++,c.removeEntry(d,Ct.min()))})))).next((()=>c.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),tt.resolve()}removeTarget(t,i){const r=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),tt.resolve()}removeReference(t,i,r){return this.pi.set(r,t.currentSequenceNumber),tt.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),tt.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=sh(t.data.value)),i}br(t,i,r){return tt.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return tt.resolve(l!==void 0&&l>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,i,r,l){this.targetId=t,this.fromCache=i,this.Es=r,this.ds=l}static As(t,i){let r=Qt(),l=Qt();for(const c of i.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new lg(t,i.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return U1()?8:y2(Tn())>0?6:4})()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,r,l){const c={result:null};return this.ys(t,i).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(t,i,l,r).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new jI;return this.Ss(t,i,d).next((p=>{if(c.result=p,this.Vs)return this.bs(t,i,d,p.size)}))})).next((()=>c.result))}bs(t,i,r,l){return r.documentReadCount<this.fs?(Eo()<=Ft.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",To(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),tt.resolve()):(Eo()<=Ft.DEBUG&&ft("QueryEngine","Query:",To(i),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(Eo()<=Ft.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",To(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Gi(i))):tt.resolve())}ys(t,i){if(a0(i))return tt.resolve(null);let r=Gi(i);return this.indexManager.getIndexType(t,r).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=wm(i,null,"F"),r=Gi(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next((c=>{const d=Qt(...c);return this.ps.getDocuments(t,d).next((p=>this.indexManager.getMinOffset(t,r).next((_=>{const y=this.Ds(i,p);return this.Cs(i,y,d,_.readTime)?this.ys(t,wm(i,null,"F")):this.vs(t,y,i,_)}))))})))))}ws(t,i,r,l){return a0(i)||l.isEqual(Ct.min())?tt.resolve(null):this.ps.getDocuments(t,r).next((c=>{const d=this.Ds(i,c);return this.Cs(i,d,r,l)?tt.resolve(null):(Eo()<=Ft.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),To(i)),this.vs(t,d,i,f2(l,iu)).next((p=>p)))}))}Ds(t,i){let r=new We(uT(t));return i.forEach(((l,c)=>{zh(t,c)&&(r=r.add(c))})),r}Cs(t,i,r,l){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const c=t.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,i,r){return Eo()<=Ft.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",To(i)),this.ps.getDocumentsMatchingQuery(t,i,Rr.min(),r)}vs(t,i,r,l){return this.ps.getDocumentsMatchingQuery(t,r,l).next((c=>(i.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="LocalStore",qI=3e8;class HI{constructor(t,i,r,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new Ne(Gt),this.xs=new Sa((c=>tg(c)),eg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new xI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>t.collect(i,this.Ms)))}}function FI(s,t,i,r){return new HI(s,t,i,r)}async function PT(s,t){const i=Ot(s);return await i.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return i.mutationQueue.getAllMutationBatches(r).next((c=>(l=c,i.Bs(t),i.mutationQueue.getAllMutationBatches(r)))).next((c=>{const d=[],p=[];let _=Qt();for(const y of l){d.push(y.batchId);for(const A of y.mutations)_=_.add(A.key)}for(const y of c){p.push(y.batchId);for(const A of y.mutations)_=_.add(A.key)}return i.localDocuments.getDocuments(r,_).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function GI(s,t){const i=Ot(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=t.batch.keys(),c=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,_,y,A){const S=y.batch,I=S.keys();let G=tt.resolve();return I.forEach((et=>{G=G.next((()=>A.getEntry(_,et))).next((ot=>{const it=y.docVersions.get(et);Jt(it!==null,48541),ot.version.compareTo(it)<0&&(S.applyToRemoteDocument(ot,y),ot.isValidDocument()&&(ot.setReadTime(y.commitVersion),A.addEntry(ot)))}))})),G.next((()=>p.mutationQueue.removeMutationBatch(_,S)))})(i,r,t,c).next((()=>c.apply(r))).next((()=>i.mutationQueue.performConsistencyCheck(r))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(r,l,t.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let _=Qt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(_=_.add(p.batch.mutations[y].key));return _})(t)))).next((()=>i.localDocuments.getDocuments(r,l)))}))}function kT(s){const t=Ot(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>t.Pi.getLastRemoteSnapshotVersion(i)))}function QI(s,t){const i=Ot(s),r=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const p=[];t.targetChanges.forEach(((A,S)=>{const I=l.get(S);if(!I)return;p.push(i.Pi.removeMatchingKeys(c,A.removedDocuments,S).next((()=>i.Pi.addMatchingKeys(c,A.addedDocuments,S))));let G=I.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(S)!==null?G=G.withResumeToken(gn.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):A.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(A.resumeToken,r)),l=l.insert(S,G),(function(ot,it,wt){return ot.resumeToken.approximateByteSize()===0||it.snapshotVersion.toMicroseconds()-ot.snapshotVersion.toMicroseconds()>=qI?!0:wt.addedDocuments.size+wt.modifiedDocuments.size+wt.removedDocuments.size>0})(I,G,A)&&p.push(i.Pi.updateTargetData(c,G))}));let _=xs(),y=Qt();if(t.documentUpdates.forEach((A=>{t.resolvedLimboDocuments.has(A)&&p.push(i.persistence.referenceDelegate.updateLimboDocument(c,A))})),p.push(YI(c,d,t.documentUpdates).next((A=>{_=A.ks,y=A.qs}))),!r.isEqual(Ct.min())){const A=i.Pi.getLastRemoteSnapshotVersion(c).next((S=>i.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(A)}return tt.waitFor(p).next((()=>d.apply(c))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,_,y))).next((()=>_))})).then((c=>(i.Ms=l,c)))}function YI(s,t,i){let r=Qt(),l=Qt();return i.forEach((c=>r=r.add(c))),t.getEntries(s,r).next((c=>{let d=xs();return i.forEach(((p,_)=>{const y=c.get(p);_.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),_.isNoDocument()&&_.version.isEqual(Ct.min())?(t.removeEntry(p,_.readTime),d=d.insert(p,_)):!y.isValidDocument()||_.version.compareTo(y.version)>0||_.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(_),d=d.insert(p,_)):ft(ug,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",_.version)})),{ks:d,qs:l}}))}function KI(s,t){const i=Ot(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=Zm),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function XI(s,t){const i=Ot(s);return i.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return i.Pi.getTargetData(r,t).next((c=>c?(l=c,tt.resolve(l)):i.Pi.allocateTargetId(r).next((d=>(l=new vr(t,d,"TargetPurposeListen",r.currentSequenceNumber),i.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=i.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(r.targetId,r),i.xs.set(t,r.targetId)),r}))}async function Nm(s,t,i){const r=Ot(s),l=r.Ms.get(t),c=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",c,(d=>r.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!qo(d))throw d;ft(ug,`Failed to update sequence numbers for target ${t}: ${d}`)}r.Ms=r.Ms.remove(t),r.xs.delete(l.target)}function v0(s,t,i){const r=Ot(s);let l=Ct.min(),c=Qt();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(_,y,A){const S=Ot(_),I=S.xs.get(A);return I!==void 0?tt.resolve(S.Ms.get(I)):S.Pi.getTargetData(y,A)})(r,d,Gi(t)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,p.targetId).next((_=>{c=_}))})).next((()=>r.Fs.getDocumentsMatchingQuery(d,t,i?l:Ct.min(),i?c:Qt()))).next((p=>($I(r,k2(t),p),{documents:p,Qs:c})))))}function $I(s,t,i){let r=s.Os.get(t)||Ct.min();i.forEach(((l,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(t,r)}class E0{constructor(){this.activeTargetIds=F2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ZI{constructor(){this.Mo=new E0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,r){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new E0,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="ConnectivityMonitor";class A0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ft(T0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ft(T0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zc=null;function Dm(){return Zc===null?Zc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zc++,"0x"+Zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="RestConnection",WI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===_h?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(t,i,r,l,c){const d=Dm(),p=this.zo(t,i.toUriEncodedString());ft(om,`Sending RPC '${t}' ${d}:`,p,r);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,l,c);const{host:y}=new URL(p),A=Po(y);return this.Jo(t,p,_,r,A).then((S=>(ft(om,`Received RPC '${t}' ${d}: `,S),S)),(S=>{throw xo(om,`RPC '${t}' ${d} failed with error: `,S,"url: ",p,"request:",r),S}))}Ho(t,i,r,l,c,d){return this.Go(t,i,r,l,c)}jo(t,i,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,c)=>t[c]=l)),r&&r.headers.forEach(((l,c)=>t[c]=l))}zo(t,i){const r=WI[t];return`${this.Uo}/v1/${i}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class nC extends tC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,r,l,c){const d=Dm();return new Promise(((p,_)=>{const y=new LE;y.setWithCredentials(!0),y.listenOnce(PE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case ih.NO_ERROR:const S=y.getResponseJson();ft(vn,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(S)),p(S);break;case ih.TIMEOUT:ft(vn,`RPC '${t}' ${d} timed out`),_(new ct(X.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const I=y.getStatus();if(ft(vn,`RPC '${t}' ${d} failed with status:`,I,"response text:",y.getResponseText()),I>0){let G=y.getResponseJson();Array.isArray(G)&&(G=G[0]);const et=G?.error;if(et&&et.status&&et.message){const ot=(function(wt){const Vt=wt.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(Vt)>=0?Vt:X.UNKNOWN})(et.status);_(new ct(ot,et.message))}else _(new ct(X.UNKNOWN,"Server responded with status "+y.getStatus()))}else _(new ct(X.UNAVAILABLE,"Connection failed."));break;default:bt(9055,{l_:t,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ft(vn,`RPC '${t}' ${d} completed.`)}}));const A=JSON.stringify(l);ft(vn,`RPC '${t}' ${d} sending request:`,l),y.send(i,"POST",A,r,15)}))}T_(t,i,r){const l=Dm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=jE(),p=zE(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(_.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,i,r),_.encodeInitMessageHeaders=!0;const A=c.join("");ft(vn,`Creating RPC '${t}' stream ${l}: ${A}`,_);const S=d.createWebChannel(A,_);this.I_(S);let I=!1,G=!1;const et=new eC({Yo:it=>{G?ft(vn,`Not sending because RPC '${t}' stream ${l} is closed:`,it):(I||(ft(vn,`Opening RPC '${t}' stream ${l} transport.`),S.open(),I=!0),ft(vn,`RPC '${t}' stream ${l} sending:`,it),S.send(it))},Zo:()=>S.close()}),ot=(it,wt,Vt)=>{it.listen(wt,(It=>{try{Vt(It)}catch(se){setTimeout((()=>{throw se}),0)}}))};return ot(S,Fl.EventType.OPEN,(()=>{G||(ft(vn,`RPC '${t}' stream ${l} transport opened.`),et.o_())})),ot(S,Fl.EventType.CLOSE,(()=>{G||(G=!0,ft(vn,`RPC '${t}' stream ${l} transport closed`),et.a_(),this.E_(S))})),ot(S,Fl.EventType.ERROR,(it=>{G||(G=!0,xo(vn,`RPC '${t}' stream ${l} transport errored. Name:`,it.name,"Message:",it.message),et.a_(new ct(X.UNAVAILABLE,"The operation could not be completed")))})),ot(S,Fl.EventType.MESSAGE,(it=>{if(!G){const wt=it.data[0];Jt(!!wt,16349);const Vt=wt,It=Vt?.error||Vt[0]?.error;if(It){ft(vn,`RPC '${t}' stream ${l} received error:`,It);const se=It.status;let oe=(function(b){const C=Ke[b];if(C!==void 0)return bT(C)})(se),Kt=It.message;oe===void 0&&(oe=X.INTERNAL,Kt="Unknown error status: "+se+" with message "+It.message),G=!0,et.a_(new ct(oe,Kt)),S.close()}else ft(vn,`RPC '${t}' stream ${l} received:`,wt),et.u_(wt)}})),ot(p,kE.STAT_EVENT,(it=>{it.stat===_m.PROXY?ft(vn,`RPC '${t}' stream ${l} detected buffering proxy`):it.stat===_m.NOPROXY&&ft(vn,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{et.__()}),0),et}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((i=>i===t))}}function lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(s){return new aI(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(t,i,r=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=i,this.d_=r,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-r);l>0&&ft("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="PersistentStream";class zT{constructor(t,i,r,l,c,d,p,_){this.Mi=t,this.S_=r,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cg(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===X.RESOURCE_EXHAUSTED?(Ds(i.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===i&&this.G_(r,l)}),(r=>{t((()=>{const l=new ct(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(t,i){const r=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ft(S0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget((()=>this.D_===t?i():(ft(S0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iC extends zT{constructor(t,i,r,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,l,d),this.serializer=c}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=cI(this.serializer,t),r=(function(c){if(!("targetChange"in c))return Ct.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ct.min():d.readTime?Jn(d.readTime):Ct.min()})(t);return this.listener.H_(i,r)}Y_(t){const i={};i.database=Cm(this.serializer),i.addTarget=(function(c,d){let p;const _=d.target;if(p=Sm(_)?{documents:fI(c,_)}:{query:dI(c,_).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=IT(c,d.resumeToken);const y=Rm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Ct.min())>0){p.readTime=Th(c,d.snapshotVersion.toTimestamp());const y=Rm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,t);const r=gI(this.serializer,t);r&&(i.labels=r),this.q_(i)}Z_(t){const i={};i.database=Cm(this.serializer),i.removeTarget=t,this.q_(i)}}class sC extends zT{constructor(t,i,r,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return Jt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Jt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Jt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=hI(t.writeResults,t.commitTime),r=Jn(t.commitTime);return this.listener.na(r,i)}ra(){const t={};t.database=Cm(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map((r=>xT(this.serializer,r)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{}class aC extends rC{constructor(t,i,r,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ct(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(t,Im(i,r),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ct(X.UNKNOWN,c.toString())}))}Ho(t,i,r,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(t,Im(i,r),l,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ct(X.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class oC{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ds(i),this.aa=!1):ft("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="RemoteStore";class lC{constructor(t,i,r,l,c){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{r.enqueueAndForget((async()=>{ba(this)&&(ft(Aa,"Restarting streams for network reachability change."),await(async function(_){const y=Ot(_);y.Ea.add(4),await Tu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Gh(y)})(this))}))})),this.Ra=new oC(r,l)}}async function Gh(s){if(ba(s))for(const t of s.da)await t(!0)}async function Tu(s){for(const t of s.da)await t(!1)}function jT(s,t){const i=Ot(s);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),mg(i)?dg(i):Fo(i).O_()&&fg(i,t))}function hg(s,t){const i=Ot(s),r=Fo(i);i.Ia.delete(t),r.O_()&&BT(i,t),i.Ia.size===0&&(r.O_()?r.L_():ba(i)&&i.Ra.set("Unknown"))}function fg(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ct.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Fo(s).Y_(t)}function BT(s,t){s.Va.Ue(t),Fo(s).Z_(t)}function dg(s){s.Va=new nI({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),Fo(s).start(),s.Ra.ua()}function mg(s){return ba(s)&&!Fo(s).x_()&&s.Ia.size>0}function ba(s){return Ot(s).Ea.size===0}function qT(s){s.Va=void 0}async function uC(s){s.Ra.set("Online")}async function cC(s){s.Ia.forEach(((t,i)=>{fg(s,t)}))}async function hC(s,t){qT(s),mg(s)?(s.Ra.ha(t),dg(s)):s.Ra.set("Unknown")}async function fC(s,t,i){if(s.Ra.set("Online"),t instanceof RT&&t.state===2&&t.cause)try{await(async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(s,t)}catch(r){ft(Aa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await bh(s,r)}else if(t instanceof oh?s.Va.Ze(t):t instanceof wT?s.Va.st(t):s.Va.tt(t),!i.isEqual(Ct.min()))try{const r=await kT(s.localStore);i.compareTo(r)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((_,y)=>{if(_.resumeToken.approximateByteSize()>0){const A=c.Ia.get(y);A&&c.Ia.set(y,A.withResumeToken(_.resumeToken,d))}})),p.targetMismatches.forEach(((_,y)=>{const A=c.Ia.get(_);if(!A)return;c.Ia.set(_,A.withResumeToken(gn.EMPTY_BYTE_STRING,A.snapshotVersion)),BT(c,_);const S=new vr(A.target,_,y,A.sequenceNumber);fg(c,S)})),c.remoteSyncer.applyRemoteEvent(p)})(s,i)}catch(r){ft(Aa,"Failed to raise snapshot:",r),await bh(s,r)}}async function bh(s,t,i){if(!qo(t))throw t;s.Ea.add(1),await Tu(s),s.Ra.set("Offline"),i||(i=()=>kT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ft(Aa,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await Gh(s)}))}function HT(s,t){return t().catch((i=>bh(s,i,t)))}async function Qh(s){const t=Ot(s),i=Dr(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Zm;for(;dC(t);)try{const l=await KI(t.localStore,r);if(l===null){t.Ta.length===0&&i.L_();break}r=l.batchId,mC(t,l)}catch(l){await bh(t,l)}FT(t)&&GT(t)}function dC(s){return ba(s)&&s.Ta.length<10}function mC(s,t){s.Ta.push(t);const i=Dr(s);i.O_()&&i.X_&&i.ea(t.mutations)}function FT(s){return ba(s)&&!Dr(s).x_()&&s.Ta.length>0}function GT(s){Dr(s).start()}async function gC(s){Dr(s).ra()}async function pC(s){const t=Dr(s);for(const i of s.Ta)t.ea(i.mutations)}async function yC(s,t,i){const r=s.Ta.shift(),l=ig.from(r,t,i);await HT(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Qh(s)}async function _C(s,t){t&&Dr(s).X_&&await(async function(r,l){if((function(d){return ST(d)&&d!==X.ABORTED})(l.code)){const c=r.Ta.shift();Dr(r).B_(),await HT(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Qh(r)}})(s,t),FT(s)&&GT(s)}async function b0(s,t){const i=Ot(s);i.asyncQueue.verifyOperationInProgress(),ft(Aa,"RemoteStore received new credentials");const r=ba(i);i.Ea.add(3),await Tu(i),r&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await Gh(i)}async function vC(s,t){const i=Ot(s);t?(i.Ea.delete(2),await Gh(i)):t||(i.Ea.add(2),await Tu(i),i.Ra.set("Unknown"))}function Fo(s){return s.ma||(s.ma=(function(i,r,l){const c=Ot(i);return c.sa(),new iC(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:uC.bind(null,s),t_:cC.bind(null,s),r_:hC.bind(null,s),H_:fC.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),mg(s)?dg(s):s.Ra.set("Unknown")):(await s.ma.stop(),qT(s))}))),s.ma}function Dr(s){return s.fa||(s.fa=(function(i,r,l){const c=Ot(i);return c.sa(),new sC(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:gC.bind(null,s),r_:_C.bind(null,s),ta:pC.bind(null,s),na:yC.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await Qh(s)):(await s.fa.stop(),s.Ta.length>0&&(ft(Aa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(t,i,r,l,c){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=l,this.removalCallback=c,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,l,c){const d=Date.now()+r,p=new gg(t,i,d,l,c);return p.start(r),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(X.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pg(s,t){if(Ds("AsyncQueue",`${t}: ${s}`),qo(s))return new ct(X.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(t){return new Co(t.comparator)}constructor(t){this.comparator=t?(i,r)=>t(i,r)||vt.comparator(i.key,r.key):(i,r)=>vt.comparator(i.key,r.key),this.keyedMap=Gl(),this.sortedSet=new Ne(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((i,r)=>(t(i),!1)))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Co)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=r.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((i=>{t.push(i.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new Co;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(){this.ga=new Ne(vt.comparator)}track(t){const i=t.doc.key,r=this.ga.get(i);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(i,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(i):t.type===1&&r.type===2?this.ga=this.ga.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):bt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal(((i,r)=>{t.push(r)})),t}}class Lo{constructor(t,i,r,l,c,d,p,_,y){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=y}static fromInitialDocuments(t,i,r,l,c){const d=[];return i.forEach((p=>{d.push({type:0,doc:p})})),new Lo(t,i,Co.emptySet(i),d,r,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&kh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==r[l].type||!i[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class TC{constructor(){this.queries=R0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const l=Ot(i),c=l.queries;l.queries=R0(),c.forEach(((d,p)=>{for(const _ of p.Sa)_.onError(r)}))})(this,new ct(X.ABORTED,"Firestore shutting down"))}}function R0(){return new Sa((s=>lT(s)),kh)}async function yg(s,t){const i=Ot(s);let r=3;const l=t.query;let c=i.queries.get(l);c?!c.ba()&&t.Da()&&(r=2):(c=new EC,r=t.Da()?0:1);try{switch(r){case 0:c.wa=await i.onListen(l,!0);break;case 1:c.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const p=pg(d,`Initialization of query '${To(t.query)}' failed`);return void t.onError(p)}i.queries.set(l,c),c.Sa.push(t),t.va(i.onlineState),c.wa&&t.Fa(c.wa)&&vg(i)}async function _g(s,t){const i=Ot(s),r=t.query;let l=3;const c=i.queries.get(r);if(c){const d=c.Sa.indexOf(t);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function AC(s,t){const i=Ot(s);let r=!1;for(const l of t){const c=l.query,d=i.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(r=!0);d.wa=l}}r&&vg(i)}function SC(s,t,i){const r=Ot(s),l=r.queries.get(t);if(l)for(const c of l.Sa)c.onError(i);r.queries.delete(t)}function vg(s){s.Ca.forEach((t=>{t.next()}))}var xm,I0;(I0=xm||(xm={})).Ma="default",I0.Cache="cache";class Eg{constructor(t,i,r){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const l of t.docChanges)l.type!==3&&r.push(l);t=new Lo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const r=i!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=Lo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(t){this.key=t}}class YT{constructor(t){this.key=t}}class bC{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qt(),this.mutatedKeys=Qt(),this.eu=uT(t),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(t,i){const r=i?i.iu:new w0,l=i?i.tu:this.tu;let c=i?i.mutatedKeys:this.mutatedKeys,d=l,p=!1;const _=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((A,S)=>{const I=l.get(A),G=zh(this.query,S)?S:null,et=!!I&&this.mutatedKeys.has(I.key),ot=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let it=!1;I&&G?I.data.isEqual(G.data)?et!==ot&&(r.track({type:3,doc:G}),it=!0):this.su(I,G)||(r.track({type:2,doc:G}),it=!0,(_&&this.eu(G,_)>0||y&&this.eu(G,y)<0)&&(p=!0)):!I&&G?(r.track({type:0,doc:G}),it=!0):I&&!G&&(r.track({type:1,doc:I}),it=!0,(_||y)&&(p=!0)),it&&(G?(d=d.add(G),c=ot?c.add(A):c.delete(A)):(d=d.delete(A),c=c.delete(A)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),c=c.delete(A.key),r.track({type:1,doc:A})}return{tu:d,iu:r,Cs:p,mutatedKeys:c}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort(((A,S)=>(function(G,et){const ot=it=>{switch(it){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt(20277,{Rt:it})}};return ot(G)-ot(et)})(A.type,S.type)||this.eu(A.doc,S.doc))),this.ou(r),l=l??!1;const p=i&&!l?this._u():[],_=this.Xa.size===0&&this.current&&!l?1:0,y=_!==this.Za;return this.Za=_,d.length!==0||y?{snapshot:new Lo(this.query,t.tu,c,d,t.mutatedKeys,_===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new w0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),t.modifiedDocuments.forEach((i=>{})),t.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Qt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const i=[];return t.forEach((r=>{this.Xa.has(r)||i.push(new YT(r))})),this.Xa.forEach((r=>{t.has(r)||i.push(new QT(r))})),i}cu(t){this.Ya=t.Qs,this.Xa=Qt();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return Lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tg="SyncEngine";class wC{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class RC{constructor(t){this.key=t,this.hu=!1}}class IC{constructor(t,i,r,l,c,d){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Sa((p=>lT(p)),kh),this.Iu=new Map,this.Eu=new Set,this.du=new Ne(vt.comparator),this.Au=new Map,this.Ru=new ag,this.Vu={},this.mu=new Map,this.fu=Uo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CC(s,t,i=!0){const r=WT(s);let l;const c=r.Tu.get(t);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await KT(r,t,i,!0),l}async function NC(s,t){const i=WT(s);await KT(i,t,!0,!1)}async function KT(s,t,i,r){const l=await XI(s.localStore,Gi(t)),c=l.targetId,d=s.sharedClientState.addLocalQueryTarget(c,i);let p;return r&&(p=await DC(s,t,c,d==="current",l.resumeToken)),s.isPrimaryClient&&i&&jT(s.remoteStore,l),p}async function DC(s,t,i,r,l){s.pu=(S,I,G)=>(async function(ot,it,wt,Vt){let It=it.view.ru(wt);It.Cs&&(It=await v0(ot.localStore,it.query,!1).then((({documents:N})=>it.view.ru(N,It))));const se=Vt&&Vt.targetChanges.get(it.targetId),oe=Vt&&Vt.targetMismatches.get(it.targetId)!=null,Kt=it.view.applyChanges(It,ot.isPrimaryClient,se,oe);return N0(ot,it.targetId,Kt.au),Kt.snapshot})(s,S,I,G);const c=await v0(s.localStore,t,!0),d=new bC(t,c.Qs),p=d.ru(c.documents),_=Eu.createSynthesizedTargetChangeForCurrentChange(i,r&&s.onlineState!=="Offline",l),y=d.applyChanges(p,s.isPrimaryClient,_);N0(s,i,y.au);const A=new wC(t,i,d);return s.Tu.set(t,A),s.Iu.has(i)?s.Iu.get(i).push(t):s.Iu.set(i,[t]),y.snapshot}async function xC(s,t,i){const r=Ot(s),l=r.Tu.get(t),c=r.Iu.get(l.targetId);if(c.length>1)return r.Iu.set(l.targetId,c.filter((d=>!kh(d,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Nm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),i&&hg(r.remoteStore,l.targetId),Om(r,l.targetId)})).catch(Bo)):(Om(r,l.targetId),await Nm(r.localStore,l.targetId,!0))}async function OC(s,t){const i=Ot(s),r=i.Tu.get(t),l=i.Iu.get(r.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),hg(i.remoteStore,r.targetId))}async function MC(s,t,i){const r=jC(s);try{const l=await(function(d,p){const _=Ot(d),y=Ae.now(),A=p.reduce(((G,et)=>G.add(et.key)),Qt());let S,I;return _.persistence.runTransaction("Locally write mutations","readwrite",(G=>{let et=xs(),ot=Qt();return _.Ns.getEntries(G,A).next((it=>{et=it,et.forEach(((wt,Vt)=>{Vt.isValidDocument()||(ot=ot.add(wt))}))})).next((()=>_.localDocuments.getOverlayedDocuments(G,et))).next((it=>{S=it;const wt=[];for(const Vt of p){const It=$2(Vt,S.get(Vt.key).overlayedDocument);It!=null&&wt.push(new Mr(Vt.key,It,tT(It.value.mapValue),mn.exists(!0)))}return _.mutationQueue.addMutationBatch(G,y,wt,p)})).next((it=>{I=it;const wt=it.applyToLocalDocumentSet(S,ot);return _.documentOverlayCache.saveOverlays(G,it.batchId,wt)}))})).then((()=>({batchId:I.batchId,changes:hT(S)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(l.batchId),(function(d,p,_){let y=d.Vu[d.currentUser.toKey()];y||(y=new Ne(Gt)),y=y.insert(p,_),d.Vu[d.currentUser.toKey()]=y})(r,l.batchId,i),await Au(r,l.changes),await Qh(r.remoteStore)}catch(l){const c=pg(l,"Failed to persist write");i.reject(c)}}async function XT(s,t){const i=Ot(s);try{const r=await QI(i.localStore,t);t.targetChanges.forEach(((l,c)=>{const d=i.Au.get(c);d&&(Jt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Jt(d.hu,14607):l.removedDocuments.size>0&&(Jt(d.hu,42227),d.hu=!1))})),await Au(i,r,t)}catch(r){await Bo(r)}}function C0(s,t,i){const r=Ot(s);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const l=[];r.Tu.forEach(((c,d)=>{const p=d.view.va(t);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const _=Ot(d);_.onlineState=p;let y=!1;_.queries.forEach(((A,S)=>{for(const I of S.Sa)I.va(p)&&(y=!0)})),y&&vg(_)})(r.eventManager,t),l.length&&r.Pu.H_(l),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function VC(s,t,i){const r=Ot(s);r.sharedClientState.updateQueryState(t,"rejected",i);const l=r.Au.get(t),c=l&&l.key;if(c){let d=new Ne(vt.comparator);d=d.insert(c,rn.newNoDocument(c,Ct.min()));const p=Qt().add(c),_=new Hh(Ct.min(),new Map,new Ne(Gt),d,p);await XT(r,_),r.du=r.du.remove(c),r.Au.delete(t),Ag(r)}else await Nm(r.localStore,t,!1).then((()=>Om(r,t,i))).catch(Bo)}async function UC(s,t){const i=Ot(s),r=t.batch.batchId;try{const l=await GI(i.localStore,t);ZT(i,r,null),$T(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await Au(i,l)}catch(l){await Bo(l)}}async function LC(s,t,i){const r=Ot(s);try{const l=await(function(d,p){const _=Ot(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let A;return _.mutationQueue.lookupMutationBatch(y,p).next((S=>(Jt(S!==null,37113),A=S.keys(),_.mutationQueue.removeMutationBatch(y,S)))).next((()=>_.mutationQueue.performConsistencyCheck(y))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(y,A,p))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,A))).next((()=>_.localDocuments.getDocuments(y,A)))}))})(r.localStore,t);ZT(r,t,i),$T(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await Au(r,l)}catch(l){await Bo(l)}}function $T(s,t){(s.mu.get(t)||[]).forEach((i=>{i.resolve()})),s.mu.delete(t)}function ZT(s,t,i){const r=Ot(s);let l=r.Vu[r.currentUser.toKey()];if(l){const c=l.get(t);c&&(i?c.reject(i):c.resolve(),l=l.remove(t)),r.Vu[r.currentUser.toKey()]=l}}function Om(s,t,i=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),i&&s.Pu.yu(r,i);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||JT(s,r)}))}function JT(s,t){s.Eu.delete(t.path.canonicalString());const i=s.du.get(t);i!==null&&(hg(s.remoteStore,i),s.du=s.du.remove(t),s.Au.delete(i),Ag(s))}function N0(s,t,i){for(const r of i)r instanceof QT?(s.Ru.addReference(r.key,t),PC(s,r)):r instanceof YT?(ft(Tg,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||JT(s,r.key)):bt(19791,{wu:r})}function PC(s,t){const i=t.key,r=i.path.canonicalString();s.du.get(i)||s.Eu.has(r)||(ft(Tg,"New document in limbo: "+i),s.Eu.add(r),Ag(s))}function Ag(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const i=new vt(pe.fromString(t)),r=s.fu.next();s.Au.set(r,new RC(i)),s.du=s.du.insert(i,r),jT(s.remoteStore,new vr(Gi(Ph(i.path)),r,"TargetPurposeLimboResolution",Uh.ce))}}async function Au(s,t,i){const r=Ot(s),l=[],c=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,_)=>{d.push(r.pu(_,t,i).then((y=>{if((y||i)&&r.isPrimaryClient){const A=y?!y.fromCache:i?.targetChanges.get(_.targetId)?.current;r.sharedClientState.updateQueryState(_.targetId,A?"current":"not-current")}if(y){l.push(y);const A=lg.As(_.targetId,y);c.push(A)}})))})),await Promise.all(d),r.Pu.H_(l),await(async function(_,y){const A=Ot(_);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>tt.forEach(y,(I=>tt.forEach(I.Es,(G=>A.persistence.referenceDelegate.addReference(S,I.targetId,G))).next((()=>tt.forEach(I.ds,(G=>A.persistence.referenceDelegate.removeReference(S,I.targetId,G)))))))))}catch(S){if(!qo(S))throw S;ft(ug,"Failed to update sequence numbers: "+S)}for(const S of y){const I=S.targetId;if(!S.fromCache){const G=A.Ms.get(I),et=G.snapshotVersion,ot=G.withLastLimboFreeSnapshotVersion(et);A.Ms=A.Ms.insert(I,ot)}}})(r.localStore,c))}async function kC(s,t){const i=Ot(s);if(!i.currentUser.isEqual(t)){ft(Tg,"User change. New user:",t.toKey());const r=await PT(i.localStore,t);i.currentUser=t,(function(c,d){c.mu.forEach((p=>{p.forEach((_=>{_.reject(new ct(X.CANCELLED,d))}))})),c.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Au(i,r.Ls)}}function zC(s,t){const i=Ot(s),r=i.Au.get(t);if(r&&r.hu)return Qt().add(r.key);{let l=Qt();const c=i.Iu.get(t);if(!c)return l;for(const d of c){const p=i.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function WT(s){const t=Ot(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=XT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=VC.bind(null,t),t.Pu.H_=AC.bind(null,t.eventManager),t.Pu.yu=SC.bind(null,t.eventManager),t}function jC(s){const t=Ot(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=UC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=LC.bind(null,t),t}class wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Fh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return FI(this.persistence,new BI,t.initialUser,this.serializer)}Cu(t){return new LT(og.mi,this.serializer)}Du(t){return new ZI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wh.provider={build:()=>new wh};class BC extends wh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){Jt(this.persistence.referenceDelegate instanceof Sh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RI(r,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new LT((r=>Sh.mi(r,i)),this.serializer)}}class Mm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>C0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kC.bind(null,this.syncEngine),await vC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new TC})()}createDatastore(t){const i=Fh(t.databaseInfo.databaseId),r=(function(c){return new nC(c)})(t.databaseInfo);return(function(c,d,p,_){return new aC(c,d,p,_)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,l,c,d,p){return new lC(r,l,c,d,p)})(this.localStore,this.datastore,t.asyncQueue,(i=>C0(this.syncEngine,i,0)),(function(){return A0.v()?new A0:new JI})())}createSyncEngine(t,i){return(function(l,c,d,p,_,y,A){const S=new IC(l,c,d,p,_,y);return A&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const r=Ot(i);ft(Aa,"RemoteStore shutting down."),r.Ea.add(5),await Tu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mm.provider={build:()=>new Mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ds("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout((()=>{this.muted||t(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ct(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const i=await(async function(l,c){const d=Ot(l),p={documents:c.map((S=>Ah(d.serializer,S)))},_=await d.Ho("BatchGetDocuments",d.serializer.databaseId,pe.emptyPath(),p,c.length),y=new Map;_.forEach((S=>{const I=uI(d.serializer,S);y.set(I.key.toString(),I)}));const A=[];return c.forEach((S=>{const I=y.get(S.toString());Jt(!!I,55234,{key:S}),A.push(I)})),A})(this.datastore,t);return i.forEach((r=>this.recordVersion(r))),i}set(t,i){this.write(i.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,i){try{this.write(i.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new qh(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((i=>{t.delete(i.key.toString())})),t.forEach(((i,r)=>{const l=vt.fromPath(r);this.mutations.push(new AT(l,this.precondition(l)))})),await(async function(r,l){const c=Ot(r),d={writes:l.map((p=>xT(c.serializer,p)))};await c.Go("Commit",c.serializer.databaseId,pe.emptyPath(),d)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let i;if(t.isFoundDocument())i=t.version;else{if(!t.isNoDocument())throw bt(50498,{Gu:t.constructor.name});i=Ct.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!i.isEqual(r))throw new ct(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),i)}precondition(t){const i=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&i?i.isEqual(Ct.min())?mn.exists(!1):mn.updateTime(i):mn.none()}preconditionForUpdate(t){const i=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&i){if(i.isEqual(Ct.min()))throw new ct(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mn.updateTime(i)}return mn.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(t,i,r,l,c){this.asyncQueue=t,this.datastore=i,this.options=r,this.updateFunction=l,this.deferred=c,this.zu=r.maxAttempts,this.M_=new cg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const t=new qC(this.datastore),i=this.Hu(t);i&&i.then((r=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(r)})).catch((l=>{this.Yu(l)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(t){try{const i=this.updateFunction(t);return!_u(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(t)}Zu(t){if(t?.name==="FirebaseError"){const i=t.code;return i==="aborted"||i==="failed-precondition"||i==="already-exists"||!ST(i)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="FirestoreClient";class FC{constructor(t,i,r,l,c){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=l,this.user=En.UNAUTHENTICATED,this.clientId=$m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async d=>{ft(xr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(ft(xr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=pg(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function um(s,t){s.asyncQueue.verifyOperationInProgress(),ft(xr,"Initializing OfflineComponentProvider");const i=s.configuration;await t.initialize(i);let r=i.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await PT(t.localStore,l),r=l)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function D0(s,t){s.asyncQueue.verifyOperationInProgress();const i=await GC(s);ft(xr,"Initializing OnlineComponentProvider"),await t.initialize(i,s.configuration),s.setCredentialChangeListener((r=>b0(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>b0(t.remoteStore,l))),s._onlineComponents=t}async function GC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ft(xr,"Using user provided OfflineComponentProvider");try{await um(s,s._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!(function(l){return l.name==="FirebaseError"?l.code===X.FAILED_PRECONDITION||l.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;xo("Error using user provided cache. Falling back to memory cache: "+i),await um(s,new wh)}}else ft(xr,"Using default OfflineComponentProvider"),await um(s,new BC(void 0));return s._offlineComponents}async function bg(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ft(xr,"Using user provided OnlineComponentProvider"),await D0(s,s._uninitializedComponentsProvider._online)):(ft(xr,"Using default OnlineComponentProvider"),await D0(s,new Mm))),s._onlineComponents}function QC(s){return bg(s).then((t=>t.syncEngine))}function YC(s){return bg(s).then((t=>t.datastore))}async function Rh(s){const t=await bg(s),i=t.eventManager;return i.onListen=CC.bind(null,t.syncEngine),i.onUnlisten=xC.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=NC.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=OC.bind(null,t.syncEngine),i}function KC(s,t,i={}){const r=new Fi;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,_,y){const A=new Sg({next:I=>{A.Nu(),d.enqueueAndForget((()=>_g(c,S)));const G=I.docs.has(p);!G&&I.fromCache?y.reject(new ct(X.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&I.fromCache&&_&&_.source==="server"?y.reject(new ct(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),S=new Eg(Ph(p.path),A,{includeMetadataChanges:!0,qa:!0});return yg(c,S)})(await Rh(s),s.asyncQueue,t,i,r))),r.promise}function XC(s,t,i={}){const r=new Fi;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,_,y){const A=new Sg({next:I=>{A.Nu(),d.enqueueAndForget((()=>_g(c,S))),I.fromCache&&_.source==="server"?y.reject(new ct(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),S=new Eg(p,A,{includeMetadataChanges:!0,qa:!0});return yg(c,S)})(await Rh(s),s.asyncQueue,t,i,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="firestore.googleapis.com",O0=!0;class M0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ct(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eA,this.ssl=O0}else this.host=t.host,this.ssl=t.ssl??O0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=UT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<bI)throw new ct(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}h2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tA(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ct(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ct(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ct(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Yh{constructor(t,i,r,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ct(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new e2;switch(r.type){case"firstParty":return new r2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ct(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const r=x0.get(i);r&&(ft("ComponentProvider","Removing Datastore"),x0.delete(i),r.terminate())})(this),Promise.resolve()}}function $C(s,t,i,r={}){s=Cn(s,Yh);const l=Po(t),c=s._getSettings(),d={...c,emulatorOptions:s._getEmulatorOptions()},p=`${t}:${i}`;l&&(Z0(`https://${p}`),J0("Firestore",!0)),c.host!==eA&&c.host!==p&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...c,host:p,ssl:l,emulatorOptions:r};if(!_a(_,d)&&(s._setSettings(_),r.mockUserToken)){let y,A;if(typeof r.mockUserToken=="string")y=r.mockUserToken,A=En.MOCK_USER;else{y=R1(r.mockUserToken,s._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new ct(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new En(S)}s._authCredentials=new n2(new qE(y,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Vr(this.firestore,t,this._query)}}class Ce{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ce(this.firestore,t,this._key)}toJSON(){return{type:Ce._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,r){if(yu(i,Ce._jsonSchema))return new Ce(t,r||null,new vt(pe.fromString(i.referencePath)))}}Ce._jsonSchemaVersion="firestore/documentReference/1.0",Ce._jsonSchema={type:$e("string",Ce._jsonSchemaVersion),referencePath:$e("string")};class br extends Vr{constructor(t,i,r){super(t,i,Ph(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ce(this.firestore,null,new vt(t))}withConverter(t){return new br(this.firestore,t,this._path)}}function Bi(s,t,...i){if(s=tn(s),HE("collection","path",t),s instanceof Yh){const r=pe.fromString(t,...i);return Qv(r),new br(s,null,r)}{if(!(s instanceof Ce||s instanceof br))throw new ct(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(pe.fromString(t,...i));return Qv(r),new br(s.firestore,null,r)}}function hn(s,t,...i){if(s=tn(s),arguments.length===1&&(t=$m.newId()),HE("doc","path",t),s instanceof Yh){const r=pe.fromString(t,...i);return Gv(r),new Ce(s,null,new vt(r))}{if(!(s instanceof Ce||s instanceof br))throw new ct(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(pe.fromString(t,...i));return Gv(r),new Ce(s.firestore,s instanceof br?s.converter:null,new vt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="AsyncQueue";class U0{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cg(this,"async_queue_retry"),this._c=()=>{const r=lm();r&&ft(V0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const i=lm();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=lm();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Fi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!qo(t))throw t;ft(V0,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const i=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Ds("INTERNAL UNHANDLED ERROR: ",L0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=i,i}enqueueAfterDelay(t,i,r){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=gg.createAndSchedule(this,t,i,r,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&bt(47125,{Pc:L0(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((i,r)=>i.targetTimeMs-r.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function L0(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(s){return(function(i,r){if(typeof i!="object"||i===null)return!1;const l=i;for(const c of r)if(c in l&&typeof l[c]=="function")return!0;return!1})(s,["next","error","complete"])}class $i extends Yh{constructor(t,i,r,l){super(t,i,r,l),this.type="firestore",this._queue=new U0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new U0(t),this._firestoreClient=void 0,await t}}}function ZC(s,t){const i=typeof s=="object"?s:nE(),r=typeof s=="string"?s:_h,l=km(i,"firestore").getImmediate({identifier:r});if(!l._initialized){const c=b1("firestore");c&&$C(l,...c)}return l}function Su(s){if(s._terminated)throw new ct(X.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||JC(s),s._firestoreClient}function JC(s){const t=s._freezeSettings(),i=(function(l,c,d,p){return new A2(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,tA(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new FC(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $n(gn.fromBase64String(t))}catch(i){throw new ct(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new $n(gn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(yu(t,$n._jsonSchema))return $n.fromBase64String(t.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:$e("string",$n._jsonSchemaVersion),bytes:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new ct(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new ct(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new ct(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Gt(this._lat,t._lat)||Gt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qi._jsonSchemaVersion}}static fromJSON(t){if(yu(t,Qi._jsonSchema))return new Qi(t.latitude,t.longitude)}}Qi._jsonSchemaVersion="firestore/geoPoint/1.0",Qi._jsonSchema={type:$e("string",Qi._jsonSchemaVersion),latitude:$e("number"),longitude:$e("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t){this._values=(t||[]).map((i=>i))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,l){if(r.length!==l.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(yu(t,Yi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((i=>typeof i=="number")))return new Yi(t.vectorValues);throw new ct(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:$e("string",Yi._jsonSchemaVersion),vectorValues:$e("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=/^__.*__$/;class tN{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new Mr(t,this.data,this.fieldMask,i,this.fieldTransforms):new vu(t,this.data,i,this.fieldTransforms)}}class nA{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return new Mr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function iA(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt(40011,{Ac:s})}}class wg{constructor(t,i,r,l,c,d){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new wg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.gc(t),r}yc(t){const i=this.path?.child(t),r=this.Vc({path:i,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Ih(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((i=>t.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>t.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(iA(this.Ac)&&WC.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class eN{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||Fh(t)}Cc(t,i,r,l=!1){return new wg({Ac:t,methodName:i,Dc:r,path:dn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ru(s){const t=s._freezeSettings(),i=Fh(s._databaseId);return new eN(s._databaseId,!!t.ignoreUndefinedProperties,i)}function Rg(s,t,i,r,l,c={}){const d=s.Cc(c.merge||c.mergeFields?2:0,t,i,l);Ng("Data must be an object, but it was:",d,r);const p=aA(r,d);let _,y;if(c.merge)_=new Zn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const A=[];for(const S of c.mergeFields){const I=Vm(t,S,i);if(!d.contains(I))throw new ct(X.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);lA(A,I)||A.push(I)}_=new Zn(A),y=d.fieldTransforms.filter((S=>_.covers(S.field)))}else _=null,y=d.fieldTransforms;return new tN(new In(p),_,y)}class Kh extends wu{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Kh}}class Ig extends wu{_toFieldTransform(t){return new vT(t.path,new lu)}isEqual(t){return t instanceof Ig}}class Cg extends wu{constructor(t,i){super(t),this.Fc=i}_toFieldTransform(t){const i=new hu(t.serializer,mT(t.serializer,this.Fc));return new vT(t.path,i)}isEqual(t){return t instanceof Cg&&this.Fc===t.Fc}}function sA(s,t,i,r){const l=s.Cc(1,t,i);Ng("Data must be an object, but it was:",l,r);const c=[],d=In.empty();Or(r,((_,y)=>{const A=Dg(t,_,i);y=tn(y);const S=l.yc(A);if(y instanceof Kh)c.push(A);else{const I=Iu(y,S);I!=null&&(c.push(A),d.set(A,I))}}));const p=new Zn(c);return new nA(d,p,l.fieldTransforms)}function rA(s,t,i,r,l,c){const d=s.Cc(1,t,i),p=[Vm(t,r,i)],_=[l];if(c.length%2!=0)throw new ct(X.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<c.length;I+=2)p.push(Vm(t,c[I])),_.push(c[I+1]);const y=[],A=In.empty();for(let I=p.length-1;I>=0;--I)if(!lA(y,p[I])){const G=p[I];let et=_[I];et=tn(et);const ot=d.yc(G);if(et instanceof Kh)y.push(G);else{const it=Iu(et,ot);it!=null&&(y.push(G),A.set(G,it))}}const S=new Zn(y);return new nA(A,S,d.fieldTransforms)}function nN(s,t,i,r=!1){return Iu(i,s.Cc(r?4:3,t))}function Iu(s,t){if(oA(s=tn(s)))return Ng("Unsupported field value:",t,s),aA(s,t);if(s instanceof wu)return(function(r,l){if(!iA(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,l){const c=[];let d=0;for(const p of r){let _=Iu(p,l.wc(d));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),d++}return{arrayValue:{values:c}}})(s,t)}return(function(r,l){if((r=tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mT(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Ae.fromDate(r);return{timestampValue:Th(l.serializer,c)}}if(r instanceof Ae){const c=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Th(l.serializer,c)}}if(r instanceof Qi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $n)return{bytesValue:IT(l.serializer,r._byteString)};if(r instanceof Ce){const c=l.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:rg(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Yi)return(function(d,p){return{mapValue:{fields:{[JE]:{stringValue:WE},[vh]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return ng(p.serializer,y)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Vh(r)}`)})(s,t)}function aA(s,t){const i={};return QE(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Or(s,((r,l)=>{const c=Iu(l,t.mc(r));c!=null&&(i[r]=c)})),{mapValue:{fields:i}}}function oA(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ae||s instanceof Qi||s instanceof $n||s instanceof Ce||s instanceof wu||s instanceof Yi)}function Ng(s,t,i){if(!oA(i)||!FE(i)){const r=Vh(i);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function Vm(s,t,i){if((t=tn(t))instanceof bu)return t._internalPath;if(typeof t=="string")return Dg(s,t);throw Ih("Field path arguments must be of type string or ",s,!1,void 0,i)}const iN=new RegExp("[~\\*/\\[\\]]");function Dg(s,t,i){if(t.search(iN)>=0)throw Ih(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new bu(...t.split("."))._internalPath}catch{throw Ih(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function Ih(s,t,i,r,l){const c=r&&!r.isEmpty(),d=l!==void 0;let p=`Function ${t}() called with invalid data`;i&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(c||d)&&(_+=" (found",c&&(_+=` in field ${r}`),d&&(_+=` in document ${l}`),_+=")"),new ct(X.INVALID_ARGUMENT,p+s+_)}function lA(s,t){return s.some((i=>i.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(t,i,r,l,c){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new sN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(Xh("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class sN extends Ch{data(){return super.data()}}function Xh(s,t){return typeof t=="string"?Dg(s,t):t instanceof bu?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ct(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xg{}class cA extends xg{}function gr(s,t,...i){let r=[];t instanceof xg&&r.push(t),r=r.concat(i),(function(c){const d=c.filter((_=>_ instanceof Og)).length,p=c.filter((_=>_ instanceof $h)).length;if(d>1||d>0&&p>0)throw new ct(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class $h extends cA{constructor(t,i,r){super(),this._field=t,this._op=i,this._value=r,this.type="where"}static _create(t,i,r){return new $h(t,i,r)}_apply(t){const i=this._parse(t);return hA(t._query,i),new Vr(t.firestore,t.converter,bm(t._query,i))}_parse(t){const i=Ru(t.firestore);return(function(c,d,p,_,y,A,S){let I;if(y.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new ct(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){z0(S,A);const et=[];for(const ot of S)et.push(k0(_,c,ot));I={arrayValue:{values:et}}}else I=k0(_,c,S)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||z0(S,A),I=nN(p,d,S,A==="in"||A==="not-in");return Xe.create(y,A,I)})(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}}function Bl(s,t,i){const r=t,l=Xh("where",s);return $h._create(l,r,i)}class Og extends xg{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new Og(t,i)}_parse(t){const i=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return i.length===1?i[0]:Ii.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return i.getFilters().length===0?t:((function(l,c){let d=l;const p=c.getFlattenedFilters();for(const _ of p)hA(d,_),d=bm(d,_)})(t._query,i),new Vr(t.firestore,t.converter,bm(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mg extends cA{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new Mg(t,i)}_apply(t){const i=(function(l,c,d){if(l.startAt!==null)throw new ct(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new ct(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ou(c,d)})(t._query,this._field,this._direction);return new Vr(t.firestore,t.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new Ho(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,i))}}function ha(s,t="asc"){const i=t,r=Xh("orderBy",s);return Mg._create(r,i)}function k0(s,t,i){if(typeof(i=tn(i))=="string"){if(i==="")throw new ct(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oT(t)&&i.indexOf("/")!==-1)throw new ct(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const r=t.path.child(pe.fromString(i));if(!vt.isDocumentKey(r))throw new ct(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return t0(s,new vt(r))}if(i instanceof Ce)return t0(s,i._key);throw new ct(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vh(i)}.`)}function z0(s,t){if(!Array.isArray(s)||s.length===0)throw new ct(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function hA(s,t){const i=(function(l,c){for(const d of l)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(i!==null)throw i===t.op?new ct(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ct(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class fA{convertValue(t,i="none"){switch(Nr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return qe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Cr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw bt(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return Or(t,((l,c)=>{r[l]=this.convertValue(c,i)})),r}convertVectorValue(t){const i=t.fields?.[vh].arrayValue?.values?.map((r=>qe(r.doubleValue)));return new Yi(i)}convertGeoPoint(t){return new Qi(qe(t.latitude),qe(t.longitude))}convertArray(t,i){return(t.values||[]).map((r=>this.convertValue(r,i)))}convertServerTimestamp(t,i){switch(i){case"previous":const r=Lh(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(su(t));default:return null}}convertTimestamp(t){const i=Ir(t);return new Ae(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=pe.fromString(t);Jt(VT(r),9688,{name:t});const l=new ru(r.get(1),r.get(3)),c=new vt(r.popFirst(5));return l.isEqual(i)||Ds(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(s,t,i){let r;return r=s?i&&(i.merge||i.mergeFields)?s.toFirestore(t,i):s.toFirestore(t):t,r}class rN extends fA{constructor(t){super(),this.firestore=t}convertBytes(t){return new $n(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Ce(this.firestore,null,i)}}class bo{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class wr extends Ch{constructor(t,i,r,l,c,d){super(t,i,r,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(Xh("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=wr._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",wr._jsonSchema={type:$e("string",wr._jsonSchemaVersion),bundleSource:$e("string","DocumentSnapshot"),bundleName:$e("string"),bundle:$e("string")};class lh extends wr{data(t={}){return super.data(t)}}class ya{constructor(t,i,r,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new bo(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const t=[];return this.forEach((i=>t.push(i))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach((r=>{t.call(i,new lh(this._firestore,this._userDataWriter,r.key,r,new bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ct(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const _=new lh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new bo(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const _=new lh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new bo(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,A=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),A=d.indexOf(p.doc.key)),{type:aN(p.type),doc:_,oldIndex:y,newIndex:A}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ya._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=$m.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(i.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function aN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(s){s=Cn(s,Ce);const t=Cn(s.firestore,$i);return KC(Su(t),s._key).then((i=>dA(t,s,i)))}ya._jsonSchemaVersion="firestore/querySnapshot/1.0",ya._jsonSchema={type:$e("string",ya._jsonSchemaVersion),bundleSource:$e("string","QuerySnapshot"),bundleName:$e("string"),bundle:$e("string")};class Zh extends fA{constructor(t){super(),this.firestore=t}convertBytes(t){return new $n(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Ce(this.firestore,null,i)}}function fa(s){s=Cn(s,Vr);const t=Cn(s.firestore,$i),i=Su(t),r=new Zh(t);return uA(s._query),XC(i,s._query).then((l=>new ya(t,r,s,l)))}function Jc(s,t,i){s=Cn(s,Ce);const r=Cn(s.firestore,$i),l=Vg(s.converter,t,i);return Jh(r,[Rg(Ru(r),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,mn.none())])}function j0(s,t,i,...r){s=Cn(s,Ce);const l=Cn(s.firestore,$i),c=Ru(l);let d;return d=typeof(t=tn(t))=="string"||t instanceof bu?rA(c,"updateDoc",s._key,t,i,r):sA(c,"updateDoc",s._key,t),Jh(l,[d.toMutation(s._key,mn.exists(!0))])}function oN(s){return Jh(Cn(s.firestore,$i),[new qh(s._key,mn.none())])}function B0(s,t){const i=Cn(s.firestore,$i),r=hn(s),l=Vg(s.converter,t);return Jh(i,[Rg(Ru(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,mn.exists(!1))]).then((()=>r))}function q0(s,...t){s=tn(s);let i={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||P0(t[r])||(i=t[r++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(P0(t[r])){const _=t[r];t[r]=_.next?.bind(_),t[r+1]=_.error?.bind(_),t[r+2]=_.complete?.bind(_)}let c,d,p;if(s instanceof Ce)d=Cn(s.firestore,$i),p=Ph(s._key.path),c={next:_=>{t[r]&&t[r](dA(d,s,_))},error:t[r+1],complete:t[r+2]};else{const _=Cn(s,Vr);d=Cn(_.firestore,$i),p=_._query;const y=new Zh(d);c={next:A=>{t[r]&&t[r](new ya(d,y,_,A))},error:t[r+1],complete:t[r+2]},uA(s._query)}return(function(y,A,S,I){const G=new Sg(I),et=new Eg(A,G,S);return y.asyncQueue.enqueueAndForget((async()=>yg(await Rh(y),et))),()=>{G.Nu(),y.asyncQueue.enqueueAndForget((async()=>_g(await Rh(y),et)))}})(Su(d),p,l,c)}function Jh(s,t){return(function(r,l){const c=new Fi;return r.asyncQueue.enqueueAndForget((async()=>MC(await QC(r),l,c))),c.promise})(Su(s),t)}function dA(s,t,i){const r=i.docs.get(t._key),l=new Zh(s);return new wr(s,l,t._key,r,new bo(i.hasPendingWrites,i.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN={maxAttempts:5};function Yl(s,t){if((s=tn(s)).firestore!==t)throw new ct(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=Ru(t)}get(t){const i=Yl(t,this._firestore),r=new rN(this._firestore);return this._transaction.lookup([i._key]).then((l=>{if(!l||l.length!==1)return bt(24041);const c=l[0];if(c.isFoundDocument())return new Ch(this._firestore,r,c.key,c,i.converter);if(c.isNoDocument())return new Ch(this._firestore,r,i._key,null,i.converter);throw bt(18433,{doc:c})}))}set(t,i,r){const l=Yl(t,this._firestore),c=Vg(l.converter,i,r),d=Rg(this._dataReader,"Transaction.set",l._key,c,l.converter!==null,r);return this._transaction.set(l._key,d),this}update(t,i,r,...l){const c=Yl(t,this._firestore);let d;return d=typeof(i=tn(i))=="string"||i instanceof bu?rA(this._dataReader,"Transaction.update",c._key,i,r,l):sA(this._dataReader,"Transaction.update",c._key,i),this._transaction.update(c._key,d),this}delete(t){const i=Yl(t,this._firestore);return this._transaction.delete(i._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN extends uN{constructor(t,i){super(t,i),this._firestore=t}get(t){const i=Yl(t,this._firestore),r=new Zh(this._firestore);return super.get(t).then((l=>new wr(this._firestore,r,i._key,l._document,new bo(!1,!1),i.converter)))}}function vo(s,t,i){s=Cn(s,$i);const r={...lN,...i};return(function(c){if(c.maxAttempts<1)throw new ct(X.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(c,d,p){const _=new Fi;return c.asyncQueue.enqueueAndForget((async()=>{const y=await YC(c);new HC(c.asyncQueue,y,p,d,_).ju()})),_.promise})(Su(s),(l=>t(new cN(s,l))),r)}function Xn(){return new Ig("serverTimestamp")}function Hl(s){return new Cg("increment",s)}(function(t,i=!0){(function(l){jo=l})(ko),No(new va("firestore",((r,{instanceIdentifier:l,options:c})=>{const d=r.getProvider("app").getImmediate(),p=new $i(new i2(r.getProvider("auth-internal")),new a2(d,r.getProvider("app-check-internal")),(function(y,A){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ct(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(y.options.projectId,A)})(d,l),d);return c={useFetchStreams:i,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Ar(Bv,qv,t),Ar(Bv,qv,"esm2020")})();const hN={apiKey:"AIzaSyD9Q8xysodbNwRxv_YshLDo5pG9-CvdTQE",authDomain:"pallavolo-67515986-17130.firebaseapp.com",projectId:"pallavolo-67515986-17130",storageBucket:"pallavolo-67515986-17130.firebasestorage.app",messagingSenderId:"462112859333",appId:"1:462112859333:web:059bb7a96b44dca9e33cac"},mA=eE(hN),H0=WR(mA),ee=ZC(mA),fN=new ws,bs=14,Ve={NO_MATCHES:"no_matches",MATCH_LIST:"match_list",MATCH_DETAIL:"match_detail",MATCH_HISTORY:"match_history",USERS_LIST:"users_list",FORMATION_PROPOSAL:"formation_proposal",FORMATION_RESULT:"formation_result",ADD_SET:"add_set",SET_DETAIL:"set_detail"};function dN(){const[s,t]=Nt.useState(null),[i,r]=Nt.useState(!1),[l,c]=Nt.useState(!1),[d,p]=Nt.useState([]),[_,y]=Nt.useState([]),[A,S]=Nt.useState(null),[I,G]=Nt.useState([]),[et,ot]=Nt.useState(""),[it,wt]=Nt.useState(!1),[Vt,It]=Nt.useState(null),[se,oe]=Nt.useState(""),[Kt,N]=Nt.useState(!1),[b,C]=Nt.useState(""),[V,O]=Nt.useState(!0),[P,w]=Nt.useState(!1),[ve,Ue]=Nt.useState(null),[Q,at]=Nt.useState("user"),[Et,Xt]=Nt.useState([]),[re,M]=Nt.useState(!1),[J,lt]=Nt.useState(!1),[st,At]=Nt.useState(Ve.NO_MATCHES),[nt,Bt]=Nt.useState(null),[De,ye]=Nt.useState([]),[Ci,Zi]=Nt.useState([]),[Ji,Ms]=Nt.useState([]),[mi,Ur]=Nt.useState({team1:Array(6).fill(null),team2:Array(6).fill(null),reserve:null}),[Vs,Us]=Nt.useState([]),[wa,Le]=Nt.useState(null),[He,Ni]=Nt.useState(null),[Lr,Ra]=Nt.useState([]),[pn,Wi]=Nt.useState({team1:Array(6).fill(null),team2:Array(6).fill(null),reserve:null,scoreTeam1:0,scoreTeam2:0}),[Ia,Pr]=Nt.useState(null),[An,Ca]=Nt.useState(""),ts=Nt.useMemo(()=>hn(ee,"state","currentSession"),[]),es="tidolamiamail@gmail.com",Na=s?.email===es,$t=Q==="admin"||Na;Nt.useEffect(()=>{const L=qw(H0,async q=>{if(q){t(q),r(!0);const $=hn(ee,"users",q.uid),K=await ql($);let ut={};if(K.exists())ut=K.data(),oe(ut.customDisplayName||q.displayName),q.email===es?at("super-admin"):at(ut.role||"user");else{oe(q.displayName);const _t=q.email===es?"super-admin":"user";at(_t)}await Jc($,{email:q.email,displayName:q.displayName,photoURL:q.photoURL,lastLogin:Xn(),role:Q||(q.email===es?"super-admin":"user")},{merge:!0}),Sn(q.uid)}else t(null),r(!1),wt(!1),It(null),oe(""),N(!1)});return()=>L()},[]),Nt.useEffect(()=>{const L=localStorage.getItem("volleyball-theme");L&&O(L==="dark")},[]),Nt.useEffect(()=>{document.documentElement.classList.toggle("dark",V),localStorage.setItem("volleyball-theme",V?"dark":"light")},[V]),Nt.useEffect(()=>{let L;return(async()=>((await ql(ts)).exists()||await Jc(ts,{participants:[],reserves:[],lastUpdated:Xn()}),L=q0(ts,$=>{const K=$.data();p(Array.isArray(K?.participants)?K.participants:[]),y(Array.isArray(K?.reserves)?K.reserves:[]),S(K?.date||null)})))(),()=>{typeof L=="function"&&L()}},[ts]),Nt.useEffect(()=>{const q=(async()=>{try{const $=gr(Bi(ee,"activeMatches"),ha("date","asc"));return q0($,ut=>{const _t=ut.docs.map(ht=>({id:ht.id,...ht.data()}));Zi(_t),st===Ve.NO_MATCHES&&_t.length>0?At(Ve.MATCH_LIST):st===Ve.MATCH_LIST&&_t.length===0&&At(Ve.NO_MATCHES)})}catch($){console.error("Error loading active matches:",$),Zi([])}})();return()=>{typeof q=="function"&&q.then($=>$())}},[]),Nt.useEffect(()=>{const L=q=>{it&&!q.target.closest(".user-dropdown")&&wt(!1)};return document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[it]);function Ze(){const L=new Date,$=(9-L.getDay())%7||7,K=new Date(L);K.setDate(L.getDate()+$),K.setHours(20,30,0,0);const ut=_t=>_t.toString().padStart(2,"0");return`${K.getFullYear()}-${ut(K.getMonth()+1)}-${ut(K.getDate())}T${ut(K.getHours())}:${ut(K.getMinutes())}`}const[yn,we]=Nt.useState(Ze()),Da=async()=>{if(!(!$t||J)){lt(!0);try{const L=new Date(yn),q=gr(Bi(ee,"activeMatches"),ha("date","asc"));if((await fa(q)).docs.some(_t=>new Date(_t.data().date).getTime()===L.getTime())){alert("Esiste gi una partita per questo giorno e orario!");return}const ut=await B0(Bi(ee,"activeMatches"),{participants:[],reserves:[],date:yn,createdAt:Xn(),lastUpdated:Xn(),createdBy:s.uid,status:"active"});console.log("Partita creata con ID:",ut.id)}catch(L){console.error("Errore nella creazione della partita:",L),alert("Errore nella creazione della partita")}finally{lt(!1)}}},ns=async()=>{c(!0);try{const q=(await lR(H0,fN)).user,$=hn(ee,"users",q.uid),K=await ql($),ut=K.exists()?K.data():{};await Jc($,{email:q.email,displayName:q.displayName,photoURL:q.photoURL,lastLogin:Xn(),...ut.customDisplayName&&{customDisplayName:ut.customDisplayName},...ut.role&&{role:ut.role}},{merge:!0}),t(q),r(!0),Sn(q.uid)}catch(L){alert(`Errore durante il login: ${L.message||L}`),console.error("Login error:",L)}finally{c(!1)}},kr=async(L,q)=>{try{const $=await ql(hn(ee,"users",L)),K=$.exists()?$.data():{},ut=gr(Bi(ee,"sessions"),Bl("participantUids","array-contains",L),ha("date","desc")),ht=(await fa(ut)).docs.map(yt=>({id:yt.id,...yt.data()}));Ue({uid:L,displayName:K.customDisplayName||q,totalSessions:K?.stats?.totalSessions||0,asParticipant:K?.stats?.asParticipant||0,asReserve:K?.stats?.asReserve||0,friendsBrought:K?.stats?.friendsBrought||0,sessionsHistory:ht}),w(!0)}catch($){console.error("Errore nel caricamento delle statistiche:",$),alert("Errore nel caricamento delle statistiche")}},zn=()=>{if(!nt||!nt.participants)return;const L=nt.participants.map($=>({uid:$.uid,name:$.customDisplayName||$.displayName||$.email||"Utente",friends:$.friends||[]})),q=[];L.forEach($=>{q.push($),$.friends&&$.friends.length>0&&$.friends.forEach(K=>{q.push({uid:`friend_${$.uid}_${K}`,name:K,isFriend:!0,parentUid:$.uid,parentName:$.name})})}),Us(q),Ur({team1:Array(6).fill(null),team2:Array(6).fill(null),reserve:null})},is=async L=>{try{const q=gr(Bi(ee,"formationProposals"),Bl("matchId","==",L)),K=(await fa(q)).docs.map(ut=>({id:ut.id,...ut.data()}));return Ms(K),K}catch(q){return console.error("Errore nel caricamento delle formazioni:",q),[]}},xe=L=>{if(L.length<3)return null;const q=new Set;L.forEach(dt=>{const gt=dt.formation;gt.team1.forEach(St=>St&&q.add(St.uid)),gt.team2.forEach(St=>St&&q.add(St.uid)),gt.reserve&&q.add(gt.reserve.uid)});const $=Array.from(q),K={};$.forEach(dt=>{K[dt]={team1:Array(6).fill(0),team2:Array(6).fill(0),reserve:0,name:""}}),L.forEach(dt=>{const gt=dt.formation;gt.team1.forEach((St,he)=>{St&&(K[St.uid].team1[he]++,K[St.uid].name||(K[St.uid].name=St.name))}),gt.team2.forEach((St,he)=>{St&&(K[St.uid].team2[he]++,K[St.uid].name||(K[St.uid].name=St.name))}),gt.reserve&&(K[gt.reserve.uid].reserve++,K[gt.reserve.uid].name||(K[gt.reserve.uid].name=gt.reserve.name))});const ut={};$.forEach(dt=>{ut[dt]={},$.forEach(gt=>{dt!==gt&&(ut[dt][gt]={sameTeam:0,oppositeTeam:0})})}),L.forEach(dt=>{const gt=dt.formation,St=gt.team1.filter(Dt=>Dt).map(Dt=>Dt.uid),he=gt.team2.filter(Dt=>Dt).map(Dt=>Dt.uid);St.forEach(Dt=>{St.forEach(ke=>{Dt!==ke&&ut[Dt][ke].sameTeam++})}),he.forEach(Dt=>{he.forEach(ke=>{Dt!==ke&&ut[Dt][ke].sameTeam++})}),St.forEach(Dt=>{he.forEach(ke=>{ut[Dt][ke].oppositeTeam++,ut[ke][Dt].oppositeTeam++})})});const _t=new Set,ht={team1:Array(6).fill(null),team2:Array(6).fill(null),reserve:null};let yt=null,Ut=0;return $.forEach(dt=>{const gt=K[dt].reserve;gt>Ut&&(Ut=gt,yt=dt)}),yt&&Ut>0&&(ht.reserve={uid:yt,name:K[yt].name},_t.add(yt)),["team1","team2"].forEach(dt=>{for(let gt=0;gt<6;gt++){let St=null,he=0;$.forEach(Dt=>{if(_t.has(Dt))return;let ke=K[Dt][dt][gt];ht[dt].filter(ae=>ae!==null).map(ae=>ae.uid).forEach(ae=>{ke+=ut[Dt][ae].sameTeam*.5}),ht[dt==="team1"?"team2":"team1"].filter(ae=>ae!==null).map(ae=>ae.uid).forEach(ae=>{ke-=ut[Dt][ae].sameTeam*.3}),ke>he&&(he=ke,St=Dt)}),St&&(ht[dt][gt]={uid:St,name:K[St].name},_t.add(St))}}),{...ht,proposalCount:L.length,confidence:Wn(L,ht)}},Wn=(L,q)=>{let $=0,K=0;return L.forEach(ut=>{const _t=ut.formation;_t.team1.forEach((ht,yt)=>{K++,ht&&q.team1[yt]&&ht.uid===q.team1[yt].uid&&$++}),_t.team2.forEach((ht,yt)=>{K++,ht&&q.team2[yt]&&ht.uid===q.team2[yt].uid&&$++}),K++,_t.reserve&&q.reserve&&_t.reserve.uid===q.reserve.uid&&$++}),K>0?$/K*100:0},ti=()=>{if(!nt||!nt.participants)return;const L=nt.participants.map($=>({uid:$.uid,name:$.customDisplayName||$.displayName,friends:$.friends||[]})),q=[];L.forEach($=>{q.push($),$.friends&&$.friends.length>0&&$.friends.forEach(K=>{q.push({uid:`friend_${$.uid}_${K}`,name:K,isFriend:!0,parentUid:$.uid})})}),Us(q),Wi({team1:Array(6).fill(null),team2:Array(6).fill(null),reserve:null,scoreTeam1:0,scoreTeam2:0})},jn=async L=>{try{const q=gr(Bi(ee,"matchSets"),Bl("matchId","==",L),ha("setNumber","asc")),K=(await fa(q)).docs.map(ut=>({id:ut.id,...ut.data()}));return Ra(K),K}catch(q){return console.error("Errore nel caricamento dei set:",q),[]}};XS.useEffect(()=>{st===Ve.FORMATION_PROPOSAL&&nt&&zn(),(st===Ve.FORMATION_RESULT||st===Ve.FORMATION_PROPOSAL)&&nt&&is(nt.id).then(L=>{L.length>=3&&Ni(xe(L))})},[st,nt]);const Go=async L=>{if(!(!$t||!confirm("Sei sicuro di voler eliminare questa sessione dalle statistiche?")))try{await vo(ee,async $=>{const K=hn(ee,"sessions",L),ut=await $.get(K);if(!ut.exists())throw new Error("Sessione non trovata");const _t=ut.data(),ht=[...(_t.participantUids||[]).map(yt=>({uid:yt,participant:!0})),...(_t.reserveUids||[]).map(yt=>({uid:yt,participant:!1}))];for(const yt of ht){const Ut=hn(ee,"users",yt.uid),dt=await $.get(Ut);if(dt.exists()){const St=dt.data().stats||{};$.update(Ut,{stats:{...St,totalSessions:Math.max(0,(St.totalSessions||1)-1),asParticipant:yt.participant?Math.max(0,(St.asParticipant||1)-1):St.asParticipant||0,asReserve:yt.participant?St.asReserve||0:Math.max(0,(St.asReserve||1)-1)}})}}$.delete(K)}),alert("Sessione eliminata con successo"),Nn(),s&&Sn(s.uid)}catch($){console.error("Errore nell'eliminazione della sessione:",$),alert("Errore nell'eliminazione della sessione")}},Sn=async L=>{const q=await ql(hn(ee,"users",L)),$=q.exists()?q.data():{},K=gr(Bi(ee,"sessions"),Bl("participantUids","array-contains",L),ha("date","desc")),_t=(await fa(K)).docs.map(Dt=>({id:Dt.id,...Dt.data()})),ht=gr(Bi(ee,"matchSets"),Bl("participantUids","array-contains",L),ha("createdAt","desc")),Ut=(await fa(ht)).docs.map(Dt=>({id:Dt.id,...Dt.data()}));let dt=0,gt=0,St=0,he=0;Ut.forEach(Dt=>{const ke=Dt.teamA.some(Ie=>Ie.uid===L)?"A":"B",gi=ke==="A"?Dt.teamAScore:Dt.teamBScore,en=ke==="A"?Dt.teamBScore:Dt.teamAScore;St+=gi,he+=en,gi>en?dt++:gi<en&&gt++}),It({totalSessions:$?.stats?.totalSessions||0,asParticipant:$?.stats?.asParticipant||0,asReserve:$?.stats?.asReserve||0,friendsBrought:$?.stats?.friendsBrought||0,setsPlayed:Ut.length,setsWon:dt,setsLost:gt,pointsFor:St,pointsAgainst:he,pointDifference:St-he,sessionsHistory:_t})},Nn=async()=>{try{const L=gr(Bi(ee,"sessions"),ha("date","desc")),$=(await fa(L)).docs.map(K=>({id:K.id,...K.data()}));ye($)}catch(L){console.error("Error loading match history:",L),ye([])}},ss=async L=>{if(!(!$t||!confirm("Sei sicuro di voler ignorare questa sessione dalle statistiche?")))try{await Jc(hn(ee,"sessions",L),{ignoredFromStats:!0},{merge:!0}),alert("Sessione ignorata dalle statistiche"),Nn()}catch($){console.error("Errore nell'ignorare la sessione:",$),alert("Errore nell'ignorare la sessione")}},xa=()=>nt?nt.participants?.some(L=>L.uid===s?.uid)||nt.reserves?.some(L=>L.uid===s?.uid):!1,rs=()=>nt?nt.participants?.some(L=>L.uid===s?.uid):!1,zr=()=>nt?nt.reserves?.some(L=>L.uid===s?.uid):!1,jr=!!nt&&Ci.some(L=>L.id===nt.id),Dn=!!nt&&!Ci.some(L=>L.id===nt.id),ei=()=>{if(!nt)return 0;let L=nt.participants?.length||0;for(const q of nt.participants||[])L+=q.friends?.length||0;return L},Oa=()=>{if(!nt)return 0;let L=nt.reserves?.length||0;for(const q of nt.reserves||[])L+=q.friends?.length||0;return L},bn=async(L=!1)=>{if(!(!i||!s||!nt))try{const q=hn(ee,"activeMatches",nt.id);await vo(ee,async K=>{const _t=(await K.get(q)).data()||{participants:[],reserves:[]},ht=_t.participants?.some(gt=>gt.uid===s.uid);if(_t.reserves?.some(gt=>gt.uid===s.uid))throw new Error("Sei gi iscritto come riserva!");if(ht){if(I.length===0)throw new Error("Sei gi iscritto come partecipante!");let gt=_t.participants.length;for(const Dt of _t.participants)gt+=Dt.friends?.length||0;if(gt+I.length>bs)throw new Error(`Non ci sono abbastanza posti per tutti i +1, rimuoverne qualcuno e riprovare (posti disponibili: ${bs-gt})`);const he={..._t};he.participants=he.participants.map(Dt=>Dt.uid===s.uid?{...Dt,friends:[...Dt.friends||[],...I],timestamp:new Date().toLocaleString("it-IT")}:Dt),K.update(q,{participants:he.participants,lastUpdated:Xn()}),G([]),await Sn(s.uid),alert(`${I.length} amici aggiunti con successo!`);return}const Ut={uid:s.uid,name:se||s.displayName,photoURL:s.photoURL,friends:I,timestamp:new Date().toLocaleString("it-IT")},dt={..._t};if(dt.participants=Array.isArray(dt.participants)?dt.participants:[],dt.reserves=Array.isArray(dt.reserves)?dt.reserves:[],L)dt.reserves=[...dt.reserves,Ut];else{let gt=dt.participants.length;for(const he of dt.participants)gt+=he.friends?.length||0;if(gt+1+(I.length||0)<=bs)dt.participants=[...dt.participants,Ut];else{const he=bs-gt;throw new Error(`Non ci sono abbastanza posti per tutti i +1, rimuoverne qualcuno e riprovare (posti disponibili: ${he})`)}}K.update(q,{participants:dt.participants,reserves:dt.reserves,lastUpdated:Xn()})}),G([]),await Sn(s.uid);const $=ei();!L&&$>bs&&alert(`Lista partecipanti piena (${bs} posti)! Sei stato aggiunto alle riserve.`)}catch(q){alert(q.message||"Errore durante l'iscrizione")}},Bn=async()=>{if(!(!i||!s||!nt))try{const L=hn(ee,"activeMatches",nt.id);await vo(ee,async q=>{const K=(await q.get(L)).data()||{participants:[],reserves:[]},ut=K.participants?.findIndex(Ut=>Ut.uid===s.uid),_t=K.reserves?.findIndex(Ut=>Ut.uid===s.uid);if((ut===void 0||ut===-1)&&(_t===void 0||_t===-1))throw new Error("Non sei iscritto a questa partita.");const ht=[...K.participants||[]];let yt=[...K.reserves||[]];if(ut!==void 0&&ut!==-1){if(ht.splice(ut,1),yt.length>0){const Ut=yt[0];yt=yt.slice(1),ht.push(Ut)}}else _t!==void 0&&_t!==-1&&(yt=yt.filter(Ut=>Ut.uid!==s.uid));q.update(L,{participants:ht,reserves:yt,lastUpdated:Xn()})}),s&&await Sn(s.uid)}catch(L){alert(L.message||"Errore durante la disiscrizione")}},Re=async(L,q=!1)=>{if(!(!$t||!nt))try{const $=hn(ee,"activeMatches",nt.id);await vo(ee,async K=>{const _t=(await K.get($)).data()||{participants:[],reserves:[]};let ht=[..._t.participants||[]],yt=[..._t.reserves||[]];if(q)yt=yt.filter(Ut=>Ut.uid!==L);else if(ht=ht.filter(Ut=>Ut.uid!==L),yt.length>0){const Ut=yt[0];yt=yt.slice(1),ht.push(Ut)}K.update($,{participants:ht,reserves:yt,lastUpdated:Xn()})}),s&&s.uid===L&&await Sn(s.uid)}catch($){alert($.message||"Errore durante la rimozione")}},Pe=async(L,q,$=!1)=>{if(!(!$t||!nt))try{const K=hn(ee,"activeMatches",nt.id);await vo(ee,async ut=>{const ht=(await ut.get(K)).data()||{participants:[],reserves:[]};let yt=[...ht.participants||[]],Ut=[...ht.reserves||[]];if($){const dt=Ut.findIndex(gt=>gt.uid===L);dt!==-1&&Ut[dt].friends&&(Ut[dt]={...Ut[dt],friends:Ut[dt].friends.filter((gt,St)=>St!==q)})}else{const dt=yt.findIndex(gt=>gt.uid===L);dt!==-1&&yt[dt].friends&&(yt[dt]={...yt[dt],friends:yt[dt].friends.filter((gt,St)=>St!==q)})}ut.update(K,{participants:yt,reserves:Ut,lastUpdated:Xn()})}),s&&s.uid===L&&await Sn(s.uid)}catch(K){alert(K.message||"Errore durante la rimozione dell'amico")}},ni=async L=>{if(!(!$t||!nt))try{const q=hn(ee,"activeMatches",nt.id);await vo(ee,async $=>{const ut=(await $.get(q)).data()||{participants:[],reserves:[]},_t=ut.reserves?.findIndex(St=>St.uid===L);if(_t===-1)throw new Error("Riserva non trovata");const ht=ut.reserves[_t];let yt=ut.participants?.length||0;for(const St of ut.participants||[])yt+=St.friends?.length||0;const Ut=yt+1+(ht.friends?.length||0);if(Ut>bs)throw new Error(`Non c' abbastanza spazio. Servono ${Ut-yt} posti ma ne rimangono solo ${bs-yt}.`);const dt=[...ut.reserves||[]];dt.splice(_t,1);const gt=[...ut.participants||[],ht];$.update(q,{participants:gt,reserves:dt,lastUpdated:Xn()})}),s&&s.uid===L&&await Sn(s.uid),alert("Riserva promossa a partecipante con successo!")}catch(q){console.error("Errore nella promozione:",q),alert(q.message||"Errore nella promozione della riserva")}},Ls=()=>D.jsx("div",{className:"flex flex-col items-center justify-center",children:D.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl p-6 md:p-8 border border-gray-700 w-full max-w-lg text-center",children:[D.jsxs("div",{className:"mb-6",children:[D.jsx("div",{className:"text-6xl mb-4",children:""}),D.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-100 mb-2",children:"Nessuna partita attiva"}),D.jsx("p",{className:"text-gray-400",children:"Al momento non ci sono partite programmate"})]}),i&&$t&&D.jsxs("div",{className:"mb-6",children:[D.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"Crea una nuova partita"}),D.jsxs("div",{className:"mb-4",children:[D.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Data e ora della partita"}),D.jsx("input",{type:"datetime-local",value:yn,onChange:L=>we(L.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-gray-100 focus:border-indigo-500 focus:outline-none"})]}),D.jsx("button",{onClick:Da,disabled:J,className:"w-full px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:J?D.jsxs(D.Fragment,{children:[D.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Creando..."]}):D.jsxs(D.Fragment,{children:[D.jsx(h1,{className:"w-5 h-5"}),"Crea Partita"]})})]}),!i&&D.jsxs("div",{className:"mb-6",children:[D.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Effettua il login per partecipare alle partite"}),D.jsx("button",{onClick:ns,disabled:l,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium flex items-center justify-center gap-2",children:l?D.jsxs(D.Fragment,{children:[D.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Accesso..."]}):D.jsxs(D.Fragment,{children:[D.jsx(g1,{className:"w-5 h-5"}),"Accedi con Google"]})})]}),i&&!$t&&D.jsxs("div",{className:"text-gray-400 text-sm",children:[D.jsx("p",{children:"Le partite vengono create dagli amministratori."}),D.jsx("p",{children:"Sarai notificato quando sar disponibile una nuova partita!"})]})]})}),Qo=()=>i?D.jsxs("div",{className:"space-y-6",children:[Dn&&D.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-4",children:[D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),D.jsx("span",{className:"text-gray-300 font-medium",children:"Partita Storica - Solo Visualizzazione"})]}),D.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Questa partita  stata completata e non  pi possibile iscriversi o modificare i partecipanti."})]}),jr&&D.jsxs(D.Fragment,{children:[!xa()&&D.jsxs("div",{className:"space-y-4",children:[D.jsxs("div",{className:"flex gap-3",children:[D.jsxs("button",{onClick:()=>bn(!1),className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-medium flex items-center justify-center gap-2",children:[D.jsx(d1,{className:"w-5 h-5"}),"Iscriviti come Partecipante"]}),D.jsxs("button",{onClick:()=>bn(!0),className:"flex-1 px-6 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition font-medium flex items-center justify-center gap-2",children:[D.jsx(u1,{className:"w-5 h-5"}),"Iscriviti come Riserva"]})]}),D.jsxs("div",{className:"space-y-4",children:[D.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:["* Puoi aggiungere fino a ",D.jsxs("span",{className:"font-bold text-indigo-300",children:[$t?"illimitati":"3"," amici"]})," per sessione"]}),D.jsxs("div",{className:"flex gap-2 items-center",children:[D.jsx("input",{type:"text",value:et||"",onChange:L=>ot(L.target.value),className:"px-4 py-2 rounded-lg bg-gray-700 text-gray-100 border border-gray-600 focus:ring-2 focus:ring-indigo-500",placeholder:"Nome amico",disabled:!$t&&I.length>=3}),D.jsx("button",{type:"button",onClick:()=>{et&&($t||I.length<3)&&(G([...I,et]),ot(""))},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium",disabled:!et||!$t&&I.length>=3,children:"Aggiungi amico"})]}),I.length>0&&D.jsxs("div",{className:"mt-2",children:[D.jsx("div",{className:"text-sm text-gray-300 mb-2",children:"Amici aggiunti:"}),D.jsx("ul",{className:"space-y-2",children:I.map((L,q)=>D.jsxs("li",{className:"flex items-center gap-2",children:[D.jsx("span",{className:"bg-indigo-900 text-indigo-100 px-3 py-1 rounded-full",children:L}),D.jsx("button",{type:"button",onClick:()=>G(I.filter(($,K)=>K!==q)),className:"text-red-400 hover:text-red-600 text-xs",children:"Rimuovi"})]},q))})]})]})]}),rs()&&D.jsxs("div",{className:"space-y-4",children:[D.jsxs("div",{className:"p-3 bg-green-900/20 border border-green-600 rounded-lg",children:[D.jsx("p",{className:"text-green-300 text-sm font-medium",children:" Sei gi iscritto come partecipante"}),D.jsx("p",{className:"text-green-200 text-xs mt-1",children:"Puoi comunque aggiungere amici alla tua iscrizione"})]}),D.jsxs("div",{className:"space-y-4",children:[D.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:["* Puoi aggiungere fino a ",D.jsxs("span",{className:"font-bold text-indigo-300",children:[$t?"illimitati":"3"," amici"]})," per sessione"]}),D.jsxs("div",{className:"flex gap-2 items-center",children:[D.jsx("input",{type:"text",value:et||"",onChange:L=>ot(L.target.value),className:"px-4 py-2 rounded-lg bg-gray-700 text-gray-100 border border-gray-600 focus:ring-2 focus:ring-indigo-500",placeholder:"Nome amico",disabled:!$t&&I.length>=3}),D.jsx("button",{type:"button",onClick:()=>{et&&($t||I.length<3)&&(G([...I,et]),ot(""))},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium",disabled:!et||!$t&&I.length>=3,children:"Aggiungi amico"})]}),I.length>0&&D.jsxs("div",{className:"mt-2",children:[D.jsx("div",{className:"text-sm text-gray-300 mb-2",children:"Amici da aggiungere:"}),D.jsx("ul",{className:"space-y-2",children:I.map((L,q)=>D.jsxs("li",{className:"flex items-center gap-2",children:[D.jsx("span",{className:"bg-indigo-900 text-indigo-100 px-3 py-1 rounded-full",children:L}),D.jsx("button",{type:"button",onClick:()=>G(I.filter(($,K)=>K!==q)),className:"text-red-400 hover:text-red-600 text-xs",children:"Rimuovi"})]},q))}),D.jsxs("button",{onClick:()=>bn(!1),className:"w-full mt-3 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-medium",children:["Aggiungi ",I.length," amici alla mia iscrizione"]})]})]})]}),zr()&&D.jsxs("div",{className:"p-3 bg-amber-900/20 border border-amber-600 rounded-lg",children:[D.jsx("p",{className:"text-amber-300 text-sm font-medium",children:" Sei iscritto come riserva"}),D.jsx("p",{className:"text-amber-200 text-xs mt-1",children:"Non puoi aggiungere amici finch sei in lista riserve"})]}),xa()&&D.jsx("button",{onClick:Bn,className:"w-full px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium",children:"Disiscriviti"})]}),D.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mt-8",children:[D.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl p-6 border border-gray-700",children:[D.jsxs("div",{className:"flex items-center justify-between mb-4",children:[D.jsx("h2",{className:"text-xl font-bold text-gray-100",children:"Partecipanti"}),D.jsxs("span",{className:"bg-green-900 text-green-200 px-3 py-1 rounded-full font-semibold text-sm border border-green-700",children:[ei()," / ",bs]})]}),D.jsx("div",{className:"space-y-3",children:!nt||!nt.participants||nt.participants.length===0?D.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nessun partecipante"}):nt.participants.map((L,q)=>D.jsx("div",{className:"bg-green-900 rounded-lg p-3 border border-green-700",children:D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsx("img",{src:L.photoURL,alt:L.name,className:"w-10 h-10 rounded-full border-2 border-green-500"}),D.jsxs("div",{className:"flex-1",children:[D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsx("span",{className:"font-medium text-gray-100",children:L.name}),D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("span",{className:"text-xs text-gray-400",children:L.timestamp}),D.jsx("button",{onClick:()=>kr(L.uid,L.name),className:"text-blue-400 hover:text-blue-300 text-xs px-2 py-1 rounded bg-blue-900/30 hover:bg-blue-900/50 transition",title:"Visualizza statistiche",children:""}),$t&&!Dn&&D.jsx("button",{onClick:()=>Re(L.uid,!1),className:"text-red-400 hover:text-red-600 text-xs px-2 py-1 rounded bg-red-900/30 hover:bg-red-900/50 transition",title:"Rimuovi utente",children:""})]})]}),L.friends?.length>0&&D.jsx("div",{className:"mt-2 space-y-1",children:L.friends.map(($,K)=>D.jsxs("div",{className:"text-sm text-gray-300 flex items-center gap-2 justify-between",children:[D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("span",{className:"text-green-400",children:"+"}),$]}),$t&&!Dn&&D.jsx("button",{onClick:()=>Pe(L.uid,K,!1),className:"text-red-400 hover:text-red-600 text-xs px-1 py-0.5 rounded bg-red-900/30 hover:bg-red-900/50 transition ml-2",title:"Rimuovi amico",children:""})]},K))})]})]})},L.uid+"_"+q))})]}),!Dn&&D.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl p-6 border border-gray-700",children:[D.jsxs("div",{className:"flex items-center justify-between mb-4",children:[D.jsx("h2",{className:"text-xl font-bold text-gray-100",children:"Riserve"}),D.jsx("span",{className:"bg-amber-900 text-amber-200 px-3 py-1 rounded-full font-semibold text-sm border border-amber-700",children:Oa()})]}),D.jsx("div",{className:"space-y-3",children:!nt||!nt.reserves||nt.reserves.length===0?D.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nessuna riserva"}):nt.reserves.map((L,q)=>D.jsx("div",{className:"bg-amber-900 rounded-lg p-3 border border-amber-700",children:D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsx("img",{src:L.photoURL,alt:L.name,className:"w-10 h-10 rounded-full border-2 border-amber-500"}),D.jsxs("div",{className:"flex-1",children:[D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsxs("span",{className:"font-medium text-gray-100",children:[q+1,". ",L.name]}),D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("span",{className:"text-xs text-gray-400",children:L.timestamp}),D.jsx("button",{onClick:()=>kr(L.uid,L.name),className:"text-blue-400 hover:text-blue-300 text-xs px-2 py-1 rounded bg-blue-900/30 hover:bg-blue-900/50 transition",title:"Visualizza statistiche",children:""}),$t&&D.jsxs(D.Fragment,{children:[D.jsx("button",{onClick:()=>ni(L.uid),className:"text-green-400 hover:text-green-300 text-xs px-2 py-1 rounded bg-green-900/30 hover:bg-green-900/50 transition",title:"Promuovi a partecipante",children:""}),D.jsx("button",{onClick:()=>Re(L.uid,!0),className:"text-red-400 hover:text-red-600 text-xs px-2 py-1 rounded bg-red-900/30 hover:bg-red-900/50 transition",title:"Rimuovi utente",children:""})]})]})]}),L.friends?.length>0&&D.jsx("div",{className:"mt-2 space-y-1",children:L.friends.map(($,K)=>D.jsxs("div",{className:"text-sm text-gray-300 flex items-center gap-2 justify-between",children:[D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("span",{className:"text-amber-400",children:"+"}),$]}),$t&&D.jsx("button",{onClick:()=>Pe(L.uid,K,!0),className:"text-red-400 hover:text-red-600 text-xs px-1 py-0.5 rounded bg-red-900/30 hover:bg-red-900/50 transition ml-2",title:"Rimuovi amico",children:""})]},K))})]})]})},L.uid+"_"+q))})]})]}),Dn&&nt&&s&&nt.participants&&nt.participants.some(L=>L.uid===s.uid)&&D.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl p-6 border border-gray-700",children:[D.jsxs("h3",{className:"text-lg font-bold text-gray-100 mb-4",children:["Formazioni e Set ",D.jsx("span",{className:"text-xs bg-orange-500 px-2 py-1 rounded-full ml-2",children:"Beta"})]}),D.jsxs("div",{className:"flex flex-wrap gap-3",children:[D.jsxs("button",{onClick:()=>{zn(),At(Ve.FORMATION_PROPOSAL)},className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium flex items-center gap-2",children:[D.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Proponi Formazione ",D.jsx("span",{className:"text-xs bg-orange-500 px-2 py-1 rounded-full ml-1",children:"Beta"})]}),Ji.length>=3&&D.jsxs("button",{onClick:()=>{At(Ve.FORMATION_RESULT)},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-medium flex items-center gap-2",children:[D.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Vedi Formazioni (",Ji.length,") ",D.jsx("span",{className:"text-xs bg-orange-500 px-2 py-1 rounded-full ml-1",children:"Beta"})]}),D.jsxs("button",{onClick:()=>{ti(),At(Ve.ADD_SET)},className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium flex items-center gap-2",children:[D.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Aggiungi Set"]})]})]}),Dn&&nt&&Lr.length>0&&D.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl p-6 border border-gray-700",children:[D.jsxs("h3",{className:"text-lg font-bold text-gray-100 mb-4",children:["Set Registrati (",Lr.length,")"]}),D.jsx("div",{className:"grid gap-4",children:Lr.map((L,q)=>D.jsx("div",{onClick:()=>{Pr(L),At(Ve.SET_DETAIL)},className:"bg-gray-900 rounded-lg p-4 border border-gray-600 hover:border-gray-500 cursor-pointer transition",children:D.jsxs("div",{className:"flex justify-between items-center",children:[D.jsxs("div",{children:[D.jsxs("h4",{className:"font-semibold text-gray-100",children:["Set #",q+1]}),D.jsxs("p",{className:"text-sm text-gray-400",children:["Squadra A: ",L.teamAScore," - Squadra B: ",L.teamBScore]}),D.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Registrato da ",L.createdByName||"Utente"," il ",new Date(L.createdAt.toDate()).toLocaleDateString()]})]}),D.jsxs("div",{className:"text-right",children:[D.jsx("div",{className:`text-lg font-bold ${L.teamAScore>L.teamBScore?"text-green-400":L.teamBScore>L.teamAScore?"text-red-400":"text-yellow-400"}`,children:L.teamAScore>L.teamBScore?"A vince":L.teamBScore>L.teamAScore?"B vince":"Pareggio"}),D.jsx("svg",{className:"w-5 h-5 text-gray-400 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})},L.id))})]})]}):D.jsxs("div",{className:"space-y-4 text-center py-8",children:[D.jsx("p",{className:"text-gray-300 mb-6",children:"Accedi con Google per iscriverti agli allenamenti"}),D.jsxs("button",{onClick:ns,disabled:l,className:"inline-flex items-center gap-3 px-8 py-4 bg-white text-gray-800 rounded-lg hover:bg-gray-100 transition font-medium shadow-lg disabled:opacity-50",children:[D.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[D.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),D.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),D.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),D.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),l?"Accesso in corso...":"Accedi con Google"]}),D.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"* Login con Firebase/Google OAuth"})]}),Ma=async L=>{if(!(!$t||!confirm("Sei sicuro di voler riaprire questa partita? Verr aggiunta alle partite attive e le statistiche verranno aggiornate.")))try{await B0(Bi(ee,"activeMatches"),{participants:L.participants||[],reserves:L.reserves||[],date:L.date.toDate?L.date.toDate().toISOString():new Date().toISOString(),createdAt:Xn(),lastUpdated:Xn(),createdBy:s.uid,status:"active",reopenedFrom:L.id});const $=L.participants||[],K=L.reserves||[],ut=$.map(ht=>j0(hn(ee,"users",ht.uid),{"stats.totalSessions":Hl(-1),"stats.asParticipant":Hl(-1),"stats.friendsBrought":Hl(-(ht.friends?.length||0))})),_t=K.map(ht=>j0(hn(ee,"users",ht.uid),{"stats.asReserve":Hl(-1),"stats.friendsBrought":Hl(-(ht.friends?.length||0))}));await Promise.allSettled([...ut,..._t]),await oN(hn(ee,"sessions",L.id)),s&&($.some(ht=>ht.uid===s.uid)||K.some(ht=>ht.uid===s.uid))&&await Sn(s.uid),alert("Partita riaperta con successo! Statistiche aggiornate."),await Nn()}catch($){console.error("Errore nella riapertura della partita:",$),alert("Errore nella riapertura della partita")}},Va=()=>{const L=An?De.filter(q=>q.participants?.some($=>$.uid===An)||q.reserves?.some($=>$.uid===An)):De;return D.jsx("div",{className:"space-y-4 md:space-y-6",children:D.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl p-4 md:p-6 border border-gray-700",children:[D.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[D.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-100",children:"Storico Partite"}),D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsx("label",{className:"text-sm text-gray-300",children:"Filtra per giocatore:"}),D.jsxs("select",{value:An,onChange:q=>Ca(q.target.value),className:"bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[D.jsx("option",{value:"",children:"Tutti i giocatori"}),Et.filter(q=>q.stats&&(q.stats.totalSessions>0||q.stats.asReserve>0)).sort((q,$)=>(q.displayName||q.email).localeCompare($.displayName||$.email)).map(q=>D.jsx("option",{value:q.id,children:q.displayName||q.email},q.id))]}),An&&D.jsx("button",{onClick:()=>Ca(""),className:"text-gray-400 hover:text-gray-200 transition",title:"Rimuovi filtro",children:D.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),L.length===0?D.jsx("div",{className:"text-center py-8",children:D.jsx("p",{className:"text-gray-400",children:An?"Nessuna partita trovata per questo giocatore":"Nessuna partita nel database"})}):D.jsx("div",{className:"space-y-3 md:space-y-4",children:L.map((q,$)=>D.jsx("div",{className:"bg-gray-700 rounded-lg p-3 md:p-4 border border-gray-600 hover:border-indigo-500 transition group",children:D.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[D.jsxs("div",{onClick:async()=>{const K={...q,id:q.id,date:q.date.toDate?q.date.toDate().toISOString():new Date().toISOString()};Bt(K),await jn(q.id),At(Ve.MATCH_DETAIL)},className:"flex-1 cursor-pointer",children:[D.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-100 group-hover:text-indigo-300",children:q.date?.toDate?q.date.toDate().toLocaleDateString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Partita"}),D.jsx("p",{className:"text-sm md:text-base text-gray-400 mt-1",children:q.date?.toDate?q.date.toDate().toLocaleString("it-IT",{dateStyle:"short",timeStyle:"short"}):"Data non disponibile"}),q.ignoredFromStats&&D.jsx("span",{className:"inline-block mt-1 text-xs bg-yellow-900/50 text-yellow-300 px-2 py-1 rounded",children:"Ignorata dalle statistiche"})]}),D.jsxs("div",{className:"flex items-center gap-3 md:gap-4 justify-between md:justify-end",children:[D.jsxs("div",{className:"text-center",children:[D.jsx("div",{className:"text-lg md:text-2xl font-bold text-green-400",children:(q.participants?.length||0)+(q.participants?.reduce((K,ut)=>K+(ut.friends?.length||0),0)||0)}),D.jsx("div",{className:"text-xs text-gray-400",children:"Partecipanti"})]}),D.jsxs("div",{className:"text-center",children:[D.jsx("div",{className:"text-lg md:text-2xl font-bold text-amber-400",children:(q.reserves?.length||0)+(q.reserves?.reduce((K,ut)=>K+(ut.friends?.length||0),0)||0)}),D.jsx("div",{className:"text-xs text-gray-400",children:"Riserve"})]}),$t&&D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("button",{onClick:K=>{K.stopPropagation(),Ma(q)},className:"p-1 md:p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-900/20 rounded-lg transition",title:"Riapri partita",children:D.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),D.jsx("button",{onClick:K=>{K.stopPropagation(),ss(q.id)},className:`p-1 md:p-2 text-yellow-400 hover:text-yellow-300 hover:bg-yellow-900/20 rounded-lg transition ${q.ignoredFromStats?"bg-yellow-900/50":""}`,title:q.ignoredFromStats?"Riattiva nelle statistiche":"Ignora dalle statistiche",children:q.ignoredFromStats?"":""}),D.jsx("button",{onClick:K=>{K.stopPropagation(),Go(q.id)},className:"p-1 md:p-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded-lg transition",title:"Elimina partita",children:D.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})},q.id))})]})})};return D.jsx("div",{className:`min-h-screen transition-colors duration-200 ${V?"bg-gray-900":"bg-gray-100"}`,children:D.jsx("div",{className:"container mx-auto p-4 max-w-6xl",children:i?st===Ve.NO_MATCHES?Ls():st===Ve.MATCH_DETAIL?Qo():st===Ve.FORMATION_PROPOSAL?renderFormationProposalView():st===Ve.FORMATION_RESULT?renderFormationResultView():st===Ve.ADD_SET?renderAddSetView():st===Ve.SET_DETAIL?renderSetDetailView():st===Ve.MATCH_HISTORY?Va():st===Ve.USERS_LIST?renderUsersListView():st===Ve.USER_DETAIL?renderUserDetailView():renderActiveMatchesView():renderLoginView()})})}function mN(){return D.jsx("div",{className:"App",children:D.jsx(dN,{})})}n1.createRoot(document.getElementById("root")).render(D.jsx(Nt.StrictMode,{children:D.jsx(mN,{})}));
